/*! For license information please see main.61b5109c.js.LICENSE.txt */
!function(){var e={757:function(e,t,n){e.exports=n(727)},110:function(e,t,n){"use strict";var r=n(441),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?o:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var s=u(t),v=u(n),m=0;m<o.length;++m){var y=o[m];if(!a[y]&&(!r||!r[y])&&(!v||!v[y])&&(!s||!s[y])){var g=h(n,y);try{c(t,y,g)}catch(k){}}}}return t}},725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,a){for(var o,s,u=i(e),c=1;c<arguments.length;c++){for(var l in o=Object(arguments[c]))n.call(o,l)&&(u[l]=o[l]);if(t){s=t(o);for(var f=0;f<s.length;f++)r.call(o,s[f])&&(u[s[f]]=o[s[f]])}}return u}},888:function(e,t,n){"use strict";var r=n(47);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),i=n(725),a=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var s=new Set,u={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(u[e]=t,e=0;e<t.length;e++)s.add(t[e])}var f=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},v={};function m(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function k(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(v,e)||!d.call(p,e)&&(h.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,k);y[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,k);y[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,k);y[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=60103,_=60106,I=60107,E=60108,T=60114,S=60109,N=60110,C=60112,A=60113,R=60120,P=60115,O=60116,D=60121,L=60128,j=60129,M=60130,F=60131;if("function"===typeof Symbol&&Symbol.for){var U=Symbol.for;x=U("react.element"),_=U("react.portal"),I=U("react.fragment"),E=U("react.strict_mode"),T=U("react.profiler"),S=U("react.provider"),N=U("react.context"),C=U("react.forward_ref"),A=U("react.suspense"),R=U("react.suspense_list"),P=U("react.memo"),O=U("react.lazy"),D=U("react.block"),U("react.scope"),L=U("react.opaque.id"),j=U("react.debug_trace_mode"),M=U("react.offscreen"),F=U("react.legacy_hidden")}var V,q="function"===typeof Symbol&&Symbol.iterator;function z(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=q&&e[q]||e["@@iterator"])?e:null}function B(e){if(void 0===V)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);V=t&&t[1]||""}return"\n"+V+e}var K=!1;function H(e,t){if(!e||K)return"";K=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=s);break}}}finally{K=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?B(e):""}function W(e){switch(e.tag){case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return e=H(e.type,!1);case 11:return e=H(e.type.render,!1);case 22:return e=H(e.type._render,!1);case 1:return e=H(e.type,!0);default:return""}}function G(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case _:return"Portal";case T:return"Profiler";case E:return"StrictMode";case A:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case N:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case P:return G(e.type);case D:return G(e._render);case O:t=e._payload,e=e._init;try{return G(e(t))}catch(n){}}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function $(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=$(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function J(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=$(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,Q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ae(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ue(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Q(n)}}function ce(e,t){var n=Q(t.value),r=Q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var fe="http://www.w3.org/1999/xhtml",he="http://www.w3.org/2000/svg";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ve,me,ye=(me=function(e,t){if(e.namespaceURI!==he||"innerHTML"in e)e.innerHTML=t;else{for((ve=ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return me(e,t)}))}:me);function ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ke={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},we=["Webkit","ms","Moz","O"];function be(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ke.hasOwnProperty(e)&&ke[e]?(""+t).trim():t+"px"}function xe(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=be(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ke).forEach((function(e){we.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ke[t]=ke[e]}))}));var _e=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ie(e,t){if(t){if(_e[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Ee(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Te(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ne=null,Ce=null;function Ae(e){if(e=ri(e)){if("function"!==typeof Se)throw Error(o(280));var t=e.stateNode;t&&(t=ai(t),Se(e.stateNode,e.type,t))}}function Re(e){Ne?Ce?Ce.push(e):Ce=[e]:Ne=e}function Pe(){if(Ne){var e=Ne,t=Ce;if(Ce=Ne=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Oe(e,t){return e(t)}function De(e,t,n,r,i){return e(t,n,r,i)}function Le(){}var je=Oe,Me=!1,Fe=!1;function Ue(){null===Ne&&null===Ce||(Le(),Pe())}function Ve(e,t){var n=e.stateNode;if(null===n)return null;var r=ai(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var qe=!1;if(f)try{var ze={};Object.defineProperty(ze,"passive",{get:function(){qe=!0}}),window.addEventListener("test",ze,ze),window.removeEventListener("test",ze,ze)}catch(me){qe=!1}function Be(e,t,n,r,i,a,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Ke=!1,He=null,We=!1,Ge=null,Qe={onError:function(e){Ke=!0,He=e}};function $e(e,t,n,r,i,a,o,s,u){Ke=!1,He=null,Be.apply(Qe,arguments)}function Ye(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Je(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Xe(e){if(Ye(e)!==e)throw Error(o(188))}function Ze(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ye(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Xe(i),e;if(a===r)return Xe(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,at=!1,ot=[],st=null,ut=null,ct=null,lt=new Map,ft=new Map,ht=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function vt(e,t){switch(e){case"focusin":case"focusout":st=null;break;case"dragenter":case"dragleave":ut=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ft.delete(t.pointerId)}}function mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=pt(t,n,r,i,a),null!==t&&(null!==(t=ri(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function yt(e){var t=ni(e.target);if(null!==t){var n=Ye(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Je(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ri(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function kt(e,t,n){gt(e)&&n.delete(t)}function wt(){for(at=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ri(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==st&&gt(st)&&(st=null),null!==ut&&gt(ut)&&(ut=null),null!==ct&&gt(ct)&&(ct=null),lt.forEach(kt),ft.forEach(kt)}function bt(e,t){e.blockedOn===t&&(e.blockedOn=null,at||(at=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,wt)))}function xt(e){function t(t){return bt(t,e)}if(0<ot.length){bt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==st&&bt(st,e),null!==ut&&bt(ut,e),null!==ct&&bt(ct,e),lt.forEach(t),ft.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)yt(n),null===n.blockedOn&&ht.shift()}function _t(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var It={animationend:_t("Animation","AnimationEnd"),animationiteration:_t("Animation","AnimationIteration"),animationstart:_t("Animation","AnimationStart"),transitionend:_t("Transition","TransitionEnd")},Et={},Tt={};function St(e){if(Et[e])return Et[e];if(!It[e])return e;var t,n=It[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tt)return Et[e]=n[t];return e}f&&(Tt=document.createElement("div").style,"AnimationEvent"in window||(delete It.animationend.animation,delete It.animationiteration.animation,delete It.animationstart.animation),"TransitionEvent"in window||delete It.transitionend.transition);var Nt=St("animationend"),Ct=St("animationiteration"),At=St("animationstart"),Rt=St("transitionend"),Pt=new Map,Ot=new Map,Dt=["abort","abort",Nt,"animationEnd",Ct,"animationIteration",At,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Rt,"transitionEnd","waiting","waiting"];function Lt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Ot.set(r,t),Pt.set(r,i),c(i,[r])}}(0,a.unstable_now)();var jt=8;function Mt(e){if(0!==(1&e))return jt=15,1;if(0!==(2&e))return jt=14,2;if(0!==(4&e))return jt=13,4;var t=24&e;return 0!==t?(jt=12,t):0!==(32&e)?(jt=11,32):0!==(t=192&e)?(jt=10,t):0!==(256&e)?(jt=9,256):0!==(t=3584&e)?(jt=8,t):0!==(4096&e)?(jt=7,4096):0!==(t=4186112&e)?(jt=6,t):0!==(t=62914560&e)?(jt=5,t):67108864&e?(jt=4,67108864):0!==(134217728&e)?(jt=3,134217728):0!==(t=805306368&e)?(jt=2,t):0!==(1073741824&e)?(jt=1,1073741824):(jt=8,e)}function Ft(e,t){var n=e.pendingLanes;if(0===n)return jt=0;var r=0,i=0,a=e.expiredLanes,o=e.suspendedLanes,s=e.pingedLanes;if(0!==a)r=a,i=jt=15;else if(0!==(a=134217727&n)){var u=a&~o;0!==u?(r=Mt(u),i=jt):0!==(s&=a)&&(r=Mt(s),i=jt)}else 0!==(a=n&~o)?(r=Mt(a),i=jt):0!==s&&(r=Mt(s),i=jt);if(0===r)return 0;if(r=n&((0>(r=31-Kt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Mt(t),i<=jt)return t;jt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Kt(t)),r|=e[n],t&=~i;return r}function Ut(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Vt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=qt(24&~t))?Vt(10,t):e;case 10:return 0===(e=qt(192&~t))?Vt(8,t):e;case 8:return 0===(e=qt(3584&~t))&&(0===(e=qt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=qt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function qt(e){return e&-e}function zt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Bt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Kt(t)]=n}var Kt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Ht(e)/Wt|0)|0},Ht=Math.log,Wt=Math.LN2;var Gt=a.unstable_UserBlockingPriority,Qt=a.unstable_runWithPriority,$t=!0;function Yt(e,t,n,r){Me||Le();var i=Xt,a=Me;Me=!0;try{De(i,e,t,n,r)}finally{(Me=a)||Ue()}}function Jt(e,t,n,r){Qt(Gt,Xt.bind(null,e,t,n,r))}function Xt(e,t,n,r){var i;if($t)if((i=0===(4&t))&&0<ot.length&&-1<dt.indexOf(e))e=pt(null,e,t,n,r),ot.push(e);else{var a=Zt(e,t,n,r);if(null===a)i&&vt(e,r);else{if(i){if(-1<dt.indexOf(e))return e=pt(a,e,t,n,r),void ot.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return st=mt(st,e,t,n,r,i),!0;case"dragenter":return ut=mt(ut,e,t,n,r,i),!0;case"mouseover":return ct=mt(ct,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return lt.set(a,mt(lt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,ft.set(a,mt(ft.get(a)||null,e,t,n,r,i)),!0}return!1}(a,e,t,n,r))return;vt(e,r)}Lr(e,t,r,null,n)}}}function Zt(e,t,n,r){var i=Te(r);if(null!==(i=ni(i))){var a=Ye(i);if(null===a)i=null;else{var o=a.tag;if(13===o){if(null!==(i=Je(a)))return i;i=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Lr(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function sn(){return!1}function un(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?on:sn,this.isPropagationStopped=sn,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var cn,ln,fn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=un(hn),pn=i({},hn,{view:0,detail:0}),vn=un(pn),mn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fn&&(fn&&"mousemove"===e.type?(cn=e.screenX-fn.screenX,ln=e.screenY-fn.screenY):ln=cn=0,fn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),yn=un(mn),gn=un(i({},mn,{dataTransfer:0})),kn=un(i({},pn,{relatedTarget:0})),wn=un(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=i({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=un(bn),_n=un(i({},hn,{data:0})),In={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tn[e])&&!!t[e]}function Nn(){return Sn}var Cn=i({},pn,{key:function(e){if(e.key){var t=In[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nn,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=un(Cn),Rn=un(i({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=un(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nn})),On=un(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=i({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=un(Dn),jn=[9,13,27,32],Mn=f&&"CompositionEvent"in window,Fn=null;f&&"documentMode"in document&&(Fn=document.documentMode);var Un=f&&"TextEvent"in window&&!Fn,Vn=f&&(!Mn||Fn&&8<Fn&&11>=Fn),qn=String.fromCharCode(32),zn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==jn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Qn(e,t,n,r){Re(r),0<(t=Mr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var $n=null,Yn=null;function Jn(e){Cr(e,0)}function Xn(e){if(J(ii(e)))return e}function Zn(e,t){if("change"===e)return t}var er=!1;if(f){var tr;if(f){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ir(){$n&&($n.detachEvent("onpropertychange",ar),Yn=$n=null)}function ar(e){if("value"===e.propertyName&&Xn(Yn)){var t=[];if(Qn(t,Yn,e,Te(e)),e=Jn,Me)e(t);else{Me=!0;try{Oe(e,t)}finally{Me=!1,Ue()}}}}function or(e,t,n){"focusin"===e?(ir(),Yn=n,($n=t).attachEvent("onpropertychange",ar)):"focusout"===e&&ir()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Yn)}function ur(e,t){if("click"===e)return Xn(t)}function cr(e,t){if("input"===e||"change"===e)return Xn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},fr=Object.prototype.hasOwnProperty;function hr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!fr.call(t,n[r])||!lr(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function vr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?vr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function yr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var gr=f&&"documentMode"in document&&11>=document.documentMode,kr=null,wr=null,br=null,xr=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==kr||kr!==X(r)||("selectionStart"in(r=kr)&&yr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&hr(br,r)||(br=r,0<(r=Mr(wr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=kr)))}Lt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Lt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Lt(Dt,2);for(var Ir="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Er=0;Er<Ir.length;Er++)Ot.set(Ir[Er],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tr));function Nr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,u,c){if($e.apply(this,arguments),Ke){if(!Ke)throw Error(o(198));var l=He;Ke=!1,He=null,We||(We=!0,Ge=l)}}(r,t,void 0,e),e.currentTarget=null}function Cr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Nr(i,s,c),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Nr(i,s,c),a=u}}}if(We)throw e=Ge,We=!1,Ge=null,e}function Ar(e,t){var n=oi(t),r=e+"__bubble";n.has(r)||(Dr(t,e,2,!1),n.add(r))}var Rr="_reactListening"+Math.random().toString(36).slice(2);function Pr(e){e[Rr]||(e[Rr]=!0,s.forEach((function(t){Sr.has(t)||Or(t,!1,e,null),Or(t,!0,e,null)})))}function Or(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&Sr.has(e)){if("scroll"!==e)return;i|=2,a=r}var o=oi(a),s=e+"__"+(t?"capture":"bubble");o.has(s)||(t&&(i|=4),Dr(a,e,i,t),o.add(s))}function Dr(e,t,n,r){var i=Ot.get(t);switch(void 0===i?2:i){case 0:i=Yt;break;case 1:i=Jt;break;default:i=Xt}n=i.bind(null,t,n,e),i=void 0,!qe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Lr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=ni(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(Fe)return e(t,n);Fe=!0;try{je(e,t,n)}finally{Fe=!1,Ue()}}((function(){var r=a,i=Te(n),o=[];e:{var s=Pt.get(e);if(void 0!==s){var u=dn,c=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":u=An;break;case"focusin":c="focus",u=kn;break;case"focusout":c="blur",u=kn;break;case"beforeblur":case"afterblur":u=kn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=yn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Pn;break;case Nt:case Ct:case At:u=wn;break;case Rt:u=On;break;case"scroll":u=vn;break;case"wheel":u=Ln;break;case"copy":case"cut":case"paste":u=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Rn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Ve(p,h))&&l.push(jr(p,v,d)))),f)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,i),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!ni(c)&&!c[ei])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?ni(c):null)&&(c!==(f=Ye(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=yn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Rn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==u?s:ii(u),d=null==c?s:ii(c),(s=new l(v,p+"leave",u,n,i)).target=f,s.relatedTarget=d,v=null,ni(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,u&&c)e:{for(h=c,p=0,d=l=u;d;d=Fr(d))p++;for(d=0,v=h;v;v=Fr(v))d++;for(;0<p-d;)l=Fr(l),p--;for(;0<d-p;)h=Fr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Fr(l),h=Fr(h)}l=null}else l=null;null!==u&&Ur(o,s,u,l,!1),null!==c&&null!==f&&Ur(o,f,c,l,!0)}if("select"===(u=(s=r?ii(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=Zn;else if(Gn(s))if(er)m=cr;else{m=sr;var y=or}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ur);switch(m&&(m=m(e,r))?Qn(o,m,n,i):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ie(s,"number",s.value)),y=r?ii(r):window,e){case"focusin":(Gn(y)||"true"===y.contentEditable)&&(kr=y,wr=r,br=null);break;case"focusout":br=wr=kr=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,_r(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":_r(o,n,i)}var g;if(Mn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Hn?Bn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Vn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Hn&&(g=rn()):(tn="value"in(en=i)?en.value:en.textContent,Hn=!0)),0<(y=Mr(r,k)).length&&(k=new _n(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=Kn(n))&&(k.data=g))),(g=Un?function(e,t){switch(e){case"compositionend":return Kn(t);case"keypress":return 32!==t.which?null:(zn=!0,qn);case"textInput":return(e=t.data)===qn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!Mn&&Bn(e,t)?(e=rn(),nn=tn=en=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Vn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Mr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Cr(o,t)}))}function jr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Mr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Ve(e,n))&&r.unshift(jr(e,a,i)),null!=(a=Ve(e,t))&&r.push(jr(e,a,i))),e=e.return}return r}function Fr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ur(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=Ve(n,a))&&o.unshift(jr(n,u,s)):i||null!=(u=Ve(n,a))&&o.push(jr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Vr(){}var qr=null,zr=null;function Br(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Kr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Hr="function"===typeof setTimeout?setTimeout:void 0,Wr="function"===typeof clearTimeout?clearTimeout:void 0;function Gr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Qr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function $r(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Yr=0;var Jr=Math.random().toString(36).slice(2),Xr="__reactFiber$"+Jr,Zr="__reactProps$"+Jr,ei="__reactContainer$"+Jr,ti="__reactEvents$"+Jr;function ni(e){var t=e[Xr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ei]||n[Xr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=$r(e);null!==e;){if(n=e[Xr])return n;e=$r(e)}return t}n=(e=n).parentNode}return null}function ri(e){return!(e=e[Xr]||e[ei])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ii(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ai(e){return e[Zr]||null}function oi(e){var t=e[ti];return void 0===t&&(t=e[ti]=new Set),t}var si=[],ui=-1;function ci(e){return{current:e}}function li(e){0>ui||(e.current=si[ui],si[ui]=null,ui--)}function fi(e,t){ui++,si[ui]=e.current,e.current=t}var hi={},di=ci(hi),pi=ci(!1),vi=hi;function mi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function yi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function gi(){li(pi),li(di)}function ki(e,t,n){if(di.current!==hi)throw Error(o(168));fi(di,t),fi(pi,n)}function wi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,G(t)||"Unknown",a));return i({},n,r)}function bi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,vi=di.current,fi(di,e),fi(pi,pi.current),!0}function xi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=wi(e,t,vi),r.__reactInternalMemoizedMergedChildContext=e,li(pi),li(di),fi(di,e)):li(pi),fi(pi,n)}var _i=null,Ii=null,Ei=a.unstable_runWithPriority,Ti=a.unstable_scheduleCallback,Si=a.unstable_cancelCallback,Ni=a.unstable_shouldYield,Ci=a.unstable_requestPaint,Ai=a.unstable_now,Ri=a.unstable_getCurrentPriorityLevel,Pi=a.unstable_ImmediatePriority,Oi=a.unstable_UserBlockingPriority,Di=a.unstable_NormalPriority,Li=a.unstable_LowPriority,ji=a.unstable_IdlePriority,Mi={},Fi=void 0!==Ci?Ci:function(){},Ui=null,Vi=null,qi=!1,zi=Ai(),Bi=1e4>zi?Ai:function(){return Ai()-zi};function Ki(){switch(Ri()){case Pi:return 99;case Oi:return 98;case Di:return 97;case Li:return 96;case ji:return 95;default:throw Error(o(332))}}function Hi(e){switch(e){case 99:return Pi;case 98:return Oi;case 97:return Di;case 96:return Li;case 95:return ji;default:throw Error(o(332))}}function Wi(e,t){return e=Hi(e),Ei(e,t)}function Gi(e,t,n){return e=Hi(e),Ti(e,t,n)}function Qi(){if(null!==Vi){var e=Vi;Vi=null,Si(e)}$i()}function $i(){if(!qi&&null!==Ui){qi=!0;var e=0;try{var t=Ui;Wi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Ui=null}catch(n){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ti(Pi,Qi),n}finally{qi=!1}}}var Yi=b.ReactCurrentBatchConfig;function Ji(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Xi=ci(null),Zi=null,ea=null,ta=null;function na(){ta=ea=Zi=null}function ra(e){var t=Xi.current;li(Xi),e.type._context._currentValue=t}function ia(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function aa(e,t){Zi=e,ta=ea=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Mo=!0),e.firstContext=null)}function oa(e,t){if(ta!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ta=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ea){if(null===Zi)throw Error(o(308));ea=t,Zi.dependencies={lanes:0,firstContext:t,responders:null}}else ea=ea.next=t;return e._currentValue}var sa=!1;function ua(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ca(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function la(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fa(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ha(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function da(e,t,n,r){var a=e.updateQueue;sa=!1;var o=a.firstBaseUpdate,s=a.lastBaseUpdate,u=a.shared.pending;if(null!==u){a.shared.pending=null;var c=u,l=c.next;c.next=null,null===s?o=l:s.next=l,s=c;var f=e.alternate;if(null!==f){var h=(f=f.updateQueue).lastBaseUpdate;h!==s&&(null===h?f.firstBaseUpdate=l:h.next=l,f.lastBaseUpdate=c)}}if(null!==o){for(h=a.baseState,s=0,f=l=c=null;;){u=o.lane;var d=o.eventTime;if((r&u)===u){null!==f&&(f=f.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,v=o;switch(u=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,u);break e}h=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(u="function"===typeof(p=v.payload)?p.call(d,h,u):p)||void 0===u)break e;h=i({},h,u);break e;case 2:sa=!0}}null!==o.callback&&(e.flags|=32,null===(u=a.effects)?a.effects=[o]:u.push(o))}else d={eventTime:d,lane:u,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===f?(l=f=d,c=h):f=f.next=d,s|=u;if(null===(o=o.next)){if(null===(u=a.shared.pending))break;o=u.next,u.next=null,a.lastBaseUpdate=u,a.shared.pending=null}}null===f&&(c=h),a.baseState=c,a.firstBaseUpdate=l,a.lastBaseUpdate=f,qs|=s,e.lanes=s,e.memoizedState=h}}function pa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var va=(new r.Component).refs;function ma(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ya={isMounted:function(e){return!!(e=e._reactInternals)&&Ye(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=hu(),i=du(e),a=la(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),pu(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=hu(),i=du(e),a=la(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),pu(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=hu(),r=du(e),i=la(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),fa(e,i),pu(e,r,n)}};function ga(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!hr(n,r)||!hr(i,a))}function ka(e,t,n){var r=!1,i=hi,a=t.contextType;return"object"===typeof a&&null!==a?a=oa(a):(i=yi(t)?vi:di.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?mi(e,i):hi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ya,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ya.enqueueReplaceState(t,t.state,null)}function ba(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=va,ua(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=oa(a):(a=yi(t)?vi:di.current,i.context=mi(e,a)),da(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ma(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ya.enqueueReplaceState(i,i.state,null),da(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var xa=Array.isArray;function _a(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===va&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Ia(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ea(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Wu(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Yu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=_a(e,t,n),r.return=e,r):((r=Gu(n.type,n.key,n.props,null,e.mode,r)).ref=_a(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ju(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Qu(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Yu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Gu(t.type,t.key,t.props,null,e.mode,n)).ref=_a(e,null,t),n.return=e,n;case _:return(t=Ju(t,e.mode,n)).return=e,t}if(xa(t)||z(t))return(t=Qu(t,e.mode,n,null)).return=e,t;Ia(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?n.type===I?f(e,t,n.props.children,r,i):c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null}if(xa(n)||z(n))return null!==i?null:f(e,t,n,r,null);Ia(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return e=e.get(null===r.key?n:r.key)||null,r.type===I?f(t,e,r.props.children,i,r.key):c(t,e,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(xa(r)||z(r))return f(t,e=e.get(n)||null,r,i,null);Ia(t,r)}return null}function v(i,o,s,u){for(var c=null,l=null,f=o,v=o=0,m=null;null!==f&&v<s.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,s[v],u);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),o=a(y,o,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===s.length)return n(i,f),c;if(null===f){for(;v<s.length;v++)null!==(f=h(i,s[v],u))&&(o=a(f,o,v),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);v<s.length;v++)null!==(m=p(f,i,v,s[v],u))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),c}function m(i,s,u,c){var l=z(u);if("function"!==typeof l)throw Error(o(150));if(null==(u=l.call(u)))throw Error(o(151));for(var f=l=null,v=s,m=s=0,y=null,g=u.next();null!==v&&!g.done;m++,g=u.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),s=a(k,s,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),l;if(null===v){for(;!g.done;m++,g=u.next())null!==(g=h(i,g.value,c))&&(s=a(g,s,m),null===f?l=g:f.sibling=g,f=g);return l}for(v=r(i,v);!g.done;m++,g=u.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),s=a(g,s,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,r,a,u){var c="object"===typeof a&&null!==a&&a.type===I&&null===a.key;c&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case x:e:{for(l=a.key,c=r;null!==c;){if(c.key===l){if(7===c.tag){if(a.type===I){n(e,c.sibling),(r=i(c,a.props.children)).return=e,e=r;break e}}else if(c.elementType===a.type){n(e,c.sibling),(r=i(c,a.props)).ref=_a(e,c,a),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===I?((r=Qu(a.props.children,e.mode,u,a.key)).return=e,e=r):((u=Gu(a.type,a.key,a.props,null,e.mode,u)).ref=_a(e,r,a),u.return=e,e=u)}return s(e);case _:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Ju(a,e.mode,u)).return=e,e=r}return s(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=Yu(a,e.mode,u)).return=e,e=r),s(e);if(xa(a))return v(e,r,a,u);if(z(a))return m(e,r,a,u);if(l&&Ia(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,G(e.type)||"Component"))}return n(e,r)}}var Ta=Ea(!0),Sa=Ea(!1),Na={},Ca=ci(Na),Aa=ci(Na),Ra=ci(Na);function Pa(e){if(e===Na)throw Error(o(174));return e}function Oa(e,t){switch(fi(Ra,t),fi(Aa,e),fi(Ca,Na),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}li(Ca),fi(Ca,t)}function Da(){li(Ca),li(Aa),li(Ra)}function La(e){Pa(Ra.current);var t=Pa(Ca.current),n=pe(t,e.type);t!==n&&(fi(Aa,e),fi(Ca,n))}function ja(e){Aa.current===e&&(li(Ca),li(Aa))}var Ma=ci(0);function Fa(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ua=null,Va=null,qa=!1;function za(e,t){var n=Ku(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Ba(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Ka(e){if(qa){var t=Va;if(t){var n=t;if(!Ba(e,t)){if(!(t=Qr(n.nextSibling))||!Ba(e,t))return e.flags=-1025&e.flags|2,qa=!1,void(Ua=e);za(Ua,n)}Ua=e,Va=Qr(t.firstChild)}else e.flags=-1025&e.flags|2,qa=!1,Ua=e}}function Ha(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ua=e}function Wa(e){if(e!==Ua)return!1;if(!qa)return Ha(e),qa=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Kr(t,e.memoizedProps))for(t=Va;t;)za(e,t),t=Qr(t.nextSibling);if(Ha(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Va=Qr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Va=null}}else Va=Ua?Qr(e.stateNode.nextSibling):null;return!0}function Ga(){Va=Ua=null,qa=!1}var Qa=[];function $a(){for(var e=0;e<Qa.length;e++)Qa[e]._workInProgressVersionPrimary=null;Qa.length=0}var Ya=b.ReactCurrentDispatcher,Ja=b.ReactCurrentBatchConfig,Xa=0,Za=null,eo=null,to=null,no=!1,ro=!1;function io(){throw Error(o(321))}function ao(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function oo(e,t,n,r,i,a){if(Xa=a,Za=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ya.current=null===e||null===e.memoizedState?Oo:Do,e=n(r,i),ro){a=0;do{if(ro=!1,!(25>a))throw Error(o(301));a+=1,to=eo=null,t.updateQueue=null,Ya.current=Lo,e=n(r,i)}while(ro)}if(Ya.current=Po,t=null!==eo&&null!==eo.next,Xa=0,to=eo=Za=null,no=!1,t)throw Error(o(300));return e}function so(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===to?Za.memoizedState=to=e:to=to.next=e,to}function uo(){if(null===eo){var e=Za.alternate;e=null!==e?e.memoizedState:null}else e=eo.next;var t=null===to?Za.memoizedState:to.next;if(null!==t)to=t,eo=e;else{if(null===e)throw Error(o(310));e={memoizedState:(eo=e).memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},null===to?Za.memoizedState=to=e:to=to.next=e}return to}function co(e,t){return"function"===typeof t?t(e):t}function lo(e){var t=uo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=eo,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=s=a=null,c=i;do{var l=c.lane;if((Xa&l)===l)null!==u&&(u=u.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var f={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(s=u=f,a=r):u=u.next=f,Za.lanes|=l,qs|=l}c=c.next}while(null!==c&&c!==i);null===u?a=r:u.next=s,lr(r,t.memoizedState)||(Mo=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function fo(e){var t=uo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);lr(a,t.memoizedState)||(Mo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ho(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Xa&e)===e)&&(t._workInProgressVersionPrimary=r,Qa.push(t))),e)return n(t._source);throw Qa.push(t),Error(o(350))}function po(e,t,n,r){var i=Os;if(null===i)throw Error(o(349));var a=t._getVersion,s=a(t._source),u=Ya.current,c=u.useState((function(){return ho(i,t,n)})),l=c[1],f=c[0];c=to;var h=e.memoizedState,d=h.refs,p=d.getSnapshot,v=h.source;h=h.subscribe;var m=Za;return e.memoizedState={refs:d,source:t,subscribe:r},u.useEffect((function(){d.getSnapshot=n,d.setSnapshot=l;var e=a(t._source);if(!lr(s,e)){e=n(t._source),lr(f,e)||(l(e),e=du(m),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var u=31-Kt(o),c=1<<u;r[u]|=e,o&=~c}}}),[n,t,r]),u.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=du(m);i.mutableReadLanes|=r&i.pendingLanes}catch(a){n((function(){throw a}))}}))}),[t,r]),lr(p,n)&&lr(v,t)&&lr(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:f}).dispatch=l=Ro.bind(null,Za,e),c.queue=e,c.baseQueue=null,f=ho(i,t,n),c.memoizedState=c.baseState=f),f}function vo(e,t,n){return po(uo(),e,t,n)}function mo(e){var t=so();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:e}).dispatch=Ro.bind(null,Za,e),[t.memoizedState,e]}function yo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Za.updateQueue)?(t={lastEffect:null},Za.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function go(e){return e={current:e},so().memoizedState=e}function ko(){return uo().memoizedState}function wo(e,t,n,r){var i=so();Za.flags|=e,i.memoizedState=yo(1|t,n,void 0,void 0===r?null:r)}function bo(e,t,n,r){var i=uo();r=void 0===r?null:r;var a=void 0;if(null!==eo){var o=eo.memoizedState;if(a=o.destroy,null!==r&&ao(r,o.deps))return void yo(t,n,a,r)}Za.flags|=e,i.memoizedState=yo(1|t,n,a,r)}function xo(e,t){return wo(516,4,e,t)}function _o(e,t){return bo(516,4,e,t)}function Io(e,t){return bo(4,2,e,t)}function Eo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function To(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,bo(4,2,Eo.bind(null,t,e),n)}function So(){}function No(e,t){var n=uo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Co(e,t){var n=uo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ao(e,t){var n=Ki();Wi(98>n?98:n,(function(){e(!0)})),Wi(97<n?97:n,(function(){var n=Ja.transition;Ja.transition=1;try{e(!1),t()}finally{Ja.transition=n}}))}function Ro(e,t,n){var r=hu(),i=du(e),a={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===Za||null!==o&&o===Za)ro=no=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=o(s,n);if(a.eagerReducer=o,a.eagerState=u,lr(u,s))return}catch(c){}pu(e,i,r)}}var Po={readContext:oa,useCallback:io,useContext:io,useEffect:io,useImperativeHandle:io,useLayoutEffect:io,useMemo:io,useReducer:io,useRef:io,useState:io,useDebugValue:io,useDeferredValue:io,useTransition:io,useMutableSource:io,useOpaqueIdentifier:io,unstable_isNewReconciler:!1},Oo={readContext:oa,useCallback:function(e,t){return so().memoizedState=[e,void 0===t?null:t],e},useContext:oa,useEffect:xo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,wo(4,2,Eo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return wo(4,2,e,t)},useMemo:function(e,t){var n=so();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=so();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ro.bind(null,Za,e),[r.memoizedState,e]},useRef:go,useState:mo,useDebugValue:So,useDeferredValue:function(e){var t=mo(e),n=t[0],r=t[1];return xo((function(){var t=Ja.transition;Ja.transition=1;try{r(e)}finally{Ja.transition=t}}),[e]),n},useTransition:function(){var e=mo(!1),t=e[0];return go(e=Ao.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=so();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},po(r,e,t,n)},useOpaqueIdentifier:function(){if(qa){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Yr++).toString(36))),Error(o(355))})),n=mo(t)[1];return 0===(2&Za.mode)&&(Za.flags|=516,yo(5,(function(){n("r:"+(Yr++).toString(36))}),void 0,null)),t}return mo(t="r:"+(Yr++).toString(36)),t},unstable_isNewReconciler:!1},Do={readContext:oa,useCallback:No,useContext:oa,useEffect:_o,useImperativeHandle:To,useLayoutEffect:Io,useMemo:Co,useReducer:lo,useRef:ko,useState:function(){return lo(co)},useDebugValue:So,useDeferredValue:function(e){var t=lo(co),n=t[0],r=t[1];return _o((function(){var t=Ja.transition;Ja.transition=1;try{r(e)}finally{Ja.transition=t}}),[e]),n},useTransition:function(){var e=lo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return lo(co)[0]},unstable_isNewReconciler:!1},Lo={readContext:oa,useCallback:No,useContext:oa,useEffect:_o,useImperativeHandle:To,useLayoutEffect:Io,useMemo:Co,useReducer:fo,useRef:ko,useState:function(){return fo(co)},useDebugValue:So,useDeferredValue:function(e){var t=fo(co),n=t[0],r=t[1];return _o((function(){var t=Ja.transition;Ja.transition=1;try{r(e)}finally{Ja.transition=t}}),[e]),n},useTransition:function(){var e=fo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return fo(co)[0]},unstable_isNewReconciler:!1},jo=b.ReactCurrentOwner,Mo=!1;function Fo(e,t,n,r){t.child=null===e?Sa(t,null,n,r):Ta(t,e.child,n,r)}function Uo(e,t,n,r,i){n=n.render;var a=t.ref;return aa(t,i),r=oo(e,t,n,r,a,i),null===e||Mo?(t.flags|=1,Fo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,as(e,t,i))}function Vo(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Hu(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Gu(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,qo(e,t,o,r,i,a))}return o=e.child,0===(i&a)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:hr)(i,r)&&e.ref===t.ref)?as(e,t,a):(t.flags|=1,(e=Wu(o,r)).ref=t.ref,e.return=t,t.child=e)}function qo(e,t,n,r,i,a){if(null!==e&&hr(e.memoizedProps,r)&&e.ref===t.ref){if(Mo=!1,0===(a&i))return t.lanes=e.lanes,as(e,t,a);0!==(16384&e.flags)&&(Mo=!0)}return Ko(e,t,n,r,a)}function zo(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},xu(t,n);else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},xu(t,e),null;t.memoizedState={baseLanes:0},xu(t,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,xu(t,r);return Fo(e,t,i,n),t.child}function Bo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Ko(e,t,n,r,i){var a=yi(n)?vi:di.current;return a=mi(t,a),aa(t,i),n=oo(e,t,n,r,a,i),null===e||Mo?(t.flags|=1,Fo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,as(e,t,i))}function Ho(e,t,n,r,i){if(yi(n)){var a=!0;bi(t)}else a=!1;if(aa(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ka(t,n,r),ba(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=oa(c):c=mi(t,c=yi(n)?vi:di.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&wa(t,o,r,c),sa=!1;var h=t.memoizedState;o.state=h,da(t,r,o,i),u=t.memoizedState,s!==r||h!==u||pi.current||sa?("function"===typeof l&&(ma(t,n,l,r),u=t.memoizedState),(s=sa||ga(t,n,s,r,h,u,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,ca(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:Ji(t.type,s),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=oa(u):u=mi(t,u=yi(n)?vi:di.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==f||h!==u)&&wa(t,o,r,u),sa=!1,h=t.memoizedState,o.state=h,da(t,r,o,i);var p=t.memoizedState;s!==f||h!==p||pi.current||sa?("function"===typeof d&&(ma(t,n,d,r),p=t.memoizedState),(c=sa||ga(t,n,c,r,h,p,u))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return Wo(e,t,n,r,a,i)}function Wo(e,t,n,r,i,a){Bo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return i&&xi(t,n,!1),as(e,t,a);r=t.stateNode,jo.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ta(t,e.child,null,a),t.child=Ta(t,null,s,a)):Fo(e,t,s,a),t.memoizedState=r.state,i&&xi(t,n,!0),t.child}function Go(e){var t=e.stateNode;t.pendingContext?ki(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ki(0,t.context,!1),Oa(e,t.containerInfo)}var Qo,$o,Yo,Jo={dehydrated:null,retryLane:0};function Xo(e,t,n){var r,i=t.pendingProps,a=Ma.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),fi(Ma,1&a),null===e?(void 0!==i.fallback&&Ka(t),e=i.children,a=i.fallback,o?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Jo,e):"number"===typeof i.unstable_expectedLoadTime?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Jo,t.lanes=33554432,e):((n=$u({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=ts(e,t,i.children,i.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Jo,i):(n=es(e,t,i.children,n),t.memoizedState=null,n))}function Zo(e,t,n,r){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=$u(t,i,0,null),n=Qu(n,i,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function es(e,t,n,r){var i=e.child;return e=i.sibling,n=Wu(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function ts(e,t,n,r,i){var a=t.mode,o=e.child;e=o.sibling;var s={mode:"hidden",children:n};return 0===(2&a)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=s,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Wu(o,s),null!==e?r=Wu(e,r):(r=Qu(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ns(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ia(e.return,t)}function rs(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=a)}function is(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Fo(e,t,r.children,n),0!==(2&(r=Ma.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ns(e,n);else if(19===e.tag)ns(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(fi(Ma,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Fa(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),rs(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Fa(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}rs(t,!0,n,null,a,t.lastEffect);break;case"together":rs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function as(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),qs|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Wu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Wu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function os(e,t){if(!qa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ss(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return yi(t.type)&&gi(),null;case 3:return Da(),li(pi),li(di),$a(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Wa(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:ja(t);var a=Pa(Ra.current);if(n=t.type,null!==e&&null!=t.stateNode)$o(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Pa(Ca.current),Wa(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Xr]=t,r[Zr]=s,n){case"dialog":Ar("cancel",r),Ar("close",r);break;case"iframe":case"object":case"embed":Ar("load",r);break;case"video":case"audio":for(e=0;e<Tr.length;e++)Ar(Tr[e],r);break;case"source":Ar("error",r);break;case"img":case"image":case"link":Ar("error",r),Ar("load",r);break;case"details":Ar("toggle",r);break;case"input":ee(r,s),Ar("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ar("invalid",r);break;case"textarea":ue(r,s),Ar("invalid",r)}for(var c in Ie(n,s),e=null,s)s.hasOwnProperty(c)&&(a=s[c],"children"===c?"string"===typeof a?r.textContent!==a&&(e=["children",a]):"number"===typeof a&&r.textContent!==""+a&&(e=["children",""+a]):u.hasOwnProperty(c)&&null!=a&&"onScroll"===c&&Ar("scroll",r));switch(n){case"input":Y(r),re(r,s,!0);break;case"textarea":Y(r),le(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Vr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===a.nodeType?a:a.ownerDocument,e===fe&&(e=de(n)),e===fe?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Xr]=t,e[Zr]=r,Qo(e,t),t.stateNode=e,c=Ee(n,r),n){case"dialog":Ar("cancel",e),Ar("close",e),a=r;break;case"iframe":case"object":case"embed":Ar("load",e),a=r;break;case"video":case"audio":for(a=0;a<Tr.length;a++)Ar(Tr[a],e);a=r;break;case"source":Ar("error",e),a=r;break;case"img":case"image":case"link":Ar("error",e),Ar("load",e),a=r;break;case"details":Ar("toggle",e),a=r;break;case"input":ee(e,r),a=Z(e,r),Ar("invalid",e);break;case"option":a=ae(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=i({},r,{value:void 0}),Ar("invalid",e);break;case"textarea":ue(e,r),a=se(e,r),Ar("invalid",e);break;default:a=r}Ie(n,a);var l=a;for(s in l)if(l.hasOwnProperty(s)){var f=l[s];"style"===s?xe(e,f):"dangerouslySetInnerHTML"===s?null!=(f=f?f.__html:void 0)&&ye(e,f):"children"===s?"string"===typeof f?("textarea"!==n||""!==f)&&ge(e,f):"number"===typeof f&&ge(e,""+f):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(u.hasOwnProperty(s)?null!=f&&"onScroll"===s&&Ar("scroll",e):null!=f&&w(e,s,f,c))}switch(n){case"input":Y(e),re(e,r,!1);break;case"textarea":Y(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?oe(e,!!r.multiple,s,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Vr)}Br(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Yo(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Pa(Ra.current),Pa(Ca.current),Wa(t)?(r=t.stateNode,n=t.memoizedProps,r[Xr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Xr]=t,t.stateNode=r)}return null;case 13:return li(Ma),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Wa(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Ma.current)?0===Fs&&(Fs=3):(0!==Fs&&3!==Fs||(Fs=4),null===Os||0===(134217727&qs)&&0===(134217727&zs)||gu(Os,Ls))),(r||n)&&(t.flags|=4),null);case 4:return Da(),null===e&&Pr(t.stateNode.containerInfo),null;case 10:return ra(t),null;case 19:if(li(Ma),null===(r=t.memoizedState))return null;if(s=0!==(64&t.flags),null===(c=r.rendering))if(s)os(r,!1);else{if(0!==Fs||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Fa(e))){for(t.flags|=64,os(r,!1),null!==(s=c.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(c=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,e=c.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return fi(Ma,1&Ma.current|2),t.child}e=e.sibling}null!==r.tail&&Bi()>Ws&&(t.flags|=64,s=!0,os(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=Fa(c))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),os(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!qa)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Bi()-r.renderingStartTime>Ws&&1073741824!==n&&(t.flags|=64,s=!0,os(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Bi(),n.sibling=null,t=Ma.current,fi(Ma,s?1&t|2:1&t),n):null;case 23:case 24:return _u(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function us(e){switch(e.tag){case 1:yi(e.type)&&gi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Da(),li(pi),li(di),$a(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return ja(e),null;case 13:return li(Ma),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return li(Ma),null;case 4:return Da(),null;case 10:return ra(e),null;case 23:case 24:return _u(),null;default:return null}}function cs(e,t){try{var n="",r=t;do{n+=W(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function ls(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Qo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},$o=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Pa(Ca.current);var o,s=null;switch(n){case"input":a=Z(e,a),r=Z(e,r),s=[];break;case"option":a=ae(e,a),r=ae(e,r),s=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),s=[];break;case"textarea":a=se(e,a),r=se(e,r),s=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Vr)}for(f in Ie(n,r),n=null,a)if(!r.hasOwnProperty(f)&&a.hasOwnProperty(f)&&null!=a[f])if("style"===f){var c=a[f];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(u.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in r){var l=r[f];if(c=null!=a?a[f]:void 0,r.hasOwnProperty(f)&&l!==c&&(null!=l||null!=c))if("style"===f)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(f,n)),n=l;else"dangerouslySetInnerHTML"===f?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(s=s||[]).push(f,l)):"children"===f?"string"!==typeof l&&"number"!==typeof l||(s=s||[]).push(f,""+l):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(u.hasOwnProperty(f)?(null!=l&&"onScroll"===f&&Ar("scroll",e),s||c===l||(s=[])):"object"===typeof l&&null!==l&&l.$$typeof===L?l.toString():(s=s||[]).push(f,l))}n&&(s=s||[]).push("style",n);var f=s;(t.updateQueue=f)&&(t.flags|=4)}},Yo=function(e,t,n,r){n!==r&&(t.flags|=4)};var fs="function"===typeof WeakMap?WeakMap:Map;function hs(e,t,n){(n=la(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ys||(Ys=!0,Js=r),ls(0,t)},n}function ds(e,t,n){(n=la(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return ls(0,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Xs?Xs=new Set([this]):Xs.add(this),ls(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var ps="function"===typeof WeakSet?WeakSet:Set;function vs(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Vu(e,n)}else t.current=null}function ms(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Ji(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Gr(t.stateNode.containerInfo))}throw Error(o(163))}function ys(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Mu(n,e),ju(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Ji(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&pa(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}pa(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Br(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&xt(n)))))}throw Error(o(163))}function gs(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=be("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ks(e,t){if(Ii&&"function"===typeof Ii.onCommitFiberUnmount)try{Ii.onCommitFiberUnmount(_i,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Mu(t,n);else{r=t;try{i()}catch(a){Vu(r,a)}}n=n.next}while(n!==e)}break;case 1:if(vs(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){Vu(t,a)}break;case 5:vs(t);break;case 4:Es(e,t)}}function ws(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function bs(e){return 5===e.tag||3===e.tag||4===e.tag}function xs(e){e:{for(var t=e.return;null!==t;){if(bs(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ge(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||bs(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?_s(e,n,t):Is(e,n,t)}function _s(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Vr));else if(4!==r&&null!==(e=e.child))for(_s(e,t,n),e=e.sibling;null!==e;)_s(e,t,n),e=e.sibling}function Is(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Is(e,t,n),e=e.sibling;null!==e;)Is(e,t,n),e=e.sibling}function Es(e,t){for(var n,r,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(o(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var s=e,u=i,c=u;;)if(ks(s,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===u)break e;for(;null===c.sibling;){if(null===c.return||c.return===u)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(s=n,u=i.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ks(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function Ts(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Zr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Ee(e,i),t=Ee(e,r),i=0;i<a.length;i+=2){var s=a[i],u=a[i+1];"style"===s?xe(n,u):"dangerouslySetInnerHTML"===s?ye(n,u):"children"===s?ge(n,u):w(n,s,u,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?oe(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,xt(n.containerInfo)));case 13:return null!==t.memoizedState&&(Hs=Bi(),gs(t.child,!0)),void Ss(t);case 19:return void Ss(t);case 23:case 24:return void gs(t,null!==t.memoizedState)}throw Error(o(163))}function Ss(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ps),t.forEach((function(t){var r=zu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Ns(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Cs=Math.ceil,As=b.ReactCurrentDispatcher,Rs=b.ReactCurrentOwner,Ps=0,Os=null,Ds=null,Ls=0,js=0,Ms=ci(0),Fs=0,Us=null,Vs=0,qs=0,zs=0,Bs=0,Ks=null,Hs=0,Ws=1/0;function Gs(){Ws=Bi()+500}var Qs,$s=null,Ys=!1,Js=null,Xs=null,Zs=!1,eu=null,tu=90,nu=[],ru=[],iu=null,au=0,ou=null,su=-1,uu=0,cu=0,lu=null,fu=!1;function hu(){return 0!==(48&Ps)?Bi():-1!==su?su:su=Bi()}function du(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Ki()?1:2;if(0===uu&&(uu=Vs),0!==Yi.transition){0!==cu&&(cu=null!==Ks?Ks.pendingLanes:0),e=uu;var t=4186112&~cu;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Ki(),0!==(4&Ps)&&98===e?e=Vt(12,uu):e=Vt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),uu),e}function pu(e,t,n){if(50<au)throw au=0,ou=null,Error(o(185));if(null===(e=vu(e,t)))return null;Bt(e,t,n),e===Os&&(zs|=t,4===Fs&&gu(e,Ls));var r=Ki();1===t?0!==(8&Ps)&&0===(48&Ps)?ku(e):(mu(e,n),0===Ps&&(Gs(),Qi())):(0===(4&Ps)||98!==r&&99!==r||(null===iu?iu=new Set([e]):iu.add(e)),mu(e,n)),Ks=e}function vu(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function mu(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var u=31-Kt(s),c=1<<u,l=a[u];if(-1===l){if(0===(c&r)||0!==(c&i)){l=t,Mt(c);var f=jt;a[u]=10<=f?l+250:6<=f?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);s&=~c}if(r=Ft(e,e===Os?Ls:0),t=jt,0===r)null!==n&&(n!==Mi&&Si(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Mi&&Si(n)}15===t?(n=ku.bind(null,e),null===Ui?(Ui=[n],Vi=Ti(Pi,$i)):Ui.push(n),n=Mi):14===t?n=Gi(99,ku.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Gi(n,yu.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function yu(e){if(su=-1,cu=uu=0,0!==(48&Ps))throw Error(o(327));var t=e.callbackNode;if(Lu()&&e.callbackNode!==t)return null;var n=Ft(e,e===Os?Ls:0);if(0===n)return null;var r=n,i=Ps;Ps|=16;var a=Tu();for(Os===e&&Ls===r||(Gs(),Iu(e,r));;)try{Cu();break}catch(u){Eu(e,u)}if(na(),As.current=a,Ps=i,null!==Ds?r=0:(Os=null,Ls=0,r=Fs),0!==(Vs&zs))Iu(e,0);else if(0!==r){if(2===r&&(Ps|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(n=Ut(e))&&(r=Su(e,n))),1===r)throw t=Us,Iu(e,0),gu(e,n),mu(e,Bi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Pu(e);break;case 3:if(gu(e,n),(62914560&n)===n&&10<(r=Hs+500-Bi())){if(0!==Ft(e,0))break;if(((i=e.suspendedLanes)&n)!==n){hu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Hr(Pu.bind(null,e),r);break}Pu(e);break;case 4:if(gu(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var s=31-Kt(n);a=1<<s,(s=r[s])>i&&(i=s),n&=~a}if(n=i,10<(n=(120>(n=Bi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Cs(n/1960))-n)){e.timeoutHandle=Hr(Pu.bind(null,e),n);break}Pu(e);break;default:throw Error(o(329))}}return mu(e,Bi()),e.callbackNode===t?yu.bind(null,e):null}function gu(e,t){for(t&=~Bs,t&=~zs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Kt(t),r=1<<n;e[n]=-1,t&=~r}}function ku(e){if(0!==(48&Ps))throw Error(o(327));if(Lu(),e===Os&&0!==(e.expiredLanes&Ls)){var t=Ls,n=Su(e,t);0!==(Vs&zs)&&(n=Su(e,t=Ft(e,t)))}else n=Su(e,t=Ft(e,0));if(0!==e.tag&&2===n&&(Ps|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(t=Ut(e))&&(n=Su(e,t))),1===n)throw n=Us,Iu(e,0),gu(e,t),mu(e,Bi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Pu(e),mu(e,Bi()),null}function wu(e,t){var n=Ps;Ps|=1;try{return e(t)}finally{0===(Ps=n)&&(Gs(),Qi())}}function bu(e,t){var n=Ps;Ps&=-2,Ps|=8;try{return e(t)}finally{0===(Ps=n)&&(Gs(),Qi())}}function xu(e,t){fi(Ms,js),js|=t,Vs|=t}function _u(){js=Ms.current,li(Ms)}function Iu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Wr(n)),null!==Ds)for(n=Ds.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&gi();break;case 3:Da(),li(pi),li(di),$a();break;case 5:ja(r);break;case 4:Da();break;case 13:case 19:li(Ma);break;case 10:ra(r);break;case 23:case 24:_u()}n=n.return}Os=e,Ds=Wu(e.current,null),Ls=js=Vs=t,Fs=0,Us=null,Bs=zs=qs=0}function Eu(e,t){for(;;){var n=Ds;try{if(na(),Ya.current=Po,no){for(var r=Za.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}no=!1}if(Xa=0,to=eo=Za=null,ro=!1,Rs.current=null,null===n||null===n.return){Fs=1,Us=t,Ds=null;break}e:{var a=e,o=n.return,s=n,u=t;if(t=Ls,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u;if(0===(2&s.mode)){var l=s.alternate;l?(s.updateQueue=l.updateQueue,s.memoizedState=l.memoizedState,s.lanes=l.lanes):(s.updateQueue=null,s.memoizedState=null)}var f=0!==(1&Ma.current),h=o;do{var d;if(d=13===h.tag){var p=h.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var v=h.memoizedProps;d=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!f)}}if(d){var m=h.updateQueue;if(null===m){var y=new Set;y.add(c),h.updateQueue=y}else m.add(c);if(0===(2&h.mode)){if(h.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var g=la(-1,1);g.tag=2,fa(s,g)}s.lanes|=1;break e}u=void 0,s=t;var k=a.pingCache;if(null===k?(k=a.pingCache=new fs,u=new Set,k.set(c,u)):void 0===(u=k.get(c))&&(u=new Set,k.set(c,u)),!u.has(s)){u.add(s);var w=qu.bind(null,a,c,s);c.then(w,w)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);u=Error((G(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Fs&&(Fs=2),u=cs(u,s),h=o;do{switch(h.tag){case 3:a=u,h.flags|=4096,t&=-t,h.lanes|=t,ha(h,hs(0,a,t));break e;case 1:a=u;var b=h.type,x=h.stateNode;if(0===(64&h.flags)&&("function"===typeof b.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Xs||!Xs.has(x)))){h.flags|=4096,t&=-t,h.lanes|=t,ha(h,ds(h,a,t));break e}}h=h.return}while(null!==h)}Ru(n)}catch(_){t=_,Ds===n&&null!==n&&(Ds=n=n.return);continue}break}}function Tu(){var e=As.current;return As.current=Po,null===e?Po:e}function Su(e,t){var n=Ps;Ps|=16;var r=Tu();for(Os===e&&Ls===t||Iu(e,t);;)try{Nu();break}catch(i){Eu(e,i)}if(na(),Ps=n,As.current=r,null!==Ds)throw Error(o(261));return Os=null,Ls=0,Fs}function Nu(){for(;null!==Ds;)Au(Ds)}function Cu(){for(;null!==Ds&&!Ni();)Au(Ds)}function Au(e){var t=Qs(e.alternate,e,js);e.memoizedProps=e.pendingProps,null===t?Ru(e):Ds=t,Rs.current=null}function Ru(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=ss(n,t,js)))return void(Ds=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&js)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=us(t)))return n.flags&=2047,void(Ds=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ds=t);Ds=t=e}while(null!==t);0===Fs&&(Fs=5)}function Pu(e){var t=Ki();return Wi(99,Ou.bind(null,e,t)),null}function Ou(e,t){do{Lu()}while(null!==eu);if(0!==(48&Ps))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var s=e.eventTimes,u=e.expirationTimes;0<a;){var c=31-Kt(a),l=1<<c;i[c]=0,s[c]=-1,u[c]=-1,a&=~l}if(null!==iu&&0===(24&r)&&iu.has(e)&&iu.delete(e),e===Os&&(Ds=Os=null,Ls=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Ps,Ps|=32,Rs.current=null,qr=$t,yr(s=mr())){if("selectionStart"in s)u={start:s.selectionStart,end:s.selectionEnd};else e:if(u=(u=s.ownerDocument)&&u.defaultView||window,(l=u.getSelection&&u.getSelection())&&0!==l.rangeCount){u=l.anchorNode,a=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{u.nodeType,c.nodeType}catch(T){u=null;break e}var f=0,h=-1,d=-1,p=0,v=0,m=s,y=null;t:for(;;){for(var g;m!==u||0!==a&&3!==m.nodeType||(h=f+a),m!==c||0!==l&&3!==m.nodeType||(d=f+l),3===m.nodeType&&(f+=m.nodeValue.length),null!==(g=m.firstChild);)y=m,m=g;for(;;){if(m===s)break t;if(y===u&&++p===a&&(h=f),y===c&&++v===l&&(d=f),null!==(g=m.nextSibling))break;y=(m=y).parentNode}m=g}u=-1===h||-1===d?null:{start:h,end:d}}else u=null;u=u||{start:0,end:0}}else u=null;zr={focusedElem:s,selectionRange:u},$t=!1,lu=null,fu=!1,$s=r;do{try{Du()}catch(T){if(null===$s)throw Error(o(330));Vu($s,T),$s=$s.nextEffect}}while(null!==$s);lu=null,$s=r;do{try{for(s=e;null!==$s;){var k=$s.flags;if(16&k&&ge($s.stateNode,""),128&k){var w=$s.alternate;if(null!==w){var b=w.ref;null!==b&&("function"===typeof b?b(null):b.current=null)}}switch(1038&k){case 2:xs($s),$s.flags&=-3;break;case 6:xs($s),$s.flags&=-3,Ts($s.alternate,$s);break;case 1024:$s.flags&=-1025;break;case 1028:$s.flags&=-1025,Ts($s.alternate,$s);break;case 4:Ts($s.alternate,$s);break;case 8:Es(s,u=$s);var x=u.alternate;ws(u),null!==x&&ws(x)}$s=$s.nextEffect}}catch(T){if(null===$s)throw Error(o(330));Vu($s,T),$s=$s.nextEffect}}while(null!==$s);if(b=zr,w=mr(),k=b.focusedElem,s=b.selectionRange,w!==k&&k&&k.ownerDocument&&vr(k.ownerDocument.documentElement,k)){null!==s&&yr(k)&&(w=s.start,void 0===(b=s.end)&&(b=w),"selectionStart"in k?(k.selectionStart=w,k.selectionEnd=Math.min(b,k.value.length)):(b=(w=k.ownerDocument||document)&&w.defaultView||window).getSelection&&(b=b.getSelection(),u=k.textContent.length,x=Math.min(s.start,u),s=void 0===s.end?x:Math.min(s.end,u),!b.extend&&x>s&&(u=s,s=x,x=u),u=pr(k,x),a=pr(k,s),u&&a&&(1!==b.rangeCount||b.anchorNode!==u.node||b.anchorOffset!==u.offset||b.focusNode!==a.node||b.focusOffset!==a.offset)&&((w=w.createRange()).setStart(u.node,u.offset),b.removeAllRanges(),x>s?(b.addRange(w),b.extend(a.node,a.offset)):(w.setEnd(a.node,a.offset),b.addRange(w))))),w=[];for(b=k;b=b.parentNode;)1===b.nodeType&&w.push({element:b,left:b.scrollLeft,top:b.scrollTop});for("function"===typeof k.focus&&k.focus(),k=0;k<w.length;k++)(b=w[k]).element.scrollLeft=b.left,b.element.scrollTop=b.top}$t=!!qr,zr=qr=null,e.current=n,$s=r;do{try{for(k=e;null!==$s;){var _=$s.flags;if(36&_&&ys(k,$s.alternate,$s),128&_){w=void 0;var I=$s.ref;if(null!==I){var E=$s.stateNode;$s.tag,w=E,"function"===typeof I?I(w):I.current=w}}$s=$s.nextEffect}}catch(T){if(null===$s)throw Error(o(330));Vu($s,T),$s=$s.nextEffect}}while(null!==$s);$s=null,Fi(),Ps=i}else e.current=n;if(Zs)Zs=!1,eu=e,tu=t;else for($s=r;null!==$s;)t=$s.nextEffect,$s.nextEffect=null,8&$s.flags&&((_=$s).sibling=null,_.stateNode=null),$s=t;if(0===(r=e.pendingLanes)&&(Xs=null),1===r?e===ou?au++:(au=0,ou=e):au=0,n=n.stateNode,Ii&&"function"===typeof Ii.onCommitFiberRoot)try{Ii.onCommitFiberRoot(_i,n,void 0,64===(64&n.current.flags))}catch(T){}if(mu(e,Bi()),Ys)throw Ys=!1,e=Js,Js=null,e;return 0!==(8&Ps)||Qi(),null}function Du(){for(;null!==$s;){var e=$s.alternate;fu||null===lu||(0!==(8&$s.flags)?et($s,lu)&&(fu=!0):13===$s.tag&&Ns(e,$s)&&et($s,lu)&&(fu=!0));var t=$s.flags;0!==(256&t)&&ms(e,$s),0===(512&t)||Zs||(Zs=!0,Gi(97,(function(){return Lu(),null}))),$s=$s.nextEffect}}function Lu(){if(90!==tu){var e=97<tu?97:tu;return tu=90,Wi(e,Fu)}return!1}function ju(e,t){nu.push(t,e),Zs||(Zs=!0,Gi(97,(function(){return Lu(),null})))}function Mu(e,t){ru.push(t,e),Zs||(Zs=!0,Gi(97,(function(){return Lu(),null})))}function Fu(){if(null===eu)return!1;var e=eu;if(eu=null,0!==(48&Ps))throw Error(o(331));var t=Ps;Ps|=32;var n=ru;ru=[];for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1],s=i.destroy;if(i.destroy=void 0,"function"===typeof s)try{s()}catch(c){if(null===a)throw Error(o(330));Vu(a,c)}}for(n=nu,nu=[],r=0;r<n.length;r+=2){i=n[r],a=n[r+1];try{var u=i.create;i.destroy=u()}catch(c){if(null===a)throw Error(o(330));Vu(a,c)}}for(u=e.current.firstEffect;null!==u;)e=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=e;return Ps=t,Qi(),!0}function Uu(e,t,n){fa(e,t=hs(0,t=cs(n,t),1)),t=hu(),null!==(e=vu(e,1))&&(Bt(e,1,t),mu(e,t))}function Vu(e,t){if(3===e.tag)Uu(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Uu(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Xs||!Xs.has(r))){var i=ds(n,e=cs(t,e),1);if(fa(n,i),i=hu(),null!==(n=vu(n,1)))Bt(n,1,i),mu(n,i);else if("function"===typeof r.componentDidCatch&&(null===Xs||!Xs.has(r)))try{r.componentDidCatch(t,e)}catch(a){}break}}n=n.return}}function qu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=hu(),e.pingedLanes|=e.suspendedLanes&n,Os===e&&(Ls&n)===n&&(4===Fs||3===Fs&&(62914560&Ls)===Ls&&500>Bi()-Hs?Iu(e,0):Bs|=n),mu(e,t)}function zu(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Ki()?1:2:(0===uu&&(uu=Vs),0===(t=qt(62914560&~uu))&&(t=4194304))),n=hu(),null!==(e=vu(e,t))&&(Bt(e,t,n),mu(e,n))}function Bu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Ku(e,t,n,r){return new Bu(e,t,n,r)}function Hu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Wu(e,t){var n=e.alternate;return null===n?((n=Ku(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Gu(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)Hu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case I:return Qu(n.children,i,a,t);case j:s=8,i|=16;break;case E:s=8,i|=1;break;case T:return(e=Ku(12,n,t,8|i)).elementType=T,e.type=T,e.lanes=a,e;case A:return(e=Ku(13,n,t,i)).type=A,e.elementType=A,e.lanes=a,e;case R:return(e=Ku(19,n,t,i)).elementType=R,e.lanes=a,e;case M:return $u(n,i,a,t);case F:return(e=Ku(24,n,t,i)).elementType=F,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:s=10;break e;case N:s=9;break e;case C:s=11;break e;case P:s=14;break e;case O:s=16,r=null;break e;case D:s=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ku(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Qu(e,t,n,r){return(e=Ku(7,e,r,t)).lanes=n,e}function $u(e,t,n,r){return(e=Ku(23,e,r,t)).elementType=M,e.lanes=n,e}function Yu(e,t,n){return(e=Ku(6,e,null,t)).lanes=n,e}function Ju(e,t,n){return(t=Ku(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Xu(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=zt(0),this.expirationTimes=zt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zt(0),this.mutableSourceEagerHydrationData=null}function Zu(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function ec(e,t,n,r){var i=t.current,a=hu(),s=du(i);e:if(n){t:{if(Ye(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(yi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(o(171))}if(1===n.tag){var c=n.type;if(yi(c)){n=wi(n,c,u);break e}}n=u}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=la(a,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),fa(i,t),pu(i,s,a),s}function tc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rc(e,t){nc(e,t),(e=e.alternate)&&nc(e,t)}function ic(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Xu(e,t,null!=n&&!0===n.hydrate),t=Ku(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,ua(t),e[ei]=n.current,Pr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function ac(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function oc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var s=i;i=function(){var e=tc(o);s.call(e)}}ec(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ic(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var u=i;i=function(){var e=tc(o);u.call(e)}}bu((function(){ec(t,o,e,i)}))}return tc(o)}function sc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ac(t))throw Error(o(200));return Zu(e,t,null,n)}Qs=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||pi.current)Mo=!0;else{if(0===(n&r)){switch(Mo=!1,t.tag){case 3:Go(t),Ga();break;case 5:La(t);break;case 1:yi(t.type)&&bi(t);break;case 4:Oa(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;fi(Xi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Xo(e,t,n):(fi(Ma,1&Ma.current),null!==(t=as(e,t,n))?t.sibling:null);fi(Ma,1&Ma.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return is(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),fi(Ma,Ma.current),r)break;return null;case 23:case 24:return t.lanes=0,zo(e,t,n)}return as(e,t,n)}Mo=0!==(16384&e.flags)}else Mo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=mi(t,di.current),aa(t,n),i=oo(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,yi(r)){var a=!0;bi(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,ua(t);var s=r.getDerivedStateFromProps;"function"===typeof s&&ma(t,r,s,e),i.updater=ya,t.stateNode=i,i._reactInternals=t,ba(t,r,e,n),t=Wo(null,t,r,!0,a,n)}else t.tag=0,Fo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"===typeof e)return Hu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(i),e=Ji(i,e),a){case 0:t=Ko(null,t,i,e,n);break e;case 1:t=Ho(null,t,i,e,n);break e;case 11:t=Uo(null,t,i,e,n);break e;case 14:t=Vo(null,t,i,Ji(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ko(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ho(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 3:if(Go(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ca(e,t),da(t,r,null,n),(r=t.memoizedState.element)===i)Ga(),t=as(e,t,n);else{if((a=(i=t.stateNode).hydrate)&&(Va=Qr(t.stateNode.containerInfo.firstChild),Ua=t,a=qa=!0),a){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(a=e[i])._workInProgressVersionPrimary=e[i+1],Qa.push(a);for(n=Sa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Fo(e,t,r,n),Ga();t=t.child}return t;case 5:return La(t),null===e&&Ka(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,Kr(r,i)?s=null:null!==a&&Kr(r,a)&&(t.flags|=16),Bo(e,t),Fo(e,t,s,n),t.child;case 6:return null===e&&Ka(t),null;case 13:return Xo(e,t,n);case 4:return Oa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ta(t,null,r,n):Fo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Uo(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 7:return Fo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Fo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value;var u=t.type._context;if(fi(Xi,u._currentValue),u._currentValue=a,null!==s)if(u=s.value,0===(a=lr(u,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,a):1073741823))){if(s.children===i.children&&!pi.current){t=as(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&a)){1===u.tag&&((l=la(-1,n&-n)).tag=2,fa(u,l)),u.lanes|=n,null!==(l=u.alternate)&&(l.lanes|=n),ia(u.return,n),c.lanes|=n;break}l=l.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}Fo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,aa(t,n),r=r(i=oa(i,a.unstable_observedBits)),t.flags|=1,Fo(e,t,r,n),t.child;case 14:return a=Ji(i=t.type,t.pendingProps),Vo(e,t,i,a=Ji(i.type,a),r,n);case 15:return qo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ji(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,yi(r)?(e=!0,bi(t)):e=!1,aa(t,n),ka(t,r,i),ba(t,r,i,n),Wo(null,t,r,!0,e,n);case 19:return is(e,t,n);case 23:case 24:return zo(e,t,n)}throw Error(o(156,t.tag))},ic.prototype.render=function(e){ec(e,this._internalRoot,null,null)},ic.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;ec(null,e,null,(function(){t[ei]=null}))},tt=function(e){13===e.tag&&(pu(e,4,hu()),rc(e,4))},nt=function(e){13===e.tag&&(pu(e,67108864,hu()),rc(e,67108864))},rt=function(e){if(13===e.tag){var t=hu(),n=du(e);pu(e,n,t),rc(e,n)}},it=function(e,t){return t()},Se=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ai(r);if(!i)throw Error(o(90));J(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Oe=wu,De=function(e,t,n,r,i){var a=Ps;Ps|=4;try{return Wi(98,e.bind(null,t,n,r,i))}finally{0===(Ps=a)&&(Gs(),Qi())}},Le=function(){0===(49&Ps)&&(function(){if(null!==iu){var e=iu;iu=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,mu(e,Bi())}))}Qi()}(),Lu())},je=function(e,t){var n=Ps;Ps|=2;try{return e(t)}finally{0===(Ps=n)&&(Gs(),Qi())}};var uc={Events:[ri,ii,ai,Re,Pe,Lu,{current:!1}]},cc={findFiberByHostInstance:ni,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},lc={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fc.isDisabled&&fc.supportsFiber)try{_i=fc.inject(lc),Ii=fc}catch(me){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uc,t.createPortal=sc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Ze(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Ps;if(0!==(48&n))return e(t);Ps|=1;try{if(e)return Wi(99,e.bind(null,t))}finally{Ps=n,Qi()}},t.hydrate=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!0,n)},t.render=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ac(e))throw Error(o(40));return!!e._reactRootContainer&&(bu((function(){oc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ei]=null}))})),!0)},t.unstable_batchedUpdates=wu,t.unstable_createPortal=function(e,t){return sc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ac(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return oc(e,t,n,!1,r)},t.version="17.0.2"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},372:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case s:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case m:case v:case u:return e;default:return t}}case i:return t}}}function x(e){return b(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=u,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=m,t.Memo=v,t.Portal=i,t.Profiler=s,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return x(e)||b(e)===l},t.isConcurrentMode=x,t.isContextConsumer=function(e){return b(e)===c},t.isContextProvider=function(e){return b(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return b(e)===h},t.isFragment=function(e){return b(e)===a},t.isLazy=function(e){return b(e)===m},t.isMemo=function(e){return b(e)===v},t.isPortal=function(e){return b(e)===i},t.isProfiler=function(e){return b(e)===s},t.isStrictMode=function(e){return b(e)===o},t.isSuspense=function(e){return b(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===s||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===u||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===w||e.$$typeof===y)},t.typeOf=b},441:function(e,t,n){"use strict";e.exports=n(372)},381:function(e){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},239:function(e,t,n){var r=n(381);e.exports=d,e.exports.parse=a,e.exports.compile=function(e,t){return s(a(e,t),t)},e.exports.tokensToFunction=s,e.exports.tokensToRegExp=h;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function a(e,t){for(var n,r=[],a=0,o=0,s="",l=t&&t.delimiter||"/";null!=(n=i.exec(e));){var f=n[0],h=n[1],d=n.index;if(s+=e.slice(o,d),o=d+f.length,h)s+=h[1];else{var p=e[o],v=n[2],m=n[3],y=n[4],g=n[5],k=n[6],w=n[7];s&&(r.push(s),s="");var b=null!=v&&null!=p&&p!==v,x="+"===k||"*"===k,_="?"===k||"*"===k,I=n[2]||l,E=y||g;r.push({name:m||a++,prefix:v||"",delimiter:I,optional:_,repeat:x,partial:b,asterisk:!!w,pattern:E?c(E):w?".*":"[^"+u(I)+"]+?"})}}return o<e.length&&(s+=e.substr(o)),s&&r.push(s),r}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function s(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",f(t)));return function(t,i){for(var a="",s=t||{},u=(i||{}).pretty?o:encodeURIComponent,c=0;c<e.length;c++){var l=e[c];if("string"!==typeof l){var f,h=s[l.name];if(null==h){if(l.optional){l.partial&&(a+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(r(h)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<h.length;d++){if(f=u(h[d]),!n[c].test(f))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(f)+"`");a+=(0===d?l.prefix:l.delimiter)+f}}else{if(f=l.asterisk?encodeURI(h).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):u(h),!n[c].test(f))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+f+'"');a+=l.prefix+f}}else a+=l}return a}}function u(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function f(e){return e&&e.sensitive?"":"i"}function h(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,a=!1!==n.end,o="",s=0;s<e.length;s++){var c=e[s];if("string"===typeof c)o+=u(c);else{var h=u(c.prefix),d="(?:"+c.pattern+")";t.push(c),c.repeat&&(d+="(?:"+h+d+")*"),o+=d=c.optional?c.partial?h+"("+d+")?":"(?:"+h+"("+d+"))?":h+"("+d+")"}}var p=u(n.delimiter||"/"),v=o.slice(-p.length)===p;return i||(o=(v?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=a?"$":i&&v?"":"(?="+p+"|$)",l(new RegExp("^"+o,f(n)),t)}function d(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(d(e[i],t,n).source);return l(new RegExp("(?:"+r.join("|")+")",f(n)),t)}(e,t,n):function(e,t,n){return h(a(e,n),t,n)}(e,t,n)}},374:function(e,t,n){"use strict";n(725);var r=n(791),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),t.Fragment=a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)s.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:o.current}}t.jsx=c,t.jsxs=c},117:function(e,t,n){"use strict";var r=n(725),i=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,s=60110,u=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var f=Symbol.for;i=f("react.element"),a=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),o=f("react.provider"),s=f("react.context"),u=f("react.forward_ref"),t.Suspense=f("react.suspense"),c=f("react.memo"),l=f("react.lazy")}var h="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function m(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function y(){}function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=m.prototype;var k=g.prototype=new y;k.constructor=g,r(k,m.prototype),k.isPureReactComponent=!0;var w={current:null},b=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,n){var r,a={},o=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)b.call(t,r)&&!x.hasOwnProperty(r)&&(a[r]=t[r]);var u=arguments.length-2;if(1===u)a.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===a[r]&&(a[r]=u[r]);return{$$typeof:i,type:e,key:o,ref:s,props:a,_owner:w.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var E=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function S(e,t,n,r,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case i:case a:u=!0}}if(u)return o=o(u=e),e=""===r?"."+T(u,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(E,"$&/")+"/"),S(o,t,n,"",(function(e){return e}))):null!=o&&(I(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+e)),t.push(o)),1;if(u=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+T(s=e[c],c);u+=S(s,t,n,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=S(s=s.value,t,n,l=r+T(s,c++),o);else if("object"===s)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return u}function N(e,t,n){if(null==e)return e;var r=[],i=0;return S(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function C(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var A={current:null};function R(){var e=A.current;if(null===e)throw Error(d(321));return e}var P={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:w,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error(d(143));return e}},t.Component=m,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var a=r({},e.props),o=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=w.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)b.call(t,l)&&!x.hasOwnProperty(l)&&(a[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];a.children=c}return{$$typeof:i,type:e.type,key:o,ref:s,props:a,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:C}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return R().useCallback(e,t)},t.useContext=function(e,t){return R().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return R().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return R().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return R().useLayoutEffect(e,t)},t.useMemo=function(e,t){return R().useMemo(e,t)},t.useReducer=function(e,t,n){return R().useReducer(e,t,n)},t.useRef=function(e){return R().useRef(e)},t.useState=function(e){return R().useState(e)},t.version="17.0.2"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(R){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),o=new N(r||[]);return a._invoke=function(e,t,n){var r=f;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return A()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=E(o,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=l(e,t,n);if("normal"===u.type){if(r=n.done?p:h,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(R){return{type:"throw",arg:R}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function m(){}function y(){}function g(){}var k={};u(k,a,(function(){return this}));var w=Object.getPrototypeOf,b=w&&w(w(C([])));b&&b!==n&&r.call(b,a)&&(k=b);var x=g.prototype=m.prototype=Object.create(k);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(i,a,o,s){var u=l(e[i],e,a);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,s)}))}s(u.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function E(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function C(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:A}}function A(){return{value:t,done:!0}}return y.prototype=g,u(x,"constructor",g),u(g,"constructor",y),y.displayName=u(g,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,s,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},_(I.prototype),u(I.prototype,o,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new I(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},_(x),u(x,s,"Generator"),u(x,a,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=C,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:C(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},813:function(e,t){"use strict";var n,r,i,a;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,l=null,f=function e(){if(null!==c)try{var n=t.unstable_now();c(!0,n),c=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(f,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,d=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,m=null,y=-1,g=5,k=0;t.unstable_shouldYield=function(){return t.unstable_now()>=k},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<e?Math.floor(1e3/e):5};var w=new MessageChannel,b=w.port2;w.port1.onmessage=function(){if(null!==m){var e=t.unstable_now();k=e+g;try{m(!0,e)?b.postMessage(null):(v=!1,m=null)}catch(n){throw b.postMessage(null),n}}else v=!1},n=function(e){m=e,v||(v=!0,b.postMessage(null))},r=function(e,n){y=h((function(){e(t.unstable_now())}),n)},i=function(){d(y),y=-1}}function x(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<E(i,t)))break e;e[r]=t,e[n]=i,n=r}}function _(e){return void 0===(e=e[0])?null:e}function I(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],s=a+1,u=e[s];if(void 0!==o&&0>E(o,n))void 0!==u&&0>E(u,o)?(e[r]=u,e[s]=n,r=s):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==u&&0>E(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function E(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var T=[],S=[],N=1,C=null,A=3,R=!1,P=!1,O=!1;function D(e){for(var t=_(S);null!==t;){if(null===t.callback)I(S);else{if(!(t.startTime<=e))break;I(S),t.sortIndex=t.expirationTime,x(T,t)}t=_(S)}}function L(e){if(O=!1,D(e),!P)if(null!==_(T))P=!0,n(j);else{var t=_(S);null!==t&&r(L,t.startTime-e)}}function j(e,n){P=!1,O&&(O=!1,i()),R=!0;var a=A;try{for(D(n),C=_(T);null!==C&&(!(C.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=C.callback;if("function"===typeof o){C.callback=null,A=C.priorityLevel;var s=o(C.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?C.callback=s:C===_(T)&&I(T),D(n)}else I(T);C=_(T)}if(null!==C)var u=!0;else{var c=_(S);null!==c&&r(L,c.startTime-n),u=!1}return u}finally{C=null,A=a,R=!1}}var M=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){P||R||(P=!0,n(j))},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_getFirstCallbackNode=function(){return _(T)},t.unstable_next=function(e){switch(A){case 1:case 2:case 3:var t=3;break;default:t=A}var n=A;A=t;try{return e()}finally{A=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=M,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=A;A=e;try{return t()}finally{A=n}},t.unstable_scheduleCallback=function(e,a,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:N++,callback:a,priorityLevel:e,startTime:o,expirationTime:u=o+u,sortIndex:-1},o>s?(e.sortIndex=o,x(S,e),null===_(T)&&e===_(S)&&(O?i():O=!0,r(L,o-s))):(e.sortIndex=u,x(T,e),P||R||(P=!0,n(j))),e},t.unstable_wrapCallback=function(e){var t=A;return function(){var n=A;A=t;try{return e.apply(this,arguments)}finally{A=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return ut},SDK_VERSION:function(){return ln},_DEFAULT_ENTRY_NAME:function(){return Qt},_addComponent:function(){return Xt},_addOrOverwriteComponent:function(){return Zt},_apps:function(){return Yt},_clearComponents:function(){return rn},_components:function(){return Jt},_getProvider:function(){return tn},_registerComponent:function(){return en},_removeServiceInstance:function(){return nn},deleteApp:function(){return pn},getApp:function(){return hn},getApps:function(){return dn},initializeApp:function(){return fn},onLog:function(){return yn},registerVersion:function(){return mn},setLogLevel:function(){return gn}});var t=n(791),r=n(164);function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,i(e,t)}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}function s(e){return"/"===e.charAt(0)}function u(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var c=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],i=t&&t.split("/")||[],a=e&&s(e),o=t&&s(t),c=a||o;if(e&&s(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var l=i[i.length-1];n="."===l||".."===l||""===l}else n=!1;for(var f=0,h=i.length;h>=0;h--){var d=i[h];"."===d?u(i,h):".."===d?(u(i,h),f++):f&&(u(i,h),f--)}if(!c)for(;f--;f)i.unshift("..");!c||""===i[0]||i[0]&&s(i[0])||i.unshift("");var p=i.join("/");return n&&"/"!==p.substr(-1)&&(p+="/"),p};function l(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}var f=function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every((function(t,r){return e(t,n[r])}));if("object"===typeof t||"object"===typeof n){var r=l(t),i=l(n);return r!==t||i!==n?e(r,i):Object.keys(Object.assign({},t,n)).every((function(r){return e(t[r],n[r])}))}return!1},h="Invariant failed";function d(e,t){if(!e)throw new Error(h)}function p(e){return"/"===e.charAt(0)?e:"/"+e}function v(e){return"/"===e.charAt(0)?e.substr(1):e}function m(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function y(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function g(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function k(e,t,n,r){var i;"string"===typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var a=t.indexOf("?");return-1!==a&&(n=t.substr(a),t=t.substr(0,a)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e),i.state=t):(void 0===(i=o({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(a){throw a instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):a}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=c(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function w(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var a="function"===typeof e?e(t,n):e;"string"===typeof a?"function"===typeof r?r(a,i):i(!0):i(!1!==a)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var b=!("undefined"===typeof window||!window.document||!window.document.createElement);function x(e,t){t(window.confirm(e))}var _="popstate",I="hashchange";function E(){try{return window.history.state||{}}catch(e){return{}}}function T(e){void 0===e&&(e={}),b||d(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),r=!(-1===window.navigator.userAgent.indexOf("Trident")),i=e,a=i.forceRefresh,s=void 0!==a&&a,u=i.getUserConfirmation,c=void 0===u?x:u,l=i.keyLength,f=void 0===l?6:l,h=e.basename?y(p(e.basename)):"";function v(e){var t=e||{},n=t.key,r=t.state,i=window.location,a=i.pathname+i.search+i.hash;return h&&(a=m(a,h)),k(a,r,n)}function T(){return Math.random().toString(36).substr(2,f)}var S=w();function N(e){o(V,e),V.length=t.length,S.notifyListeners(V.location,V.action)}function C(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||P(v(e.state))}function A(){P(v(E()))}var R=!1;function P(e){if(R)R=!1,N();else{S.confirmTransitionTo(e,"POP",c,(function(t){t?N({action:"POP",location:e}):function(e){var t=V.location,n=D.indexOf(t.key);-1===n&&(n=0);var r=D.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(R=!0,j(i))}(e)}))}}var O=v(E()),D=[O.key];function L(e){return h+g(e)}function j(e){t.go(e)}var M=0;function F(e){1===(M+=e)&&1===e?(window.addEventListener(_,C),r&&window.addEventListener(I,A)):0===M&&(window.removeEventListener(_,C),r&&window.removeEventListener(I,A))}var U=!1;var V={length:t.length,action:"POP",location:O,createHref:L,push:function(e,r){var i="PUSH",a=k(e,r,T(),V.location);S.confirmTransitionTo(a,i,c,(function(e){if(e){var r=L(a),o=a.key,u=a.state;if(n)if(t.pushState({key:o,state:u},null,r),s)window.location.href=r;else{var c=D.indexOf(V.location.key),l=D.slice(0,c+1);l.push(a.key),D=l,N({action:i,location:a})}else window.location.href=r}}))},replace:function(e,r){var i="REPLACE",a=k(e,r,T(),V.location);S.confirmTransitionTo(a,i,c,(function(e){if(e){var r=L(a),o=a.key,u=a.state;if(n)if(t.replaceState({key:o,state:u},null,r),s)window.location.replace(r);else{var c=D.indexOf(V.location.key);-1!==c&&(D[c]=a.key),N({action:i,location:a})}else window.location.replace(r)}}))},go:j,goBack:function(){j(-1)},goForward:function(){j(1)},block:function(e){void 0===e&&(e=!1);var t=S.setPrompt(e);return U||(F(1),U=!0),function(){return U&&(U=!1,F(-1)),t()}},listen:function(e){var t=S.appendListener(e);return F(1),function(){F(-1),t()}}};return V}var S="hashchange",N={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+v(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:v,decodePath:p},slash:{encodePath:p,decodePath:p}};function C(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function A(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function R(e){window.location.replace(C(window.location.href)+"#"+e)}function P(e){void 0===e&&{},b||d(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),r=n.getUserConfirmation,i=void 0===r?x:r,a=n.hashType,s=void 0===a?"slash":a,u=e.basename?y(p(e.basename)):"",c=N[s],l=c.encodePath,f=c.decodePath;function h(){var e=f(A());return u&&m(e,u),k(e)}var v=w();function _(e){o(V,e),V.length=t.length,v.notifyListeners(V.location,V.action)}var I=!1,E=null;function T(){var e,t,n=A(),r=l(n);if(n!==r)R(r);else{var a=h(),o=V.location;if(!I&&(a,o.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash))return;if(E===g(a))return;null,function(e){if(I)!1,_();else{var t="POP";v.confirmTransitionTo(e,t,i,(function(n){n?_({action:t,location:e}):function(e){var t=V.location,n=L.lastIndexOf(g(t));-1===n&&0;var r=L.lastIndexOf(g(e));-1===r&&0;var i=n-r;i&&(!0,j(i))}(e)}))}}(a)}}var P=A(),O=l(P);P!==O&&R(O);var D=h(),L=[g(D)];function j(e){t.go(e)}var M=0;function F(e){1===(M+=e)&&1===e?window.addEventListener(S,T):0===M&&window.removeEventListener(S,T)}var U=!1;var V={length:t.length,action:"POP",location:D,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&C(window.location.href),n+"#"+l(u+g(e))},push:function(e,t){var n="PUSH",r=k(e,void 0,void 0,V.location);v.confirmTransitionTo(r,n,i,(function(e){if(e){var t=g(r),i=l(u+t);if(A()!==i){t,function(e){window.location.hash=e}(i);var a=L.lastIndexOf(g(V.location)),o=L.slice(0,a+1);o.push(t),o,_({action:n,location:r})}else _()}}))},replace:function(e,t){var n="REPLACE",r=k(e,void 0,void 0,V.location);v.confirmTransitionTo(r,n,i,(function(e){if(e){var t=g(r),i=l(u+t);A()!==i&&(t,R(i));var a=L.indexOf(g(V.location));-1!==a&&(L[a]=t),_({action:n,location:r})}}))},go:j,goBack:function(){j(-1)},goForward:function(){j(1)},block:function(e){void 0===e&&!1;var t=v.setPrompt(e);return U||(F(1),!0),function(){return U&&(!1,F(-1)),t()}},listen:function(e){var t=v.appendListener(e);return F(1),function(){F(-1),t()}}};return V}function O(e,t,n){return Math.min(Math.max(e,t),n)}function D(e){void 0===e&&{};var t=e,n=t.getUserConfirmation,r=t.initialEntries,i=void 0===r?["/"]:r,a=t.initialIndex,s=void 0===a?0:a,u=t.keyLength,c=void 0===u?6:u,l=w();function f(e){o(y,e),y.length=y.entries.length,l.notifyListeners(y.location,y.action)}function h(){return Math.random().toString(36).substr(2,c)}var d=O(s,0,i.length-1),p=i.map((function(e){return k(e,void 0,"string"===typeof e?h():e.key||h())})),v=g;function m(e){var t=O(y.index+e,0,y.entries.length-1),r=y.entries[t];l.confirmTransitionTo(r,"POP",n,(function(e){e?f({action:"POP",location:r,index:t}):f()}))}var y={length:p.length,action:"POP",location:p[d],index:d,entries:p,createHref:v,push:function(e,t){var r="PUSH",i=k(e,t,h(),y.location);l.confirmTransitionTo(i,r,n,(function(e){if(e){var t=y.index+1,n=y.entries.slice(0);n.length>t?n.splice(t,n.length-t,i):n.push(i),f({action:r,location:i,index:t,entries:n})}}))},replace:function(e,t){var r="REPLACE",i=k(e,t,h(),y.location);l.confirmTransitionTo(i,r,n,(function(e){e&&(y.entries[y.index]=i,f({action:r,location:i}))}))},go:m,goBack:function(){m(-1)},goForward:function(){m(1)},canGo:function(e){var t=y.index+e;return t>=0&&t<y.entries.length},block:function(e){return void 0===e&&!1,l.setPrompt(e)},listen:function(e){return l.appendListener(e)}};return y}var L=n(7),j=n.n(L),M=1073741823,F="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{};function U(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}var V=t.createContext||function(e,n){var r,i,o="__create-react-context-"+function(){var e="__global_unique_id__";return F[e]=(F[e]||0)+1}()+"__",s=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).emitter=U(t.props.value),t}a(t,e);var r=t.prototype;return r.getChildContext=function(){var e;return(e={})[o]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var t,r=this.props.value,i=e.value;!function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(r,i)?(t="function"===typeof n?n(r,i):M,0!==(t|=0)&&this.emitter.set(e.value,t)):t=0}},r.render=function(){return this.props.children},t}(t.Component);s.childContextTypes=((r={})[o]=j().object.isRequired,r);var u=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}a(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?M:t},r.componentDidMount=function(){this.context[o]&&this.context[o].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?M:e},r.componentWillUnmount=function(){this.context[o]&&this.context[o].off(this.onUpdate)},r.getValue=function(){return this.context[o]?this.context[o].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(t.Component);return u.contextTypes=((i={})[o]=j().object,i),{Provider:s,Consumer:u}},q=V,z=n(239),B=n.n(z);n(441);function K(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n(110);var H=function(e){var t=q();return t.displayName=e,t},W=H("Router-History"),G=H("Router"),Q=function(e){function n(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._isMounted?n.setState({location:e}):n._pendingLocation=e}))),n}a(n,e),n.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var r=n.prototype;return r.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},r.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},r.render=function(){return t.createElement(G.Provider,{value:{history:this.props.history,location:this.state.location,match:n.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},t.createElement(W.Provider,{children:this.props.children||null,value:this.props.history}))},n}(t.Component);t.Component;var $=function(e){function t(){return e.apply(this,arguments)||this}a(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(e){this.props.onUpdate&&this.props.onUpdate.call(this,this,e)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},t}(t.Component);var Y={},J=0;function X(e,t){return void 0===e&&(e="/"),void 0===t&&(t={}),"/"===e?e:function(e){if(Y[e])return Y[e];var t=B().compile(e);return J<1e4&&(Y[e]=t,J++),t}(e)(t,{pretty:!0})}function Z(e){var n=e.computedMatch,r=e.to,i=e.push,a=void 0!==i&&i;return t.createElement(G.Consumer,null,(function(e){e||d(!1);var i=e.history,s=e.staticContext,u=a?i.push:i.replace,c=k(n?"string"===typeof r?X(r,n.params):o({},r,{pathname:X(r.pathname,n.params)}):r);return s?(u(c),null):t.createElement($,{onMount:function(){u(c)},onUpdate:function(e,t){var n,r,i=k(t.to);n=i,r=o({},c,{key:i.key}),n.pathname===r.pathname&&n.search===r.search&&n.hash===r.hash&&n.key===r.key&&f(n.state,r.state)||u(c)},to:r})}))}var ee={},te=0;function ne(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,a=void 0!==i&&i,o=n.strict,s=void 0!==o&&o,u=n.sensitive,c=void 0!==u&&u;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=ee[n]||(ee[n]={});if(r[e])return r[e];var i=[],a={regexp:B()(e,i,t),keys:i};return te<1e4&&(r[e]=a,te++),a}(n,{end:a,strict:s,sensitive:c}),i=r.regexp,o=r.keys,u=i.exec(e);if(!u)return null;var l=u[0],f=u.slice(1),h=e===l;return a&&!h?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:h,params:o.reduce((function(e,t,n){return e[t.name]=f[n],e}),{})}}),null)}var re=function(e){function n(){return e.apply(this,arguments)||this}return a(n,e),n.prototype.render=function(){var e=this;return t.createElement(G.Consumer,null,(function(n){n||d(!1);var r=e.props.location||n.location,i=o({},n,{location:r,match:e.props.computedMatch?e.props.computedMatch:e.props.path?ne(r.pathname,e.props):n.match}),a=e.props,s=a.children,u=a.component,c=a.render;return Array.isArray(s)&&function(e){return 0===t.Children.count(e)}(s)&&(s=null),t.createElement(G.Provider,{value:i},i.match?s?"function"===typeof s?s(i):s:u?t.createElement(u,i):c?c(i):null:"function"===typeof s?s(i):null)}))},n}(t.Component);function ie(e){return"/"===e.charAt(0)?e:"/"+e}function ae(e,t){if(!e)return t;var n=ie(e);return 0!==t.pathname.indexOf(n)?t:o({},t,{pathname:t.pathname.substr(n.length)})}function oe(e){return"string"===typeof e?e:g(e)}function se(e){return function(){d(!1)}}function ue(){}t.Component;var ce=function(e){function n(){return e.apply(this,arguments)||this}return a(n,e),n.prototype.render=function(){var e=this;return t.createElement(G.Consumer,null,(function(n){n||d(!1);var r,i,a=e.props.location||n.location;return t.Children.forEach(e.props.children,(function(e){if(null==i&&t.isValidElement(e)){r=e;var s=e.props.path||e.props.from;i=s?ne(a.pathname,o({},e.props,{path:s})):n.match}})),i?t.cloneElement(r,{location:a,computedMatch:i}):null}))},n}(t.Component);var le=t.useContext;function fe(){var e=le(G).match;return e?e.params:{}}var he=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=T(t.props),t}return a(n,e),n.prototype.render=function(){return t.createElement(Q,{history:this.history,children:this.props.children})},n}(t.Component);t.Component;var de=function(e,t){return"function"===typeof e?e(t):e},pe=function(e,t){return"string"===typeof e?k(e,null,null,t):e},ve=function(e){return e},me=t.forwardRef;"undefined"===typeof me&&(me=ve);var ye=me((function(e,n){var r=e.innerRef,i=e.navigate,a=e.onClick,s=K(e,["innerRef","navigate","onClick"]),u=s.target,c=o({},s,{onClick:function(e){try{a&&a(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||u&&"_self"!==u||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),i())}});return c.ref=ve!==me&&n||r,t.createElement("a",c)}));var ge=me((function(e,n){var r=e.component,i=void 0===r?ye:r,a=e.replace,s=e.to,u=e.innerRef,c=K(e,["component","replace","to","innerRef"]);return t.createElement(G.Consumer,null,(function(e){e||d(!1);var r=e.history,l=pe(de(s,e.location),e.location),f=l?r.createHref(l):"",h=o({},c,{href:f,navigate:function(){var t=de(s,e.location),n=g(e.location)===g(pe(t));(a||n?r.replace:r.push)(t)}});return ve!==me?h.ref=n||u:h.innerRef=u,t.createElement(i,h)}))})),ke=function(e){return e},we=t.forwardRef;"undefined"===typeof we&&(we=ke);we((function(e,n){var r=e["aria-current"],i=void 0===r?"page":r,a=e.activeClassName,s=void 0===a?"active":a,u=e.activeStyle,c=e.className,l=e.exact,f=e.isActive,h=e.location,p=e.sensitive,v=e.strict,m=e.style,y=e.to,g=e.innerRef,k=K(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return t.createElement(G.Consumer,null,(function(e){e||d(!1);var r=h||e.location,a=pe(de(y,r),r),w=a.pathname,b=w&&w.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),x=b?ne(r.pathname,{path:b,exact:l,sensitive:p,strict:v}):null,_=!!(f?f(x,r):x),I="function"===typeof c?c(_):c,E="function"===typeof m?m(_):m;_&&(I=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(I,s),E=o({},E,u));var T=o({"aria-current":_&&i||null,className:I,style:E,to:a},k);return ke!==we?T.ref=n||g:T.innerRef=g,t.createElement(ge,T)}))}));function be(e){if(Array.isArray(e))return e}function xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _e(e,t){if(e){if("string"===typeof e)return xe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xe(e,t):void 0}}function Ie(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ee(e,t){return be(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||_e(e,t)||Ie()}function Te(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Se(e){return function(e){if(Array.isArray(e))return xe(e)}(e)||Te(e)||_e(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ne=n(184),Ce=t.createContext([]);Ce.displayName="CartContext";var Ae=function(e){var n=e.children,r=Ee(t.useState([]),2),i=r[0],a=r[1],o=function(e){return void 0!==i.find((function(t){return t.item.id===e}))};return(0,Ne.jsx)(Ce.Provider,{value:{cart:i,addItem:function(e,t){if(o(e.id)){var n=i.findIndex((function(t){return t.itemId===e.id})),r=i;r[n].quantity+=t,a(r)}else{var s={itemId:e.id,item:e,quantity:t};a((function(e){return[].concat(Se(e),[s])}))}},removeItem:function(e){if(o(e)){var t=i.filter((function(t){return t.itemId!==e}));a(t)}else console.error("El producto que estas intentado remover no se encuentra en el carrito")},clear:function(){return a([])},isInCart:o,getQuantity:function(){var e=0;return i.forEach((function(t){e+=t.quantity})),e},getTotal:function(){var e=0;return i.forEach((function(t){var n=Number(t.quantity)*Number(t.item.price);e+=n})),e}},children:n})},Re=function(){return t.useContext(Ce)},Pe=function(){var e=Re(),n=e.getQuantity,r=e.cart,i=Ee(t.useState(n()),2),a=i[0],o=i[1];return t.useEffect((function(){o(n())}),[r]),(0,Ne.jsxs)("button",{className:"shopping-cart-logo",children:[(0,Ne.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-shopping-cart",width:"36",height:"36",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"#ffffff",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Ne.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,Ne.jsx)("circle",{cx:"6",cy:"19",r:"2"}),(0,Ne.jsx)("circle",{cx:"17",cy:"19",r:"2"}),(0,Ne.jsx)("path",{d:"M17 17h-11v-14h-2"}),(0,Ne.jsx)("path",{d:"M6 5l14 1l-1 7h-13"})]}),0!==r.length&&(0,Ne.jsxs)("p",{children:["( ",a," )"]})]})};function Oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function De(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function je(e,t,n){return t&&Le(e.prototype,t),n&&Le(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Me(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_e(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Fe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ue(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}function Ve(e){return Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ve(e)}function qe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function ze(e){return ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ze(e)}function Be(e,t){if(t&&("object"===ze(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Fe(e)}function Ke(e){var t=qe();return function(){var n,r=Ve(e);if(t){var i=Ve(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Be(this,n)}}function He(e,t,n){return He=qe()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&i(a,n.prototype),a},He.apply(null,arguments)}function We(e){var t="function"===typeof Map?new Map:void 0;return We=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return He(e,arguments,Ve(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),i(n,e)},We(e)}var Ge=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Qe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=a>>2,f=(3&a)<<4|s>>4,h=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ge(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var f=s<<6&192|u;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},$e=function(e){return function(e){var t=Ge(e);return Qe.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Ye=function(e){try{return Qe.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Je(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&Xe(n)&&(e[n]=Je(e[n],t[n]));return e}function Xe(e){return"__proto__"!==e}var Ze=function(){function e(){var t=this;De(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return je(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function et(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[$e(JSON.stringify({alg:"none",type:"JWT"})),$e(JSON.stringify(a)),""].join(".")}function tt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function nt(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tt())}function rt(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function it(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function at(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function ot(){var e=tt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function st(){return"object"===typeof indexedDB}var ut=function(e){Ue(n,e);var t=Ke(n);function n(e,r,i){var a;return De(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(Fe(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(Fe(a),ct.prototype.create),a}return je(n)}(We(Error)),ct=function(){function e(t,n,r){De(this,e),this.service=t,this.serviceName=n,this.errors=r}return je(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?lt(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new ut(n,a,t);return o}}]),e}();function lt(e,t){return e.replace(ft,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var ft=/\{\$([^}]+)}/g;function ht(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function dt(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(pt(s)&&pt(u)){if(!dt(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function pt(e){return null!==e&&"object"===typeof e}function vt(e){for(var t=[],n=function(){var e=Ee(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function mt(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=Ee(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function yt(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function gt(e,t){var n=new kt(e,t);return n.subscribe.bind(n)}var kt=function(){function e(t,n){var r=this;De(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return je(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=Me(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=wt),void 0===r.error&&(r.error=wt),void 0===r.complete&&(r.complete=wt);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function wt(){}function bt(e){return e&&e._delegate?e._delegate:e}function xt(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{u(r.next(e))}catch(t){a(t)}}function s(e){try{u(r.throw(e))}catch(t){a(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))}function _t(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(s){a=[6,s],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}Object.create;function It(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Et(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}function Tt(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;var St=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},e}(),Nt="[DEFAULT]",Ct=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return e.prototype.get=function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Ze;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Nt})}catch(l){}try{for(var r=It(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var a=Et(i.value,2),o=a[0],s=a[1],u=this.normalizeInstanceIdentifier(o);try{var c=this.getOrInitializeService({instanceIdentifier:u});s.resolve(c)}catch(l){}}}catch(f){t={error:f}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}},e.prototype.clearInstance=function(e){void 0===e&&(e=Nt),this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return xt(this,void 0,void 0,(function(){var e;return _t(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(Tt(Tt([],Et(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})))),Et(e.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))))];case 1:return t.sent(),[2]}}))}))},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.isInitialized=function(e){return void 0===e&&(e=Nt),this.instances.has(e)},e.prototype.getOptions=function(e){return void 0===e&&(e=Nt),this.instancesOptions.get(e)||{}},e.prototype.initialize=function(e){var t,n;void 0===e&&(e={});var r=e.options,i=void 0===r?{}:r,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(this.name+"("+a+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var o=this.getOrInitializeService({instanceIdentifier:a,options:i});try{for(var s=It(this.instancesDeferred.entries()),u=s.next();!u.done;u=s.next()){var c=Et(u.value,2),l=c[0],f=c[1];a===this.normalizeInstanceIdentifier(l)&&f.resolve(o)}}catch(h){t={error:h}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return o},e.prototype.onInit=function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}},e.prototype.invokeOnInitCallbacks=function(e,t){var n,r,i=this.onInitCallbacks.get(t);if(i)try{for(var a=It(i),o=a.next();!o.done;o=a.next()){var s=o.value;try{s(e,t)}catch(u){}}}catch(c){n={error:c}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}},e.prototype.getOrInitializeService=function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Nt?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(Zv){}return a||null},e.prototype.normalizeInstanceIdentifier=function(e){return void 0===e&&(e=Nt),this.component?this.component.multipleInstances?e:Nt:e},e.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},e}();var At=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Ct(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}();function Rt(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function Pt(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Rt(a,r,i,o,s,"next",e)}function s(e){Rt(a,r,i,o,s,"throw",e)}o(void 0)}))}}var Ot,Dt,Lt=n(757),jt=n.n(Lt),Mt=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Dt||(Dt={}));var Ft,Ut,Vt={debug:Dt.DEBUG,verbose:Dt.VERBOSE,info:Dt.INFO,warn:Dt.WARN,error:Dt.ERROR,silent:Dt.SILENT},qt=Dt.INFO,zt=(Oe(Ot={},Dt.DEBUG,"log"),Oe(Ot,Dt.VERBOSE,"log"),Oe(Ot,Dt.INFO,"info"),Oe(Ot,Dt.WARN,"warn"),Oe(Ot,Dt.ERROR,"error"),Ot),Bt=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=zt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Kt=function(){function e(t){De(this,e),this.name=t,this._logLevel=qt,this._logHandler=Bt,this._userLogHandler=null,Mt.push(this)}return je(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Dt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Vt[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Dt.DEBUG].concat(t)),this._logHandler.apply(this,[this,Dt.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Dt.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Dt.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Dt.INFO].concat(t)),this._logHandler.apply(this,[this,Dt.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Dt.WARN].concat(t)),this._logHandler.apply(this,[this,Dt.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Dt.ERROR].concat(t)),this._logHandler.apply(this,[this,Dt.ERROR].concat(t))}}]),e}();var Ht=function(){function e(t){De(this,e),this.container=t}return je(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Wt="@firebase/app",Gt=new Kt("@firebase/app"),Qt="[DEFAULT]",$t=(Oe(Ft={},Wt,"fire-core"),Oe(Ft,"@firebase/app-compat","fire-core-compat"),Oe(Ft,"@firebase/analytics","fire-analytics"),Oe(Ft,"@firebase/analytics-compat","fire-analytics-compat"),Oe(Ft,"@firebase/app-check","fire-app-check"),Oe(Ft,"@firebase/app-check-compat","fire-app-check-compat"),Oe(Ft,"@firebase/auth","fire-auth"),Oe(Ft,"@firebase/auth-compat","fire-auth-compat"),Oe(Ft,"@firebase/database","fire-rtdb"),Oe(Ft,"@firebase/database-compat","fire-rtdb-compat"),Oe(Ft,"@firebase/functions","fire-fn"),Oe(Ft,"@firebase/functions-compat","fire-fn-compat"),Oe(Ft,"@firebase/installations","fire-iid"),Oe(Ft,"@firebase/installations-compat","fire-iid-compat"),Oe(Ft,"@firebase/messaging","fire-fcm"),Oe(Ft,"@firebase/messaging-compat","fire-fcm-compat"),Oe(Ft,"@firebase/performance","fire-perf"),Oe(Ft,"@firebase/performance-compat","fire-perf-compat"),Oe(Ft,"@firebase/remote-config","fire-rc"),Oe(Ft,"@firebase/remote-config-compat","fire-rc-compat"),Oe(Ft,"@firebase/storage","fire-gcs"),Oe(Ft,"@firebase/storage-compat","fire-gcs-compat"),Oe(Ft,"@firebase/firestore","fire-fst"),Oe(Ft,"@firebase/firestore-compat","fire-fst-compat"),Oe(Ft,"fire-js","fire-js"),Oe(Ft,"firebase","fire-js-all"),Ft),Yt=new Map,Jt=new Map;function Xt(e,t){try{e.container.addComponent(t)}catch(n){Gt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Zt(e,t){e.container.addOrOverwriteComponent(t)}function en(e){var t=e.name;if(Jt.has(t))return Gt.debug("There were multiple attempts to register component ".concat(t,".")),!1;Jt.set(t,e);var n,r=Me(Yt.values());try{for(r.s();!(n=r.n()).done;){Xt(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function tn(e,t){return e.container.getProvider(t)}function nn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qt;tn(e,t).clearInstance(n)}function rn(){Jt.clear()}var an,on,sn=(Oe(Ut={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Oe(Ut,"bad-app-name","Illegal App name: '{$appName}"),Oe(Ut,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),Oe(Ut,"app-deleted","Firebase App named '{$appName}' already deleted"),Oe(Ut,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Oe(Ut,"invalid-log-argument","First argument to `onLog` must be null or a function."),Ut),un=new ct("app","Firebase",sn),cn=function(){function e(t,n,r){var i=this;De(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new St("app",(function(){return i}),"PUBLIC"))}return je(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw un.create("app-deleted",{appName:this._name})}}]),e}(),ln="9.1.1";function fn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:Qt,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw un.create("bad-app-name",{appName:String(i)});var a=Yt.get(i);if(a){if(dt(e,a.options)&&dt(r,a.config))return a;throw un.create("duplicate-app",{appName:i})}var o,s=new At(i),u=Me(Jt.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s.addComponent(c)}}catch(f){u.e(f)}finally{u.f()}var l=new cn(e,r,s);return Yt.set(i,l),l}function hn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt,t=Yt.get(e);if(!t)throw un.create("no-app",{appName:e});return t}function dn(){return Array.from(Yt.values())}function pn(e){return vn.apply(this,arguments)}function vn(){return vn=Pt(jt().mark((function e(t){var n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Yt.has(n)){e.next=6;break}return Yt.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)}))),vn.apply(this,arguments)}function mn(e,t,n){var r,i=null!==(r=$t[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Gt.warn(s.join(" "))}en(new St("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function yn(e,t){if(null!==e&&"function"!==typeof e)throw un.create("invalid-log-argument");!function(e,t){var n,r=Me(Mt);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Vt[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var s=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Dt[n].toLowerCase(),message:s,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function gn(e){var t;t=e,Mt.forEach((function(e){e.setLogLevel(t)}))}en(new St("platform-logger",(function(e){return new Ht(e)}),"PRIVATE")),mn(Wt,"0.7.2",an),mn("fire-js","");var kn=function(){function e(t,n){var r=this;De(this,e),this._delegate=t,this.firebase=n,Xt(t,new St("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return je(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),pn(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qt;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qt;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Xt(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Zt(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),wn=(Oe(on={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Oe(on,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),on),bn=new ct("app-compat","Firebase",wn);var xn=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=fn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(ht(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:mn,setLogLevel:gn,onLog:yn,apps:null,SDK_VERSION:ln,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(en(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw bn.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&Je(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!ht(n,e=e||Qt))throw bn.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(kn);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Je(n,e)},createSubscribe:gt,ErrorFactory:ct,deepExtend:Je}),n}(),_n=new Kt("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){_n.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var In=self.firebase.SDK_VERSION;In&&In.indexOf("LITE")>=0&&_n.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var En=xn;!function(e){mn("@firebase/app-compat","0.1.3",e)}();function Tn(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ve(e)););return e}function Sn(){return Sn="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Tn(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Sn.apply(this,arguments)}En.registerVersion("firebase","9.1.1","app-compat");var Nn,Cn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},An={},Rn=Rn||{},Pn=Cn||self;function On(){}function Dn(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Ln(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var jn="closure_uid_"+(1e9*Math.random()>>>0),Mn=0;function Fn(e,t,n){return e.call.apply(e.bind,arguments)}function Un(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Vn(e,t,n){return(Vn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Fn:Un).apply(null,arguments)}function qn(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function zn(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Bn(){this.s=this.s,this.o=this.o}var Kn={};Bn.prototype.s=!1,Bn.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,jn)&&e[jn]||(e[jn]=++Mn)}(this);delete Kn[e]}},Bn.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Hn=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Wn=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function Gn(e){return Array.prototype.concat.apply([],arguments)}function Qn(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function $n(e){return/^[\s\xa0]*$/.test(e)}var Yn,Jn=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Xn(e,t){return-1!=e.indexOf(t)}function Zn(e,t){return e<t?-1:e>t?1:0}e:{var er=Pn.navigator;if(er){var tr=er.userAgent;if(tr){Yn=tr;break e}}Yn=""}function nr(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function rr(e){var t={};for(var n in e)t[n]=e[n];return t}var ir="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ar(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<ir.length;a++)n=ir[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function or(e){return or[" "](e),e}or[" "]=On;var sr,ur=Xn(Yn,"Opera"),cr=Xn(Yn,"Trident")||Xn(Yn,"MSIE"),lr=Xn(Yn,"Edge"),fr=lr||cr,hr=Xn(Yn,"Gecko")&&!(Xn(Yn.toLowerCase(),"webkit")&&!Xn(Yn,"Edge"))&&!(Xn(Yn,"Trident")||Xn(Yn,"MSIE"))&&!Xn(Yn,"Edge"),dr=Xn(Yn.toLowerCase(),"webkit")&&!Xn(Yn,"Edge");function pr(){var e=Pn.document;return e?e.documentMode:void 0}e:{var vr="",mr=function(){var e=Yn;return hr?/rv:([^\);]+)(\)|;)/.exec(e):lr?/Edge\/([\d\.]+)/.exec(e):cr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):dr?/WebKit\/(\S+)/.exec(e):ur?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(mr&&(vr=mr?mr[1]:""),cr){var yr=pr();if(null!=yr&&yr>parseFloat(vr)){sr=String(yr);break e}}sr=vr}var gr,kr={};function wr(){return function(e){var t=kr;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Jn(String(sr)).split("."),n=Jn("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Zn(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Zn(0==a[2].length,0==o[2].length)||Zn(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Pn.document&&cr){var br=pr();gr=br||(parseInt(sr,10)||void 0)}else gr=void 0;var xr=gr,_r=function(){if(!Pn.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Pn.addEventListener("test",On,t),Pn.removeEventListener("test",On,t)}catch(n){}return e}();function Ir(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Er(e,t){if(Ir.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(hr){e:{try{or(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Tr[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Er.Z.h.call(this)}}Ir.prototype.h=function(){this.defaultPrevented=!0},zn(Er,Ir);var Tr={2:"touch",3:"pen",4:"mouse"};Er.prototype.h=function(){Er.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Sr="closure_listenable_"+(1e6*Math.random()|0),Nr=0;function Cr(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Nr,this.ca=this.fa=!1}function Ar(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Rr(e){this.src=e,this.g={},this.h=0}function Pr(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Hn(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Ar(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Or(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}Rr.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Or(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Cr(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var Dr="closure_lm_"+(1e6*Math.random()|0),Lr={};function jr(e,t,n,r,i){if(r&&r.once)return Fr(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)jr(e,t[a],n,r,i);return null}return n=Hr(n),e&&e[Sr]?e.N(t,n,Ln(r)?!!r.capture:!!r,i):Mr(e,t,n,!1,r,i)}function Mr(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Ln(i)?!!i.capture:!!i,s=Br(e);if(s||(e[Dr]=s=new Rr(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=zr;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)_r||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(qr(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Fr(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Fr(e,t[a],n,r,i);return null}return n=Hr(n),e&&e[Sr]?e.O(t,n,Ln(r)?!!r.capture:!!r,i):Mr(e,t,n,!0,r,i)}function Ur(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Ur(e,t[a],n,r,i);else r=Ln(r)?!!r.capture:!!r,n=Hr(n),e&&e[Sr]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Or(a=e.g[t],n,r,i))&&(Ar(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Br(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Or(t,n,r,i)),(n=-1<e?t[e]:null)&&Vr(n))}function Vr(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Sr])Pr(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(qr(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Br(t))?(Pr(n,e),0==n.h&&(n.src=null,t[Dr]=null)):Ar(e)}}}function qr(e){return e in Lr?Lr[e]:Lr[e]="on"+e}function zr(e,t){if(e.ca)e=!0;else{t=new Er(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Vr(e),e=n.call(r,t)}return e}function Br(e){return(e=e[Dr])instanceof Rr?e:null}var Kr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hr(e){return"function"===typeof e?e:(e[Kr]||(e[Kr]=function(t){return e.handleEvent(t)}),e[Kr])}function Wr(){Bn.call(this),this.i=new Rr(this),this.P=this,this.I=null}function Gr(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Ir(t,e);else if(t instanceof Ir)t.target=t.target||e;else{var i=t;ar(t=new Ir(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Qr(o,r,!0,t)&&i}if(i=Qr(o=t.g=e,r,!0,t)&&i,i=Qr(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Qr(o=t.g=n[a],r,!1,t)&&i}function Qr(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var s=o.listener,u=o.ia||o.src;o.fa&&Pr(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}zn(Wr,Bn),Wr.prototype[Sr]=!0,Wr.prototype.removeEventListener=function(e,t,n,r){Ur(this,e,t,n,r)},Wr.prototype.M=function(){if(Wr.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Ar(n[r]);delete t.g[e],t.h--}}this.I=null},Wr.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Wr.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var $r=Pn.JSON.stringify;function Yr(){var e=ii,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Jr,Xr=function(){function e(){De(this,e),this.h=this.g=null}return je(e,[{key:"add",value:function(e,t){var n=Zr.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Zr=new(function(){function e(t,n){De(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return je(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new ei}),(function(e){return e.reset()})),ei=function(){function e(){De(this,e),this.next=this.g=this.h=null}return je(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function ti(e){Pn.setTimeout((function(){throw e}),0)}function ni(e,t){Jr||function(){var e=Pn.Promise.resolve(void 0);Jr=function(){e.then(ai)}}(),ri||(Jr(),ri=!0),ii.add(e,t)}var ri=!1,ii=new Xr;function ai(){for(var e;e=Yr();){try{e.h.call(e.g)}catch(n){ti(n)}var t=Zr;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ri=!1}function oi(e,t){Wr.call(this),this.h=e||1,this.g=t||Pn,this.j=Vn(this.kb,this),this.l=Date.now()}function si(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function ui(e,t,n){if("function"===typeof e)n&&(e=Vn(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Vn(e.handleEvent,e)}return 2147483647<Number(t)?-1:Pn.setTimeout(e,t||0)}function ci(e){e.g=ui((function(){e.g=null,e.i&&(e.i=!1,ci(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}zn(oi,Wr),(Nn=oi.prototype).da=!1,Nn.S=null,Nn.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Gr(this,"tick"),this.da&&(si(this),this.start()))}},Nn.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Nn.M=function(){oi.Z.M.call(this),si(this),delete this.g};var li=function(e){Ue(n,e);var t=Ke(n);function n(e,r){var i;return De(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return je(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:ci(this)}},{key:"M",value:function(){Sn(Ve(n.prototype),"M",this).call(this),this.g&&(Pn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Bn);function fi(e){Bn.call(this),this.h=e,this.g={}}zn(fi,Bn);var hi=[];function di(e,t,n,r){Array.isArray(n)||(n&&(hi[0]=n.toString()),n=hi);for(var i=0;i<n.length;i++){var a=jr(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function pi(e){nr(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Vr(e)}),e),e.g={}}function vi(){this.g=!0}function mi(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return $r(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}fi.prototype.M=function(){fi.Z.M.call(this),pi(this)},fi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},vi.prototype.Aa=function(){this.g=!1},vi.prototype.info=function(){};var yi={},gi=null;function ki(){return gi=gi||new Wr}function wi(e){Ir.call(this,yi.Ma,e)}function bi(e){var t=ki();Gr(t,new wi(t,e))}function xi(e,t){Ir.call(this,yi.STAT_EVENT,e),this.stat=t}function _i(e){var t=ki();Gr(t,new xi(t,e))}function Ii(e,t){Ir.call(this,yi.Na,e),this.size=t}function Ei(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Pn.setTimeout((function(){e()}),t)}yi.Ma="serverreachability",zn(wi,Ir),yi.STAT_EVENT="statevent",zn(xi,Ir),yi.Na="timingevent",zn(Ii,Ir);var Ti={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Si={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Ni(){}function Ci(e){return e.h||(e.h=e.i())}function Ai(){}Ni.prototype.h=null;var Ri,Pi={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Oi(){Ir.call(this,"d")}function Di(){Ir.call(this,"c")}function Li(){}function ji(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new fi(this),this.P=Fi,e=fr?125:void 0,this.W=new oi(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Mi}function Mi(){this.i=null,this.g="",this.h=!1}zn(Oi,Ir),zn(Di,Ir),zn(Li,Ni),Li.prototype.g=function(){return new XMLHttpRequest},Li.prototype.i=function(){return{}},Ri=new Li;var Fi=45e3,Ui={},Vi={};function qi(e,t,n){e.K=1,e.v=la(ia(t)),e.s=n,e.U=!0,zi(e,null)}function zi(e,t){e.F=Date.now(),Wi(e),e.A=ia(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),_a(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Mi,e.g=To(e.l,n?t:null,!e.s),0<e.O&&(e.L=new li(Vn(e.Ia,e,e.g),e.O)),di(e.V,e.g,"readystatechange",e.gb),t=e.H?rr(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),bi(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function Bi(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function Ki(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Hi(e,n))==Vi){4==t&&(e.o=4,_i(14),i=!1),mi(e.j,e.m,null,"[Incomplete Response]");break}if(r==Ui){e.o=4,_i(15),mi(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}mi(e.j,e.m,r,null),Ji(e,r)}Bi(e)&&r!=Vi&&r!=Ui&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,_i(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),go(t),t.L=!0,_i(11))):(mi(e.j,e.m,n,"[Invalid Chunked Response]"),Yi(e),$i(e))}function Hi(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Vi:(n=Number(t.substring(n,r)),isNaN(n)?Ui:(r+=1)+n>t.length?Vi:(t=t.substr(r,n),e.C=r+n,t))}function Wi(e){e.Y=Date.now()+e.P,Gi(e,e.P)}function Gi(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ei(Vn(e.eb,e),t)}function Qi(e){e.B&&(Pn.clearTimeout(e.B),e.B=null)}function $i(e){0==e.l.G||e.I||bo(e.l,e)}function Yi(e){Qi(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,si(e.W),pi(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Ji(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Ra(n.i,e)))if(n.I=e.N,!e.J&&Ra(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;wo(n),uo(n)}yo(n),_i(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Ei(Vn(n.ab,n),6e3));if(1>=Aa(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else _o(n,11)}else if((e.J||n.g==e)&&wo(n),!$n(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var s=a[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=a[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(Xn(l,"spdy")||Xn(l,"quic")||Xn(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(Pa(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,ca(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Eo(r,r.H?r.la:null,r.W),d.J){Oa(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(Qi(p),Wi(p)),r.g=d}else mo(r);0<n.l.length&&fo(n)}else"stop"!=a[0]&&"close"!=a[0]||_o(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?_o(n,7):so(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}bi(4)}catch(a){}}function Xi(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Dn(e)||"string"===typeof e)Wn(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Dn(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(Dn(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function Zi(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Zi)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function ea(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];ta(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)ta(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function ta(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Nn=ji.prototype).setTimeout=function(e){this.P=e},Nn.gb=function(e){e=e.target;var t=this.L;t&&3==no(e)?t.l():this.Ia(e)},Nn.Ia=function(e){try{if(e==this.g)e:{var t=no(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||fr||this.g&&(this.h.h||this.g.ga()||ro(this.g)))){this.I||4!=t||7==n||bi(8==n||0>=r?3:2),Qi(this);var i=this.g.ba();this.N=i;t:if(Bi(this)){var a=ro(this.g);e="";var o=a.length,s=4==no(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Yi(this),$i(this);var u="";break t}this.h.i=new Pn.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:s&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$n(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,_i(12),Yi(this),$i(this);break e}mi(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ji(this,i)}this.U?(Ki(this,t,u),fr&&this.i&&3==t&&(di(this.V,this.W,"tick",this.fb),this.W.start())):(mi(this.j,this.m,u,null),Ji(this,u)),4==t&&Yi(this),this.i&&!this.I&&(4==t?bo(this.l,this):(this.i=!1,Wi(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,_i(12)):(this.o=0,_i(13)),Yi(this),$i(this)}}}catch(t){}},Nn.fb=function(){if(this.g){var e=no(this.g),t=this.g.ga();this.C<t.length&&(Qi(this),Ki(this,e,t),this.i&&4!=e&&Wi(this))}},Nn.cancel=function(){this.I=!0,Yi(this)},Nn.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(bi(3),_i(17)),Yi(this),this.o=2,$i(this)):Gi(this,this.Y-e)},(Nn=Zi.prototype).R=function(){ea(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Nn.T=function(){return ea(this),this.g.concat()},Nn.get=function(e,t){return ta(this.h,e)?this.h[e]:t},Nn.set=function(e,t){ta(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Nn.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var na=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ra(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof ra){this.g=void 0!==t?t:e.g,aa(this,e.j),this.s=e.s,oa(this,e.i),sa(this,e.m),this.l=e.l,t=e.h;var n=new ka;n.i=t.i,t.g&&(n.g=new Zi(t.g),n.h=t.h),ua(this,n),this.o=e.o}else e&&(n=String(e).match(na))?(this.g=!!t,aa(this,n[1]||"",!0),this.s=fa(n[2]||""),oa(this,n[3]||"",!0),sa(this,n[4]),this.l=fa(n[5]||"",!0),ua(this,n[6]||"",!0),this.o=fa(n[7]||"")):(this.g=!!t,this.h=new ka(null,this.g))}function ia(e){return new ra(e)}function aa(e,t,n){e.j=n?fa(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function oa(e,t,n){e.i=n?fa(t,!0):t}function sa(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function ua(e,t,n){t instanceof ka?(e.h=t,function(e,t){t&&!e.j&&(wa(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(ba(this,t),_a(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=ha(t,ya)),e.h=new ka(t,e.g))}function ca(e,t,n){e.h.set(t,n)}function la(e){return ca(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function fa(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ha(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,da),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function da(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ra.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ha(t,pa,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(ha(t,pa,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(ha(n,"/"==n.charAt(0)?ma:va,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",ha(n,ga)),e.join("")};var pa=/[#\/\?@]/g,va=/[#\?:]/g,ma=/[#\?]/g,ya=/[#\?@]/g,ga=/#/g;function ka(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function wa(e){e.g||(e.g=new Zi,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function ba(e,t){wa(e),t=Ia(e,t),ta(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,ta((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&ea(e)))}function xa(e,t){return wa(e),t=Ia(e,t),ta(e.g.h,t)}function _a(e,t,n){ba(e,t),0<n.length&&(e.i=null,e.g.set(Ia(e,t),Qn(n)),e.h+=n.length)}function Ia(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Nn=ka.prototype).add=function(e,t){wa(this),this.i=null,e=Ia(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Nn.forEach=function(e,t){wa(this),this.g.forEach((function(n,r){Wn(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Nn.T=function(){wa(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Nn.R=function(e){wa(this);var t=[];if("string"===typeof e)xa(this,e)&&(t=Gn(t,this.g.get(Ia(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=Gn(t,e[n])}return t},Nn.set=function(e,t){return wa(this),this.i=null,xa(this,e=Ia(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Nn.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Nn.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var Ea=je((function e(t,n){De(this,e),this.h=t,this.g=n}));function Ta(e){this.l=e||Na,Pn.PerformanceNavigationTiming?e=0<(e=Pn.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Pn.g&&Pn.g.Ea&&Pn.g.Ea()&&Pn.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Sa,Na=10;function Ca(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Aa(e){return e.h?1:e.g?e.g.size:0}function Ra(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Pa(e,t){e.g?e.g.add(t):e.h=t}function Oa(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Da(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=Me(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return Qn(e.i)}function La(){}function ja(){this.g=new La}function Ma(e,t,n){var r=n||"";try{Xi(e,(function(e,n){var i=e;Ln(e)&&(i=$r(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Fa(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Ua(e){this.l=e.$b||null,this.j=e.ib||!1}function Va(e,t){Wr.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=qa,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ta.prototype.cancel=function(){if(this.i=Da(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=Me(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},La.prototype.stringify=function(e){return Pn.JSON.stringify(e,void 0)},La.prototype.parse=function(e){return Pn.JSON.parse(e,void 0)},zn(Ua,Ni),Ua.prototype.g=function(){return new Va(this.l,this.j)},Ua.prototype.i=(Sa={},function(){return Sa}),zn(Va,Wr);var qa=0;function za(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Ba(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Ka(e)}function Ka(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Nn=Va.prototype).open=function(e,t){if(this.readyState!=qa)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Ka(this)},Nn.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Pn).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Nn.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ba(this)),this.readyState=qa},Nn.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ka(this)),this.g&&(this.readyState=3,Ka(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof Pn.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;za(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Nn.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ba(this):Ka(this),3==this.readyState&&za(this)}},Nn.Ua=function(e){this.g&&(this.response=this.responseText=e,Ba(this))},Nn.Ta=function(e){this.g&&(this.response=e,Ba(this))},Nn.ha=function(){this.g&&Ba(this)},Nn.setRequestHeader=function(e,t){this.v.append(e,t)},Nn.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Nn.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Va.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Ha=Pn.JSON.parse;function Wa(e){Wr.call(this),this.headers=new Zi,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Ga,this.K=this.L=!1}zn(Wa,Wr);var Ga="",Qa=/^https?$/i,$a=["POST","PUT"];function Ya(e){return"content-type"==e.toLowerCase()}function Ja(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Xa(e),eo(e)}function Xa(e){e.D||(e.D=!0,Gr(e,"complete"),Gr(e,"error"))}function Za(e){if(e.h&&"undefined"!=typeof Rn&&(!e.C[1]||4!=no(e)||2!=e.ba()))if(e.v&&4==no(e))ui(e.Fa,0,e);else if(Gr(e,"readystatechange"),4==no(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(na)[1]||null;if(!a&&Pn.self&&Pn.self.location){var o=Pn.self.location.protocol;a=o.substr(0,o.length-1)}i=!Qa.test(a?a.toLowerCase():"")}t=i}if(t)Gr(e,"complete"),Gr(e,"success");else{e.m=6;try{var s=2<no(e)?e.g.statusText:""}catch(u){s=""}e.j=s+" ["+e.ba()+"]",Xa(e)}}finally{eo(e)}}}function eo(e,t){if(e.g){to(e);var n=e.g,r=e.C[0]?On:null;e.g=null,e.C=null,t||Gr(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function to(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Pn.clearTimeout(e.A),e.A=null)}function no(e){return e.g?e.g.readyState:0}function ro(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Ga:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function io(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return nr(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ca(e,t,n))}function ao(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function oo(e){this.za=0,this.l=[],this.h=new vi,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=ao("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=ao("baseRetryDelayMs",5e3,e),this.$a=ao("retryDelaySeedMs",1e4,e),this.Ya=ao("forwardChannelMaxRetries",2,e),this.ra=ao("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Ta(e&&e.concurrentRequestLimit),this.Ca=new ja,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function so(e){if(co(e),3==e.G){var t=e.V++,n=ia(e.F);ca(n,"SID",e.J),ca(n,"RID",t),ca(n,"TYPE","terminate"),po(e,n),(t=new ji(e,e.h,t,void 0)).K=2,t.v=la(ia(n)),n=!1,Pn.navigator&&Pn.navigator.sendBeacon&&(n=Pn.navigator.sendBeacon(t.v.toString(),"")),!n&&Pn.Image&&((new Image).src=t.v,n=!0),n||(t.g=To(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Wi(t)}Io(e)}function uo(e){e.g&&(go(e),e.g.cancel(),e.g=null)}function co(e){uo(e),e.u&&(Pn.clearTimeout(e.u),e.u=null),wo(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Pn.clearTimeout(e.m),e.m=null)}function lo(e,t){e.l.push(new Ea(e.Za++,t)),3==e.G&&fo(e)}function fo(e){Ca(e.i)||e.m||(e.m=!0,ni(e.Ha,e),e.C=0)}function ho(e,t){var n;n=t?t.m:e.V++;var r=ia(e.F);ca(r,"SID",e.J),ca(r,"RID",n),ca(r,"AID",e.U),po(e,r),e.o&&e.s&&io(r,e.o,e.s),n=new ji(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=vo(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Pa(e.i,n),qi(n,r,t)}function po(e,t){e.j&&Xi({},(function(e,n){ca(t,n,e)}))}function vo(e,t,n){n=Math.min(e.l.length,n);var r=e.j?Vn(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=a))a=Math.max(0,i[u].h-100),s=!1;else try{Ma(l,o,"req"+c+"_")}catch(is){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function mo(e){e.g||e.u||(e.Y=1,ni(e.Ga,e),e.A=0)}function yo(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=Ei(Vn(e.Ga,e),xo(e,e.A)),e.A++,!0)}function go(e){null!=e.B&&(Pn.clearTimeout(e.B),e.B=null)}function ko(e){e.g=new ji(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=ia(e.oa);ca(t,"RID","rpc"),ca(t,"SID",e.J),ca(t,"CI",e.N?"0":"1"),ca(t,"AID",e.U),po(e,t),ca(t,"TYPE","xmlhttp"),e.o&&e.s&&io(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=la(ia(t)),n.s=null,n.U=!0,zi(n,e)}function wo(e){null!=e.v&&(Pn.clearTimeout(e.v),e.v=null)}function bo(e,t){var n=null;if(e.g==t){wo(e),go(e),e.g=null;var r=2}else{if(!Ra(e.i,t))return;n=t.D,Oa(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Gr(r=ki(),new Ii(r,n,t,i)),fo(e)}else mo(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(Aa(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=Ei(Vn(e.Ha,e,t),xo(e,e.C)),e.C++,!0))}(e,t)||2==r&&yo(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:_o(e,5);break;case 4:_o(e,10);break;case 3:_o(e,6);break;default:_o(e,2)}}function xo(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function _o(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=Vn(e.jb,e);n||(n=new ra("//www.google.com/images/cleardot.gif"),Pn.location&&"http"==Pn.location.protocol||aa(n,"https"),la(n)),function(e,t){var n=new vi;if(Pn.Image){var r=new Image;r.onload=qn(Fa,n,r,"TestLoadImage: loaded",!0,t),r.onerror=qn(Fa,n,r,"TestLoadImage: error",!1,t),r.onabort=qn(Fa,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=qn(Fa,n,r,"TestLoadImage: timeout",!1,t),Pn.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else _i(2);e.G=0,e.j&&e.j.va(t),Io(e),co(e)}function Io(e){e.G=0,e.I=-1,e.j&&(0==Da(e.i).length&&0==e.l.length||(e.i.i.length=0,Qn(e.l),e.l.length=0),e.j.ua())}function Eo(e,t,n){var r=function(e){return e instanceof ra?ia(e):new ra(e,void 0)}(n);if(""!=r.i)t&&oa(r,t+"."+r.i),sa(r,r.m);else{var i=Pn.location;r=function(e,t,n,r){var i=new ra(null,void 0);return e&&aa(i,e),t&&oa(i,t),n&&sa(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&nr(e.aa,(function(e,t){ca(r,t,e)})),t=e.D,n=e.sa,t&&n&&ca(r,t,n),ca(r,"VER",e.ma),po(e,r),r}function To(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new Wa(new Ua({ib:!0})):new Wa(e.qa)).L=e.H,t}function So(){}function No(){if(cr&&!(10<=Number(xr)))throw Error("Environmental error: no available transport.")}function Co(e,t){Wr.call(this),this.g=new oo(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!$n(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!$n(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Po(this)}function Ao(e){Oi.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Ro(){Di.call(this),this.status=1}function Po(e){this.g=e}(Nn=Wa.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ri.g(),this.C=this.u?Ci(this.u):Ci(Ri),this.g.onreadystatechange=Vn(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void Ja(this,a)}e=n||"";var i=new Zi(this.headers);r&&Xi(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=Ya,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=Pn.FormData&&e instanceof Pn.FormData,!(0<=Hn($a,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{to(this),0<this.B&&((this.K=function(e){return cr&&wr()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Vn(this.pa,this)):this.A=ui(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){Ja(this,a)}},Nn.pa=function(){"undefined"!=typeof Rn&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Gr(this,"timeout"),this.abort(8))},Nn.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Gr(this,"complete"),Gr(this,"abort"),eo(this))},Nn.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),eo(this,!0)),Wa.Z.M.call(this)},Nn.Fa=function(){this.s||(this.F||this.v||this.l?Za(this):this.cb())},Nn.cb=function(){Za(this)},Nn.ba=function(){try{return 2<no(this)?this.g.status:-1}catch(Sa){return-1}},Nn.ga=function(){try{return this.g?this.g.responseText:""}catch(Sa){return""}},Nn.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Ha(t)}},Nn.Da=function(){return this.m},Nn.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(Nn=oo.prototype).ma=8,Nn.G=1,Nn.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Nn.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new ji(this,this.h,e,void 0),n=this.s;if(this.P&&(n?ar(n=rr(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=vo(this,t,r),ca(i=ia(this.F),"RID",e),ca(i,"CVER",22),this.D&&ca(i,"X-HTTP-Session-Id",this.D),po(this,i),this.o&&n&&io(i,this.o,n),Pa(this.i,t),this.Ra&&ca(i,"TYPE","init"),this.ja?(ca(i,"$req",r),ca(i,"SID","null"),t.$=!0,qi(t,i,null)):qi(t,i,r),this.G=2}}else 3==this.G&&(e?ho(this,e):0==this.l.length||Ca(this.i)||ho(this))},Nn.Ga=function(){if(this.u=null,ko(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Ei(Vn(this.bb,this),e)}},Nn.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,_i(10),uo(this),ko(this))},Nn.ab=function(){null!=this.v&&(this.v=null,uo(this),yo(this),_i(19))},Nn.jb=function(e){e?(this.h.info("Successfully pinged google.com"),_i(2)):(this.h.info("Failed to ping google.com"),_i(1))},(Nn=So.prototype).xa=function(){},Nn.wa=function(){},Nn.va=function(){},Nn.ua=function(){},Nn.Oa=function(){},No.prototype.g=function(e,t){return new Co(e,t)},zn(Co,Wr),Co.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),ni(Vn(e.hb,e,t))),_i(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Eo(e,null,e.W),fo(e)},Co.prototype.close=function(){so(this.g)},Co.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,lo(this.g,t)}else this.v?((t={}).__data__=$r(e),lo(this.g,t)):lo(this.g,e)},Co.prototype.M=function(){this.g.j=null,delete this.j,so(this.g),delete this.g,Co.Z.M.call(this)},zn(Ao,Oi),zn(Ro,Di),zn(Po,So),Po.prototype.xa=function(){Gr(this.g,"a")},Po.prototype.wa=function(e){Gr(this.g,new Ao(e))},Po.prototype.va=function(e){Gr(this.g,new Ro(e))},Po.prototype.ua=function(){Gr(this.g,"b")},No.prototype.createWebChannel=No.prototype.g,Co.prototype.send=Co.prototype.u,Co.prototype.open=Co.prototype.m,Co.prototype.close=Co.prototype.close,Ti.NO_ERROR=0,Ti.TIMEOUT=8,Ti.HTTP_ERROR=6,Si.COMPLETE="complete",Ai.EventType=Pi,Pi.OPEN="a",Pi.CLOSE="b",Pi.ERROR="c",Pi.MESSAGE="d",Wr.prototype.listen=Wr.prototype.N,Wa.prototype.listenOnce=Wa.prototype.O,Wa.prototype.getLastError=Wa.prototype.La,Wa.prototype.getLastErrorCode=Wa.prototype.Da,Wa.prototype.getStatus=Wa.prototype.ba,Wa.prototype.getResponseJson=Wa.prototype.Qa,Wa.prototype.getResponseText=Wa.prototype.ga,Wa.prototype.send=Wa.prototype.ea;var Oo=An.createWebChannelTransport=function(){return new No},Do=An.getStatEventTarget=function(){return ki()},Lo=An.ErrorCode=Ti,jo=An.EventType=Si,Mo=An.Event=yi,Fo=An.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Uo=An.FetchXmlHttpFactory=Ua,Vo=An.WebChannel=Ai,qo=An.XhrIo=Wa,zo=function(){function e(t){De(this,e),this.uid=t}return je(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();zo.UNAUTHENTICATED=new zo(null),zo.GOOGLE_CREDENTIALS=new zo("google-credentials-uid"),zo.FIRST_PARTY=new zo("first-party-uid"),zo.MOCK_USER=new zo("mock-user");var Bo="9.1.0",Ko=new Kt("@firebase/firestore");function Ho(){return Ko.logLevel}function Wo(e){if(Ko.logLevel<=Dt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map($o);Ko.debug.apply(Ko,["Firestore (".concat(Bo,"): ").concat(e)].concat(Se(i)))}}function Go(e){if(Ko.logLevel<=Dt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map($o);Ko.error.apply(Ko,["Firestore (".concat(Bo,"): ").concat(e)].concat(Se(i)))}}function Qo(e){if(Ko.logLevel<=Dt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map($o);Ko.warn.apply(Ko,["Firestore (".concat(Bo,"): ").concat(e)].concat(Se(i)))}}function $o(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Yo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Bo,") INTERNAL ASSERTION FAILED: ")+e;throw Go(t),new Error(t)}function Jo(e,t){e||Yo()}function Xo(e,t){return e}var Zo={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},es=function(e){Ue(n,e);var t=Ke(n);function n(e,r){var i;return De(this,n),(i=t.call(this,r)).code=e,i.message=r,i.name="FirebaseError",i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return je(n)}(We(Error)),ts=je((function e(){var t=this;De(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),ns=je((function e(t,n){De(this,e),this.user=n,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer ".concat(t)})),rs=function(){function e(){De(this,e)}return je(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(zo.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),is=function(){function e(t){De(this,e),this.token=t,this.changeListener=null}return je(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),as=function(){function e(t){De(this,e),this.t=t,this.currentUser=zo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return je(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new ts;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new ts,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(Pt(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){Wo("FirebaseCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(Wo("FirebaseCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ts)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Wo("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Jo("string"==typeof n.accessToken),new ns(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Jo(null===e||"string"==typeof e),new zo(e)}}]),e}(),os=function(){function e(t,n,r){De(this,e),this.h=t,this.l=n,this.m=r,this.type="FirstParty",this.user=zo.FIRST_PARTY}return je(e,[{key:"authHeaders",get:function(){var e={"X-Goog-AuthUser":this.l},t=this.h.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.m&&(e["X-Goog-Iam-Authorization-Token"]=this.m),e}}]),e}(),ss=function(){function e(t,n,r){De(this,e),this.h=t,this.l=n,this.m=r}return je(e,[{key:"getToken",value:function(){return Promise.resolve(new os(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(zo.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),us=function(){function e(t,n){var r=this;De(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.g(e)},this.p=function(e){return n.writeSequenceNumber(e)})}return je(e,[{key:"g",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.p&&this.p(e),e}}]),e}();function cs(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}us.T=-1;var ls=function(){function e(){De(this,e)}return je(e,null,[{key:"I",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=cs(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function fs(e,t){return e<t?-1:e>t?1:0}function hs(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function ds(e){return e+"\0"}var ps=function(){function e(t,n){if(De(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new es(Zo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new es(Zo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new es(Zo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new es(Zo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return je(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?fs(this.nanoseconds,e.nanoseconds):fs(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),vs=function(){function e(t){De(this,e),this.timestamp=t}return je(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new ps(0,0))}}]),e}();function ms(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ys(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function gs(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var ks=function(){function e(t,n,r){De(this,e),void 0===n?n=0:n>t.length&&Yo(),void 0===r?r=t.length-n:r>t.length-n&&Yo(),this.segments=t,this.offset=n,this.len=r}return je(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),ws=function(e){Ue(n,e);var t=Ke(n);function n(){return De(this,n),t.apply(this,arguments)}return je(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new es(Zo.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,Se(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(ks),bs=/^[_a-zA-Z][_a-zA-Z0-9]*$/,xs=function(e){Ue(n,e);var t=Ke(n);function n(){return De(this,n),t.apply(this,arguments)}return je(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return bs.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new es(Zo.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new es(Zo.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new es(Zo.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new es(Zo.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(ks),_s=function(){function e(t){De(this,e),this.fields=t,t.sort(xs.comparator)}return je(e,[{key:"covers",value:function(e){var t,n=Me(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return hs(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var Is=function(){function e(t){De(this,e),this.binaryString=t}return je(e,[{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return fs(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(t){return new e(atob(t))}},{key:"fromUint8Array",value:function(t){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t);return new e(n)}}]),e}();Is.EMPTY_BYTE_STRING=new Is("");var Es=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ts(e){if(Jo(!!e),"string"==typeof e){var t=0,n=Es.exec(e);if(Jo(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Ss(e.seconds),nanos:Ss(e.nanos)}}function Ss(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Ns(e){return"string"==typeof e?Is.fromBase64String(e):Is.fromUint8Array(e)}function Cs(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function As(e){var t=e.mapValue.fields.__previous_value__;return Cs(t)?As(t):t}function Rs(e){var t=Ts(e.mapValue.fields.__local_write_time__.timestampValue);return new ps(t.seconds,t.nanos)}function Ps(e){return null==e}function Os(e){return 0===e&&1/e==-1/0}function Ds(e){return"number"==typeof e&&Number.isInteger(e)&&!Os(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Ls=function(){function e(t){De(this,e),this.path=t}return je(e,[{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"isEqual",value:function(e){return null!==e&&0===ws.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(ws.fromString(t))}},{key:"fromName",value:function(t){return new e(ws.fromString(t).popFirst(5))}},{key:"comparator",value:function(e,t){return ws.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new ws(t.slice()))}}]),e}();function js(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Cs(e)?4:10:Yo()}function Ms(e,t){var n=js(e);if(n!==js(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Rs(e).isEqual(Rs(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Ts(e.timestampValue),r=Ts(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Ns(e.bytesValue).isEqual(Ns(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Ss(e.geoPointValue.latitude)===Ss(t.geoPointValue.latitude)&&Ss(e.geoPointValue.longitude)===Ss(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Ss(e.integerValue)===Ss(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Ss(e.doubleValue),r=Ss(t.doubleValue);return n===r?Os(n)===Os(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return hs(e.arrayValue.values||[],t.arrayValue.values||[],Ms);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ms(n)!==ms(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ms(n[i],r[i])))return!1;return!0}(e,t);default:return Yo()}}function Fs(e,t){return void 0!==(e.values||[]).find((function(e){return Ms(e,t)}))}function Us(e,t){var n=js(e),r=js(t);if(n!==r)return fs(n,r);switch(n){case 0:return 0;case 1:return fs(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Ss(e.integerValue||e.doubleValue),r=Ss(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Vs(e.timestampValue,t.timestampValue);case 4:return Vs(Rs(e),Rs(t));case 5:return fs(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Ns(e),r=Ns(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=fs(n[i],r[i]);if(0!==a)return a}return fs(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=fs(Ss(e.latitude),Ss(t.latitude));return 0!==n?n:fs(Ss(e.longitude),Ss(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Us(n[i],r[i]);if(a)return a}return fs(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=fs(r[o],a[o]);if(0!==s)return s;var u=Us(n[r[o]],i[a[o]]);if(0!==u)return u}return fs(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Yo()}}function Vs(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return fs(e,t);var n=Ts(e),r=Ts(t),i=fs(n.seconds,r.seconds);return 0!==i?i:fs(n.nanos,r.nanos)}function qs(e){return zs(e)}function zs(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Ts(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Ns(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Ls.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=Me(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=zs(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=Me(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(zs(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Yo();var t,n}function Bs(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Ks(e){return!!e&&"integerValue"in e}function Hs(e){return!!e&&"arrayValue"in e}function Ws(e){return!!e&&"nullValue"in e}function Gs(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Qs(e){return!!e&&"mapValue"in e}function $s(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return ys(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=$s(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=$s(e.arrayValue.values[r]);return n}return Object.assign({},e)}var Ys=function(){function e(t){De(this,e),this.value=t}return je(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Qs(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=$s(t)}},{key:"setAll",value:function(e){var t=this,n=xs.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=$s(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Qs(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Ms(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Qs(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){ys(t,(function(t,n){return e[t]=n}));var r,i=Me(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e($s(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Js(e){var t=[];return ys(e.fields,(function(e,n){var r=new xs([e]);if(Qs(n)){var i=Js(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=Me(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(r)})),new _s(t)}var Xs=function(){function e(t,n,r,i,a){De(this,e),this.key=t,this.documentType=n,this.version=r,this.data=i,this.documentState=a}return je(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Ys.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Ys.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"clone",value:function(){return new e(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,vs.min(),Ys.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Ys.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Ys.empty(),2)}}]),e}(),Zs=je((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;De(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.A=null}));function eu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Zs(e,t,n,r,i,a,o)}function tu(e){var t=Xo(e);if(null===t.A){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return function(e){return e.field.canonicalString()+e.op.toString()+qs(e.value)}(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Ps(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=pu(t.startAt)),t.endAt&&(n+="|ub:",n+=pu(t.endAt)),t.A=n}return t.A}function nu(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!mu(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!Ms(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!gu(e.startAt,t.startAt)&&gu(e.endAt,t.endAt)}function ru(e){return Ls.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var iu=function(e){Ue(n,e);var t=Ke(n);function n(e,r,i){var a;return De(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return je(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.P(Us(t,this.value)):null!==t&&js(this.value)===js(t)&&this.P(Us(t,this.value))}},{key:"P",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Yo()}}},{key:"v",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.R(e,t,r):new au(e,t,r):"array-contains"===t?new cu(e,r):"in"===t?new lu(e,r):"not-in"===t?new fu(e,r):"array-contains-any"===t?new hu(e,r):new n(e,t,r)}},{key:"R",value:function(e,t,n){return"in"===t?new ou(e,n):new su(e,n)}}]),n}(function(){return je((function e(){De(this,e)}))}());var au=function(e){Ue(n,e);var t=Ke(n);function n(e,r,i){var a;return De(this,n),(a=t.call(this,e,r,i)).key=Ls.fromName(i.referenceValue),a}return je(n,[{key:"matches",value:function(e){var t=Ls.comparator(e.key,this.key);return this.P(t)}}]),n}(iu),ou=function(e){Ue(n,e);var t=Ke(n);function n(e,r){var i;return De(this,n),(i=t.call(this,e,"in",r)).keys=uu("in",r),i}return je(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(iu),su=function(e){Ue(n,e);var t=Ke(n);function n(e,r){var i;return De(this,n),(i=t.call(this,e,"not-in",r)).keys=uu("not-in",r),i}return je(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(iu);function uu(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Ls.fromName(e.referenceValue)}))}var cu=function(e){Ue(n,e);var t=Ke(n);function n(e,r){return De(this,n),t.call(this,e,"array-contains",r)}return je(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Hs(t)&&Fs(t.arrayValue,this.value)}}]),n}(iu),lu=function(e){Ue(n,e);var t=Ke(n);function n(e,r){return De(this,n),t.call(this,e,"in",r)}return je(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Fs(this.value.arrayValue,t)}}]),n}(iu),fu=function(e){Ue(n,e);var t=Ke(n);function n(e,r){return De(this,n),t.call(this,e,"not-in",r)}return je(n,[{key:"matches",value:function(e){if(Fs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Fs(this.value.arrayValue,t)}}]),n}(iu),hu=function(e){Ue(n,e);var t=Ke(n);function n(e,r){return De(this,n),t.call(this,e,"array-contains-any",r)}return je(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Hs(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Fs(t.value.arrayValue,e)}))}}]),n}(iu),du=je((function e(t,n){De(this,e),this.position=t,this.before=n}));function pu(e){return"".concat(e.before?"b":"a",":").concat(e.position.map((function(e){return qs(e)})).join(","))}var vu=je((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";De(this,e),this.field=t,this.dir=n}));function mu(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function yu(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Ls.comparator(Ls.fromName(o.referenceValue),n.key):Us(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function gu(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Ms(e.position[n],t.position[n]))return!1;return!0}var ku=je((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;De(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.V=null,this.S=null,this.startAt,this.endAt}));function wu(e,t,n,r,i,a,o,s){return new ku(e,t,n,r,i,a,o,s)}function bu(e){return new ku(e)}function xu(e){return!Ps(e.limit)&&"F"===e.limitType}function _u(e){return!Ps(e.limit)&&"L"===e.limitType}function Iu(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Eu(e){var t,n=Me(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.v())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function Tu(e){return null!==e.collectionGroup}function Su(e){var t=Xo(e);if(null===t.V){t.V=[];var n=Eu(t),r=Iu(t);if(null!==n&&null===r)n.isKeyField()||t.V.push(new vu(n)),t.V.push(new vu(xs.keyField(),"asc"));else{var i,a=!1,o=Me(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.V.push(s),s.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.V.push(new vu(xs.keyField(),u))}}}return t.V}function Nu(e){var t=Xo(e);if(!t.S)if("F"===t.limitType)t.S=eu(t.path,t.collectionGroup,Su(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=Me(Su(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new vu(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var s=t.endAt?new du(t.endAt.position,!t.endAt.before):null,u=t.startAt?new du(t.startAt.position,!t.startAt.before):null;t.S=eu(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t.S}function Cu(e,t,n){return new ku(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Au(e,t){return nu(Nu(e),Nu(t))&&e.limitType===t.limitType}function Ru(e){return"".concat(tu(Nu(e)),"|lt:").concat(e.limitType)}function Pu(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(qs(t.value));var t})).join(", "),"]")),Ps(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: "+pu(e.startAt)),e.endAt&&(t+=", endAt: "+pu(e.endAt)),"Target(".concat(t,")")}(Nu(e)),"; limitType=").concat(e.limitType,")")}function Ou(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ls.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=Me(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=Me(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!yu(e.startAt,Su(e),t))&&(!e.endAt||!yu(e.endAt,Su(e),t))}(e,t)}function Du(e){return function(t,n){var r,i=!1,a=Me(Su(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=Lu(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function Lu(e,t,n){var r=e.field.isKeyField()?Ls.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Us(r,i):Yo()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Yo()}}function ju(e,t){if(e.D){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Os(t)?"-0":t}}function Mu(e){return{integerValue:""+e}}function Fu(e,t){return Ds(t)?Mu(t):ju(e,t)}var Uu=je((function e(){De(this,e),this._=void 0}));function Vu(e,t,n){return e instanceof Bu?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Ku?Hu(e,t):e instanceof Wu?Gu(e,t):function(e,t){var n=zu(e,t),r=$u(n)+$u(e.C);return Ks(n)&&Ks(e.C)?Mu(r):ju(e.N,r)}(e,t)}function qu(e,t,n){return e instanceof Ku?Hu(e,t):e instanceof Wu?Gu(e,t):n}function zu(e,t){return e instanceof Qu?Ks(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Bu=function(e){Ue(n,e);var t=Ke(n);function n(){return De(this,n),t.apply(this,arguments)}return je(n)}(Uu),Ku=function(e){Ue(n,e);var t=Ke(n);function n(e){var r;return De(this,n),(r=t.call(this)).elements=e,r}return je(n)}(Uu);function Hu(e,t){var n,r=Yu(t),i=Me(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Ms(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Wu=function(e){Ue(n,e);var t=Ke(n);function n(e){var r;return De(this,n),(r=t.call(this)).elements=e,r}return je(n)}(Uu);function Gu(e,t){var n,r=Yu(t),i=Me(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Ms(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Qu=function(e){Ue(n,e);var t=Ke(n);function n(e,r){var i;return De(this,n),(i=t.call(this)).N=e,i.C=r,i}return je(n)}(Uu);function $u(e){return Ss(e.integerValue||e.doubleValue)}function Yu(e){return Hs(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Ju=je((function e(t,n){De(this,e),this.field=t,this.transform=n}));var Xu=je((function e(t,n){De(this,e),this.version=t,this.transformResults=n})),Zu=function(){function e(t,n){De(this,e),this.updateTime=t,this.exists=n}return je(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function ec(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var tc=je((function e(){De(this,e)}));function nc(e,t,n){e instanceof sc?function(e,t,n){var r=e.value.clone(),i=lc(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof uc?function(e,t,n){if(ec(e.precondition,t)){var r=lc(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(cc(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function rc(e,t,n){e instanceof sc?function(e,t,n){if(ec(e.precondition,t)){var r=e.value.clone(),i=fc(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(oc(t),r).setHasLocalMutations()}}(e,t,n):e instanceof uc?function(e,t,n){if(ec(e.precondition,t)){var r=fc(e.fieldTransforms,n,t),i=t.data;i.setAll(cc(e)),i.setAll(r),t.convertToFoundDocument(oc(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){ec(e.precondition,t)&&t.convertToNoDocument(vs.min())}(e,t)}function ic(e,t){var n,r=null,i=Me(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=zu(a.transform,o||null);null!=s&&(null==r&&(r=Ys.empty()),r.set(a.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function ac(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&hs(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Ku&&t instanceof Ku||e instanceof Wu&&t instanceof Wu?hs(e.elements,t.elements,Ms):e instanceof Qu&&t instanceof Qu?Ms(e.C,t.C):e instanceof Bu&&t instanceof Bu}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function oc(e){return e.isFoundDocument()?e.version:vs.min()}var sc=function(e){Ue(n,e);var t=Ke(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return De(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return je(n)}(tc),uc=function(e){Ue(n,e);var t=Ke(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return De(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return je(n)}(tc);function cc(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function lc(e,t,n){var r=new Map;Jo(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,qu(o,s,n[i]))}return r}function fc(e,t,n){var r,i=new Map,a=Me(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,Vu(s,u,t))}}catch(c){a.e(c)}finally{a.f()}return i}var hc,dc,pc=function(e){Ue(n,e);var t=Ke(n);function n(e,r){var i;return De(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return je(n)}(tc),vc=function(e){Ue(n,e);var t=Ke(n);function n(e,r){var i;return De(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return je(n)}(tc),mc=je((function e(t){De(this,e),this.count=t}));function yc(e){switch(e){case Zo.OK:return Yo();case Zo.CANCELLED:case Zo.UNKNOWN:case Zo.DEADLINE_EXCEEDED:case Zo.RESOURCE_EXHAUSTED:case Zo.INTERNAL:case Zo.UNAVAILABLE:case Zo.UNAUTHENTICATED:return!1;case Zo.INVALID_ARGUMENT:case Zo.NOT_FOUND:case Zo.ALREADY_EXISTS:case Zo.PERMISSION_DENIED:case Zo.FAILED_PRECONDITION:case Zo.ABORTED:case Zo.OUT_OF_RANGE:case Zo.UNIMPLEMENTED:case Zo.DATA_LOSS:return!0;default:return Yo()}}function gc(e){if(void 0===e)return Go("GRPC error has no .code"),Zo.UNKNOWN;switch(e){case hc.OK:return Zo.OK;case hc.CANCELLED:return Zo.CANCELLED;case hc.UNKNOWN:return Zo.UNKNOWN;case hc.DEADLINE_EXCEEDED:return Zo.DEADLINE_EXCEEDED;case hc.RESOURCE_EXHAUSTED:return Zo.RESOURCE_EXHAUSTED;case hc.INTERNAL:return Zo.INTERNAL;case hc.UNAVAILABLE:return Zo.UNAVAILABLE;case hc.UNAUTHENTICATED:return Zo.UNAUTHENTICATED;case hc.INVALID_ARGUMENT:return Zo.INVALID_ARGUMENT;case hc.NOT_FOUND:return Zo.NOT_FOUND;case hc.ALREADY_EXISTS:return Zo.ALREADY_EXISTS;case hc.PERMISSION_DENIED:return Zo.PERMISSION_DENIED;case hc.FAILED_PRECONDITION:return Zo.FAILED_PRECONDITION;case hc.ABORTED:return Zo.ABORTED;case hc.OUT_OF_RANGE:return Zo.OUT_OF_RANGE;case hc.UNIMPLEMENTED:return Zo.UNIMPLEMENTED;case hc.DATA_LOSS:return Zo.DATA_LOSS;default:return Yo()}}(dc=hc||(hc={}))[dc.OK=0]="OK",dc[dc.CANCELLED=1]="CANCELLED",dc[dc.UNKNOWN=2]="UNKNOWN",dc[dc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dc[dc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dc[dc.NOT_FOUND=5]="NOT_FOUND",dc[dc.ALREADY_EXISTS=6]="ALREADY_EXISTS",dc[dc.PERMISSION_DENIED=7]="PERMISSION_DENIED",dc[dc.UNAUTHENTICATED=16]="UNAUTHENTICATED",dc[dc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dc[dc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dc[dc.ABORTED=10]="ABORTED",dc[dc.OUT_OF_RANGE=11]="OUT_OF_RANGE",dc[dc.UNIMPLEMENTED=12]="UNIMPLEMENTED",dc[dc.INTERNAL=13]="INTERNAL",dc[dc.UNAVAILABLE=14]="UNAVAILABLE",dc[dc.DATA_LOSS=15]="DATA_LOSS";var kc=function(){function e(t,n){De(this,e),this.comparator=t,this.root=n||bc.EMPTY}return je(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,bc.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,bc.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new wc(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new wc(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new wc(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new wc(this.root,e,this.comparator,!0)}}]),e}(),wc=function(){function e(t,n,r,i){De(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return je(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),bc=function(){function e(t,n,r,i,a){De(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return je(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Yo();if(this.right.isRed())throw Yo();var e=this.left.check();if(e!==this.right.check())throw Yo();return e+(this.isRed()?0:1)}}]),e}();bc.EMPTY=null,bc.RED=!0,bc.BLACK=!1,bc.EMPTY=new(function(){function e(){De(this,e),this.size=0}return je(e,[{key:"key",get:function(){throw Yo()}},{key:"value",get:function(){throw Yo()}},{key:"color",get:function(){throw Yo()}},{key:"left",get:function(){throw Yo()}},{key:"right",get:function(){throw Yo()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new bc(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var xc=function(){function e(t){De(this,e),this.comparator=t,this.data=new kc(this.comparator)}return je(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new _c(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new _c(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),_c=function(){function e(t){De(this,e),this.iter=t}return je(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}(),Ic=new kc(Ls.comparator);function Ec(){return Ic}var Tc=new kc(Ls.comparator);function Sc(){return Tc}var Nc=new kc(Ls.comparator);function Cc(){return Nc}var Ac=new xc(Ls.comparator);function Rc(){for(var e=Ac,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Pc=new xc(fs);function Oc(){return Pc}var Dc=function(){function e(t,n,r,i,a){De(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return je(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,Lc.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(vs.min(),r,Oc(),Ec(),Rc())}}]),e}(),Lc=function(){function e(t,n,r,i,a){De(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return je(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Is.EMPTY_BYTE_STRING,n,Rc(),Rc(),Rc())}}]),e}(),jc=je((function e(t,n,r,i){De(this,e),this.k=t,this.removedTargetIds=n,this.key=r,this.$=i})),Mc=je((function e(t,n){De(this,e),this.targetId=t,this.O=n})),Fc=je((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Is.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;De(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Uc=function(){function e(){De(this,e),this.F=0,this.M=zc(),this.L=Is.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}return je(e,[{key:"current",get:function(){return this.B}},{key:"resumeToken",get:function(){return this.L}},{key:"q",get:function(){return 0!==this.F}},{key:"K",get:function(){return this.U}},{key:"j",value:function(e){e.approximateByteSize()>0&&(this.U=!0,this.L=e)}},{key:"W",value:function(){var e=Rc(),t=Rc(),n=Rc();return this.M.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Yo()}})),new Lc(this.L,this.B,e,t,n)}},{key:"G",value:function(){this.U=!1,this.M=zc()}},{key:"H",value:function(e,t){this.U=!0,this.M=this.M.insert(e,t)}},{key:"J",value:function(e){this.U=!0,this.M=this.M.remove(e)}},{key:"Y",value:function(){this.F+=1}},{key:"X",value:function(){this.F-=1}},{key:"Z",value:function(){this.U=!0,this.B=!0}}]),e}(),Vc=function(){function e(t){De(this,e),this.tt=t,this.et=new Map,this.nt=Ec(),this.st=qc(),this.it=new xc(fs)}return je(e,[{key:"rt",value:function(e){var t,n=Me(e.k);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.$&&e.$.isFoundDocument()?this.ot(r,e.$):this.at(r,e.key,e.$)}}catch(s){n.e(s)}finally{n.f()}var i,a=Me(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.at(o,e.key,e.$)}}catch(s){a.e(s)}finally{a.f()}}},{key:"ct",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.ut(n);switch(e.state){case 0:t.ht(n)&&r.j(e.resumeToken);break;case 1:r.X(),r.q||r.G(),r.j(e.resumeToken);break;case 2:r.X(),r.q||t.removeTarget(n);break;case 3:t.ht(n)&&(r.Z(),r.j(e.resumeToken));break;case 4:t.ht(n)&&(t.lt(n),r.j(e.resumeToken));break;default:Yo()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.et.forEach((function(e,r){n.ht(r)&&t(r)}))}},{key:"ft",value:function(e){var t=e.targetId,n=e.O.count,r=this.dt(t);if(r){var i=r.target;if(ru(i))if(0===n){var a=new Ls(i.path);this.at(t,a,Xs.newNoDocument(a,vs.min()))}else Jo(1===n);else this.wt(t)!==n&&(this.lt(t),this.it=this.it.add(t))}}},{key:"_t",value:function(e){var t=this,n=new Map;this.et.forEach((function(r,i){var a=t.dt(i);if(a){if(r.current&&ru(a.target)){var o=new Ls(a.target.path);null!==t.nt.get(o)||t.gt(i,o)||t.at(i,o,Xs.newNoDocument(o,e))}r.K&&(n.set(i,r.W()),r.G())}}));var r=Rc();this.st.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.dt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))}));var i=new Dc(e,n,this.it,this.nt,r);return this.nt=Ec(),this.st=qc(),this.it=new xc(fs),i}},{key:"ot",value:function(e,t){if(this.ht(e)){var n=this.gt(e,t.key)?2:0;this.ut(e).H(t.key,n),this.nt=this.nt.insert(t.key,t),this.st=this.st.insert(t.key,this.yt(t.key).add(e))}}},{key:"at",value:function(e,t,n){if(this.ht(e)){var r=this.ut(e);this.gt(e,t)?r.H(t,1):r.J(t),this.st=this.st.insert(t,this.yt(t).delete(e)),n&&(this.nt=this.nt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.et.delete(e)}},{key:"wt",value:function(e){var t=this.ut(e).W();return this.tt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Y",value:function(e){this.ut(e).Y()}},{key:"ut",value:function(e){var t=this.et.get(e);return t||(t=new Uc,this.et.set(e,t)),t}},{key:"yt",value:function(e){var t=this.st.get(e);return t||(t=new xc(fs),this.st=this.st.insert(e,t)),t}},{key:"ht",value:function(e){var t=null!==this.dt(e);return t||Wo("WatchChangeAggregator","Detected inactive target",e),t}},{key:"dt",value:function(e){var t=this.et.get(e);return t&&t.q?null:this.tt.Et(e)}},{key:"lt",value:function(e){var t=this;this.et.set(e,new Uc),this.tt.getRemoteKeysForTarget(e).forEach((function(n){t.at(e,n,null)}))}},{key:"gt",value:function(e,t){return this.tt.getRemoteKeysForTarget(e).has(t)}}]),e}();function qc(){return new kc(Ls.comparator)}function zc(){return new kc(Ls.comparator)}var Bc={asc:"ASCENDING",desc:"DESCENDING"},Kc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Hc=je((function e(t,n){De(this,e),this.databaseId=t,this.D=n}));function Wc(e,t){return e.D?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Gc(e,t){return e.D?t.toBase64():t.toUint8Array()}function Qc(e,t){return Wc(e,t.toTimestamp())}function $c(e){return Jo(!!e),vs.fromTimestamp(function(e){var t=Ts(e);return new ps(t.seconds,t.nanos)}(e))}function Yc(e,t){return function(e){return new ws(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Jc(e){var t=ws.fromString(e);return Jo(xl(t)),t}function Xc(e,t){return Yc(e.databaseId,t.path)}function Zc(e,t){var n=Jc(t);if(n.get(1)!==e.databaseId.projectId)throw new es(Zo.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new es(Zo.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ls(rl(n))}function el(e,t){return Yc(e.databaseId,t)}function tl(e){var t=Jc(e);return 4===t.length?ws.emptyPath():rl(t)}function nl(e){return new ws(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function rl(e){return Jo(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function il(e,t,n){return{name:Xc(e,t),fields:n.value.mapValue.fields}}function al(e,t,n){var r=Zc(e,t.name),i=$c(t.updateTime),a=new Ys({mapValue:{fields:t.fields}}),o=Xs.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function ol(e,t){return"found"in t?function(e,t){Jo(!!t.found),t.found.name,t.found.updateTime;var n=Zc(e,t.found.name),r=$c(t.found.updateTime),i=new Ys({mapValue:{fields:t.found.fields}});return Xs.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){Jo(!!t.missing),Jo(!!t.readTime);var n=Zc(e,t.missing),r=$c(t.readTime);return Xs.newNoDocument(n,r)}(e,t):Yo()}function sl(e,t){var n;if(t instanceof sc)n={update:il(e,t.key,t.value)};else if(t instanceof pc)n={delete:Xc(e,t.key)};else if(t instanceof uc)n={update:il(e,t.key,t.data),updateMask:bl(t.fieldMask)};else{if(!(t instanceof vc))return Yo();n={verify:Xc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Bu)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ku)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Wu)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Qu)return{fieldPath:t.field.canonicalString(),increment:n.C};throw Yo()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Qc(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Yo()}(e,t.precondition)),n}function ul(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Zu.updateTime($c(e.updateTime)):void 0!==e.exists?Zu.exists(e.exists):Zu.none()}(t.currentDocument):Zu.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Jo("REQUEST_TIME"===t.setToServerValue),n=new Bu;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Ku(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Wu(i)}else"increment"in t?n=new Qu(e,t.increment):Yo();var a=xs.fromServerFormat(t.fieldPath);return new Ju(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Zc(e,t.update.name),a=new Ys({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new _s(t.map((function(e){return xs.fromServerFormat(e)})))}(t.updateMask);return new uc(i,a,o,n,r)}return new sc(i,a,n,r)}if(t.delete){var s=Zc(e,t.delete);return new pc(s,n)}if(t.verify){var u=Zc(e,t.verify);return new vc(u,n)}return Yo()}function cl(e,t){return{documents:[el(e,t.path)]}}function ll(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=el(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=el(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(Gs(e.value))return{unaryFilter:{field:yl(e.field),op:"IS_NAN"}};if(Ws(e.value))return{unaryFilter:{field:yl(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Gs(e.value))return{unaryFilter:{field:yl(e.field),op:"IS_NOT_NAN"}};if(Ws(e.value))return{unaryFilter:{field:yl(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yl(e.field),op:ml(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:yl(e.field),direction:vl(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o=function(e,t){return e.D||Ps(t)?t:{value:t}}(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=dl(t.startAt)),t.endAt&&(n.structuredQuery.endAt=dl(t.endAt)),n}function fl(e){var t=tl(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Jo(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=hl(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new vu(gl(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return Ps(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=pl(n.startAt));var l=null;return n.endAt&&(l=pl(n.endAt)),wu(t,i,s,o,u,"F",c,l)}function hl(e){return e?void 0!==e.unaryFilter?[wl(e)]:void 0!==e.fieldFilter?[kl(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return hl(e)})).reduce((function(e,t){return e.concat(t)})):Yo():[]}function dl(e){return{before:e.before,values:e.position}}function pl(e){var t=!!e.before,n=e.values||[];return new du(n,t)}function vl(e){return Bc[e]}function ml(e){return Kc[e]}function yl(e){return{fieldPath:e.canonicalString()}}function gl(e){return xs.fromServerFormat(e.fieldPath)}function kl(e){return iu.create(gl(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Yo()}}(e.fieldFilter.op),e.fieldFilter.value)}function wl(e){switch(e.unaryFilter.op){case"IS_NAN":var t=gl(e.unaryFilter.field);return iu.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=gl(e.unaryFilter.field);return iu.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=gl(e.unaryFilter.field);return iu.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=gl(e.unaryFilter.field);return iu.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Yo()}}function bl(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function xl(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function _l(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=El(t)),t=Il(e.get(n),t);return El(t)}function Il(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function El(e){return e+"\x01\x01"}function Tl(e){var t=e.length;if(Jo(t>=2),2===t)return Jo("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),ws.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Yo(),e.charAt(o+1)){case"\x01":var s=e.substring(a,o),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Yo()}a=o+2}return new ws(r)}var Sl=je((function e(t,n){De(this,e),this.seconds=t,this.nanoseconds=n})),Nl=je((function e(t,n,r){De(this,e),this.ownerId=t,this.allowTabSynchronization=n,this.leaseTimestampMs=r}));Nl.store="owner",Nl.key="owner";var Cl=je((function e(t,n,r){De(this,e),this.userId=t,this.lastAcknowledgedBatchId=n,this.lastStreamToken=r}));Cl.store="mutationQueues",Cl.keyPath="userId";var Al=je((function e(t,n,r,i,a){De(this,e),this.userId=t,this.batchId=n,this.localWriteTimeMs=r,this.baseMutations=i,this.mutations=a}));Al.store="mutations",Al.keyPath="batchId",Al.userMutationsIndex="userMutationsIndex",Al.userMutationsKeyPath=["userId","batchId"];var Rl=function(){function e(){De(this,e)}return je(e,null,[{key:"prefixForUser",value:function(e){return[e]}},{key:"prefixForPath",value:function(e,t){return[e,_l(t)]}},{key:"key",value:function(e,t,n){return[e,_l(t),n]}}]),e}();Rl.store="documentMutations",Rl.PLACEHOLDER=new Rl;var Pl=je((function e(t,n){De(this,e),this.path=t,this.readTime=n})),Ol=je((function e(t,n){De(this,e),this.path=t,this.version=n})),Dl=je((function e(t,n,r,i,a,o){De(this,e),this.unknownDocument=t,this.noDocument=n,this.document=r,this.hasCommittedMutations=i,this.readTime=a,this.parentPath=o}));Dl.store="remoteDocuments",Dl.readTimeIndex="readTimeIndex",Dl.readTimeIndexPath="readTime",Dl.collectionReadTimeIndex="collectionReadTimeIndex",Dl.collectionReadTimeIndexPath=["parentPath","readTime"];var Ll=je((function e(t){De(this,e),this.byteSize=t}));Ll.store="remoteDocumentGlobal",Ll.key="remoteDocumentGlobalKey";var jl=je((function e(t,n,r,i,a,o,s){De(this,e),this.targetId=t,this.canonicalId=n,this.readTime=r,this.resumeToken=i,this.lastListenSequenceNumber=a,this.lastLimboFreeSnapshotVersion=o,this.query=s}));jl.store="targets",jl.keyPath="targetId",jl.queryTargetsIndexName="queryTargetsIndex",jl.queryTargetsKeyPath=["canonicalId","targetId"];var Ml=je((function e(t,n,r){De(this,e),this.targetId=t,this.path=n,this.sequenceNumber=r}));Ml.store="targetDocuments",Ml.keyPath=["targetId","path"],Ml.documentTargetsIndex="documentTargetsIndex",Ml.documentTargetsKeyPath=["path","targetId"];var Fl=je((function e(t,n,r,i){De(this,e),this.highestTargetId=t,this.highestListenSequenceNumber=n,this.lastRemoteSnapshotVersion=r,this.targetCount=i}));Fl.key="targetGlobalKey",Fl.store="targetGlobal";var Ul=je((function e(t,n){De(this,e),this.collectionId=t,this.parent=n}));Ul.store="collectionParents",Ul.keyPath=["collectionId","parent"];var Vl=je((function e(t,n,r,i){De(this,e),this.clientId=t,this.updateTimeMs=n,this.networkEnabled=r,this.inForeground=i}));Vl.store="clientMetadata",Vl.keyPath="clientId";var ql=je((function e(t,n,r){De(this,e),this.bundleId=t,this.createTime=n,this.version=r}));ql.store="bundles",ql.keyPath="bundleId";var zl=je((function e(t,n,r){De(this,e),this.name=t,this.readTime=n,this.bundledQuery=r}));zl.store="namedQueries",zl.keyPath="name";var Bl=[Cl.store,Al.store,Rl.store,Dl.store,jl.store,Nl.store,Fl.store,Ml.store].concat([Vl.store]).concat([Ll.store]).concat([Ul.store]).concat([ql.store,zl.store]),Kl="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Hl=function(){function e(){De(this,e),this.onCommittedListeners=[]}return je(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),Wl=function(){function e(t){var n=this;De(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return je(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Yo(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=Me(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),Gl=function(){function e(t,n){var r=this;De(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.Tt=new ts,this.transaction.oncomplete=function(){r.Tt.resolve()},this.transaction.onabort=function(){n.error?r.Tt.reject(new Yl(t,n.error)):r.Tt.resolve()},this.transaction.onerror=function(e){var n=tf(e.target.error);r.Tt.reject(new Yl(t,n))}}return je(e,[{key:"It",get:function(){return this.Tt.promise}},{key:"abort",value:function(e){e&&this.Tt.reject(e),this.aborted||(Wo("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Xl(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Yl(n,t)}}}]),e}(),Ql=function(){function e(t,n,r){De(this,e),this.name=t,this.version=n,this.At=r,12.2===e.Rt(tt())&&Go("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return je(e,[{key:"Dt",value:function(){var e=Pt(jt().mark((function e(t){var n=this;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Wo("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Yl(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new es(Zo.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new es(Zo.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Yl(t,n))},i.onupgradeneeded=function(e){Wo("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.At.Ct(t,i.transaction,e.oldVersion,n.version).next((function(){Wo("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.Nt&&(this.db.onversionchange=function(e){return n.Nt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"xt",value:function(e){this.Nt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=Pt(jt().mark((function e(t,n,r,i){var a,o,s,u,c=this;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(jt().mark((function e(){var n,o;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Dt(t);case 2:return c.db=e.sent,n=Gl.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).catch((function(e){return n.abort(e),Wl.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.It;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(s=e.t0)){e.next=8;break}return e.abrupt("return",s.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),u="FirebaseError"!==e.t1.name&&o<3,Wo("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",u),this.close(),u){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Wo("SimpleDb","Removing database:",e),Zl(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"bt",value:function(){if(!st())return!1;if(e.Pt())return!0;var t=tt(),n=e.Rt(t),r=0<n&&n<10,i=e.vt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"Pt",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyCEm-Kh8LK75bqEPmolddxZytUbuND9aFU",REACT_APP_APP_ID:"1:950963295109:web:933e9afe0fecd517cfeaec",REACT_APP_AUTH_DOMAIN:"tecno-plus-e4445.firebaseapp.com",REACT_APP_MESSAGING_SENDER_ID:"950963295109",REACT_APP_PROJECT_ID:"tecno-plus-e4445",REACT_APP_STORAGE_BUCKET:"tecno-plus-e4445.appspot.com"})||void 0===e?void 0:e.Vt)}},{key:"St",value:function(e,t){return e.store(t)}},{key:"Rt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"vt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),$l=function(){function e(t){De(this,e),this.kt=t,this.$t=!1,this.Ot=null}return je(e,[{key:"isDone",get:function(){return this.$t}},{key:"Ft",get:function(){return this.Ot}},{key:"cursor",set:function(e){this.kt=e}},{key:"done",value:function(){this.$t=!0}},{key:"Mt",value:function(e){this.Ot=e}},{key:"delete",value:function(){return Zl(this.kt.delete())}}]),e}(),Yl=function(e){Ue(n,e);var t=Ke(n);function n(e,r){var i;return De(this,n),(i=t.call(this,Zo.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return je(n)}(es);function Jl(e){return"IndexedDbTransactionError"===e.name}var Xl=function(){function e(t){De(this,e),this.store=t}return je(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Wo("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Wo("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Zl(n)}},{key:"add",value:function(e){return Wo("SimpleDb","ADD",this.store.name,e,e),Zl(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Zl(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Wo("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Wo("SimpleDb","DELETE",this.store.name,e),Zl(this.store.delete(e))}},{key:"count",value:function(){return Wo("SimpleDb","COUNT",this.store.name),Zl(this.store.count())}},{key:"Lt",value:function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.Bt(n,(function(e,t){r.push(t)})).next((function(){return r}))}},{key:"Ut",value:function(e,t){Wo("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.qt=!1;var r=this.cursor(n);return this.Bt(r,(function(e,t,n){return n.delete()}))}},{key:"Kt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Bt(r,t)}},{key:"jt",value:function(e){var t=this.cursor({});return new Wl((function(n,r){t.onerror=function(e){var t=tf(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Bt",value:function(e,t){var n=[];return new Wl((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new $l(i),o=t(i.primaryKey,i.value,a);if(o instanceof Wl){var s=o.catch((function(e){return a.done(),Wl.reject(e)}));n.push(s)}a.isDone?r():null===a.Ft?i.continue():i.continue(a.Ft)}else r()}})).next((function(){return Wl.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.qt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Zl(e){return new Wl((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=tf(e.target.error);n(t)}}))}var ef=!1;function tf(e){var t=Ql.Rt(tt());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new es("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return ef||(ef=!0,setTimeout((function(){throw r}),0)),r}}return e}var nf=function(e){Ue(n,e);var t=Ke(n);function n(e,r){var i;return De(this,n),(i=t.call(this)).Qt=e,i.currentSequenceNumber=r,i}return je(n)}(Hl);function rf(e,t){var n=Xo(e);return Ql.St(n.Qt,t)}var af=function(){function e(t,n,r,i){De(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return je(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&nc(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=Me(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&rc(r,e,this.localWriteTime)}}catch(s){n.e(s)}finally{n.f()}var i,a=Me(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&rc(o,e,this.localWriteTime)}}catch(s){a.e(s)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(vs.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Rc())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&hs(this.mutations,e.mutations,(function(e,t){return ac(e,t)}))&&hs(this.baseMutations,e.baseMutations,(function(e,t){return ac(e,t)}))}}]),e}(),of=function(){function e(t,n,r,i){De(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return je(e,null,[{key:"from",value:function(t,n,r){Jo(t.mutations.length===r.length);for(var i=Cc(),a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),sf=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:vs.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:vs.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Is.EMPTY_BYTE_STRING;De(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return je(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),uf=je((function e(t){De(this,e),this.Wt=t}));function cf(e,t){if(t.document)return al(e.Wt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=Ls.fromSegments(t.noDocument.path),r=pf(t.noDocument.readTime),i=Xs.newNoDocument(n,r);return t.hasCommittedMutations?i.setHasCommittedMutations():i}if(t.unknownDocument){var a=Ls.fromSegments(t.unknownDocument.path),o=pf(t.unknownDocument.version);return Xs.newUnknownDocument(a,o)}return Yo()}function lf(e,t,n){var r=ff(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){var a=function(e,t){return{name:Xc(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Wc(e,t.version.toTimestamp())}}(e.Wt,t),o=t.hasCommittedMutations;return new Dl(null,null,a,o,r,i)}if(t.isNoDocument()){var s=t.key.path.toArray(),u=df(t.version),c=t.hasCommittedMutations;return new Dl(null,new Pl(s,u),null,c,r,i)}if(t.isUnknownDocument()){var l=t.key.path.toArray(),f=df(t.version);return new Dl(new Ol(l,f),null,null,!0,r,i)}return Yo()}function ff(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function hf(e){var t=new ps(e[0],e[1]);return vs.fromTimestamp(t)}function df(e){var t=e.toTimestamp();return new Sl(t.seconds,t.nanoseconds)}function pf(e){var t=new ps(e.seconds,e.nanoseconds);return vs.fromTimestamp(t)}function vf(e,t){for(var n=(t.baseMutations||[]).map((function(t){return ul(e.Wt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return ul(e.Wt,t)})),s=ps.fromMillis(t.localWriteTimeMs);return new af(t.batchId,s,n,o)}function mf(e){var t,n,r=pf(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?pf(e.lastLimboFreeSnapshotVersion):vs.min();return void 0!==e.query.documents?(Jo(1===(n=e.query).documents.length),t=Nu(bu(tl(n.documents[0])))):t=function(e){return Nu(fl(e))}(e.query),new sf(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Is.fromBase64String(e.resumeToken))}function yf(e,t){var n,r=df(t.snapshotVersion),i=df(t.lastLimboFreeSnapshotVersion);n=ru(t.target)?cl(e.Wt,t.target):ll(e.Wt,t.target);var a=t.resumeToken.toBase64();return new jl(t.targetId,tu(t.target),r,a,t.sequenceNumber,i,n)}function gf(e){var t=fl({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Cu(t,t.limit,"L"):t}var kf=function(){function e(){De(this,e)}return je(e,[{key:"getBundleMetadata",value:function(e,t){return wf(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:pf(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return wf(e).put({bundleId:(n=t).id,createTime:df($c(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return bf(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:gf(t.bundledQuery),readTime:pf(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return bf(e).put(function(e){return{name:e.name,readTime:df($c(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function wf(e){return rf(e,ql.store)}function bf(e){return rf(e,zl.store)}var xf=function(){function e(){De(this,e),this.Gt=new _f}return je(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Gt.add(t),Wl.resolve()}},{key:"getCollectionParents",value:function(e,t){return Wl.resolve(this.Gt.getEntries(t))}}]),e}(),_f=function(){function e(){De(this,e),this.index={}}return je(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new xc(ws.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new xc(ws.comparator)).toArray()}}]),e}(),If=function(){function e(){De(this,e),this.zt=new _f}return je(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.zt.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.zt.add(t)}));var a={collectionId:r,parent:_l(i)};return Ef(e).put(a)}return Wl.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[ds(t),""],!1,!0);return Ef(e).Lt(r).next((function(e){var r,i=Me(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Tl(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}}]),e}();function Ef(e){return rf(e,Ul.store)}var Tf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Sf=function(){function e(t,n,r){De(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return je(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Nf(e,t,n){var r=e.store(Al.store),i=e.store(Rl.store),a=[],o=IDBKeyRange.only(n.batchId),s=0,u=r.Kt({range:o},(function(e,t,n){return s++,n.delete()}));a.push(u.next((function(){Jo(1===s)})));var c,l=[],f=Me(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Rl.key(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Wl.waitFor(a).next((function(){return l}))}function Cf(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Yo();t=e.noDocument}return JSON.stringify(t).length}Sf.DEFAULT_COLLECTION_PERCENTILE=10,Sf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sf.DEFAULT=new Sf(41943040,Sf.DEFAULT_COLLECTION_PERCENTILE,Sf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sf.DISABLED=new Sf(-1,0,0);var Af=function(){function e(t,n,r,i){De(this,e),this.userId=t,this.N=n,this.Ht=r,this.referenceDelegate=i,this.Jt={}}return je(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Pf(e).Kt({index:Al.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Of(e),o=Pf(e);return o.add({}).next((function(s){Jo("number"==typeof s);var u,c=new af(s,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return sl(e.Wt,t)})),i=n.mutations.map((function(t){return sl(e.Wt,t)}));return new Al(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.N,i.userId,c),f=[],h=new xc((function(e,t){return fs(e.canonicalString(),t.canonicalString())})),d=Me(r);try{for(d.s();!(u=d.n()).done;){var p=u.value,v=Rl.key(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,Rl.PLACEHOLDER))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.Ht.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Jt[s]=c.keys()})),Wl.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Pf(e).get(t).next((function(e){return e?(Jo(e.userId===n.userId),vf(n.N,e)):null}))}},{key:"Xt",value:function(e,t){var n=this;return this.Jt[t]?Wl.resolve(this.Jt[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Jt[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Pf(e).Kt({index:Al.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(Jo(t.batchId>=r),a=vf(n.N,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Pf(e).Kt({index:Al.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Pf(e).Lt(Al.userMutationsIndex,n).next((function(e){return e.map((function(e){return vf(t.N,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Rl.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Of(e).Kt({range:i},(function(r,i,o){var s=Ee(r,3),u=s[0],c=s[1],l=s[2],f=Tl(c);if(u===n.userId&&t.path.isEqual(f))return Pf(e).get(l).next((function(e){if(!e)throw Yo();Jo(e.userId===n.userId),a.push(vf(n.N,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new xc(fs),i=[];return t.forEach((function(t){var a=Rl.prefixForPath(n.userId,t.path),o=IDBKeyRange.lowerBound(a),s=Of(e).Kt({range:o},(function(e,i,a){var o=Ee(e,3),s=o[0],u=o[1],c=o[2],l=Tl(u);s===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(s)})),Wl.waitFor(i).next((function(){return n.Zt(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Rl.prefixForPath(this.userId,r),o=IDBKeyRange.lowerBound(a),s=new xc(fs);return Of(e).Kt({range:o},(function(e,t,a){var o=Ee(e,3),u=o[0],c=o[1],l=o[2],f=Tl(c);u===n.userId&&r.isPrefixOf(f)?f.length===i&&(s=s.add(l)):a.done()})).next((function(){return n.Zt(e,s)}))}},{key:"Zt",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Pf(e).get(t).next((function(e){if(null===e)throw Yo();Jo(e.userId===n.userId),r.push(vf(n.N,e))})))})),Wl.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Nf(e.Qt,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.te(t.batchId)})),Wl.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"te",value:function(e){delete this.Jt[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Wl.resolve();var r=IDBKeyRange.lowerBound(Rl.prefixForUser(t.userId)),i=[];return Of(e).Kt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Tl(e[1]);i.push(a)}else r.done()})).next((function(){Jo(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Rf(e,this.userId,t)}},{key:"ee",value:function(e){var t=this;return Df(e).get(this.userId).next((function(e){return e||new Cl(t.userId,-1,"")}))}}],[{key:"Yt",value:function(t,n,r,i){return Jo(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Rf(e,t,n){var r=Rl.prefixForPath(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Of(e).Kt({range:a,qt:!0},(function(e,n,r){var a=Ee(e,3),s=a[0],u=a[1];a[2];s===t&&u===i&&(o=!0),r.done()})).next((function(){return o}))}function Pf(e){return rf(e,Al.store)}function Of(e){return rf(e,Rl.store)}function Df(e){return rf(e,Cl.store)}var Lf=function(){function e(t){De(this,e),this.ne=t}return je(e,[{key:"next",value:function(){return this.ne+=2,this.ne}}],[{key:"se",value:function(){return new e(0)}},{key:"ie",value:function(){return new e(-1)}}]),e}(),jf=function(){function e(t,n){De(this,e),this.referenceDelegate=t,this.N=n}return je(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.re(e).next((function(n){var r=new Lf(n.highestTargetId);return n.highestTargetId=r.next(),t.oe(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.re(e).next((function(e){return vs.fromTimestamp(new ps(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.re(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.re(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.oe(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.ae(e,t).next((function(){return n.re(e).next((function(r){return r.targetCount+=1,n.ce(t,r),n.oe(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.ae(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Mf(e).delete(t.targetId)})).next((function(){return n.re(e)})).next((function(t){return Jo(t.targetCount>0),t.targetCount-=1,n.oe(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Mf(e).Kt((function(o,s){var u=mf(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,a.push(r.removeTargetData(e,u)))})).next((function(){return Wl.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Mf(e).Kt((function(e,n){var r=mf(n);t(r)}))}},{key:"re",value:function(e){return Ff(e).get(Fl.key).next((function(e){return Jo(null!==e),e}))}},{key:"oe",value:function(e,t){return Ff(e).put(Fl.key,t)}},{key:"ae",value:function(e,t){return Mf(e).put(yf(this.N,t))}},{key:"ce",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.re(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=tu(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Mf(e).Kt({range:r,index:jl.queryTargetsIndexName},(function(e,n,r){var a=mf(n);nu(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Uf(e);return t.forEach((function(t){var o=_l(t.path);i.push(a.put(new Ml(n,o))),i.push(r.referenceDelegate.addReference(e,n,t))})),Wl.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Uf(e);return Wl.forEach(t,(function(t){var a=_l(t.path);return Wl.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Uf(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Uf(e),i=Rc();return r.Kt({range:n,qt:!0},(function(e,t,n){var r=Tl(e[1]),a=new Ls(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=_l(t.path),r=IDBKeyRange.bound([n],[ds(n)],!1,!0),i=0;return Uf(e).Kt({index:Ml.documentTargetsIndex,qt:!0,range:r},(function(e,t,n){var r=Ee(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return Mf(e).get(t).next((function(e){return e?mf(e):null}))}}]),e}();function Mf(e){return rf(e,jl.store)}function Ff(e){return rf(e,Fl.store)}function Uf(e){return rf(e,Ml.store)}function Vf(e){return qf.apply(this,arguments)}function qf(){return(qf=Pt(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Zo.FAILED_PRECONDITION&&t.message===Kl){e.next=2;break}throw t;case 2:Wo("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zf(e,t){var n=Ee(e,2),r=n[0],i=n[1],a=Ee(t,2),o=a[0],s=a[1],u=fs(r,o);return 0===u?fs(i,s):u}var Bf=function(){function e(t){De(this,e),this.ue=t,this.buffer=new xc(zf),this.he=0}return je(e,[{key:"le",value:function(){return++this.he}},{key:"fe",value:function(e){var t=[e,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();zf(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Kf=function(){function e(t,n){De(this,e),this.garbageCollector=t,this.asyncQueue=n,this.de=!1,this.we=null}return je(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(e)}},{key:"stop",value:function(){this.we&&(this.we.cancel(),this.we=null)}},{key:"started",get:function(){return null!==this.we}},{key:"_e",value:function(e){var t=this,n=this.de?3e5:6e4;Wo("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,Pt(jt().mark((function n(){return jt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.we=null,t.de=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!Jl(n.t0)){n.next=12;break}Wo("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,Vf(n.t0);case 14:return n.next=16,t._e(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),Hf=function(){function e(t,n){De(this,e),this.me=t,this.params=n}return je(e,[{key:"calculateTargetCount",value:function(e,t){return this.me.ge(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Wl.resolve(us.T);var r=new Bf(t);return this.me.forEachTarget(e,(function(e){return r.fe(e.sequenceNumber)})).next((function(){return n.me.ye(e,(function(e){return r.fe(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.me.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.me.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Wo("LruGarbageCollector","Garbage collection skipped; disabled"),Wl.resolve(Tf)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Wo("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Tf):n.pe(e,t)}))}},{key:"getCacheSize",value:function(e){return this.me.getCacheSize(e)}},{key:"pe",value:function(e,t){var n,r,i,a,o,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Wo("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),Ho()<=Dt.DEBUG&&Wo("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(s-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(u-s)+"ms\n"+"Total Duration: ".concat(u-l,"ms")),Wl.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),Wf=function(){function e(t,n){De(this,e),this.db=t,this.garbageCollector=function(e,t){return new Hf(e,t)}(this,n)}return je(e,[{key:"ge",value:function(e){var t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Ee",value:function(e){var t=0;return this.ye(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"ye",value:function(e,t){return this.Te(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Gf(e,n)}},{key:"removeReference",value:function(e,t,n){return Gf(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Gf(e,t)}},{key:"Ie",value:function(e,t){return function(e,t){var n=!1;return Df(e).jt((function(r){return Rf(e,r,t).next((function(e){return e&&(n=!0),Wl.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Te(e,(function(o,s){if(s<=t){var u=n.Ie(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o),Uf(e).delete([0,_l(o.path)])}))}));i.push(u)}})).next((function(){return Wl.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Gf(e,t)}},{key:"Te",value:function(e,t){var n,r=Uf(e),i=us.T;return r.Kt({index:Ml.documentTargetsIndex},(function(e,r){var a=Ee(e,2),o=a[0],s=(a[1],r.path),u=r.sequenceNumber;0===o?(i!==us.T&&t(new Ls(Tl(n)),i),i=u,n=s):i=us.T})).next((function(){i!==us.T&&t(new Ls(Tl(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Gf(e,t){return Uf(e).put(function(e,t){return new Ml(0,_l(e.path),t)}(t,e.currentSequenceNumber))}var Qf=function(){function e(t,n){De(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={}}return je(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=Me(n);try{for(i.s();!(r=i.n()).done;){var a=Ee(r.value,2),o=a[0],s=a[1];if(this.equalsFn(o,e))return s}}catch(u){i.e(u)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1}},{key:"forEach",value:function(e){ys(this.inner,(function(t,n){var r,i=Me(n);try{for(i.s();!(r=i.n()).done;){var a=Ee(r.value,2),o=a[0],s=a[1];e(o,s)}}catch(u){i.e(u)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return gs(this.inner)}}]),e}(),$f=function(){function e(){De(this,e),this.changes=new Qf((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return je(e,[{key:"getReadTime",value:function(e){var t=this.changes.get(e);return t?t.readTime:vs.min()}},{key:"addEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}},{key:"removeEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.assertNotApplied(),this.changes.set(e,{document:Xs.newInvalidDocument(e),readTime:t})}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Wl.resolve(n.document):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Yf=function(){function e(t,n){De(this,e),this.N=t,this.Ht=n}return je(e,[{key:"addEntry",value:function(e,t,n){return Zf(e).put(eh(t),n)}},{key:"removeEntry",value:function(e,t){var n=Zf(e),r=eh(t);return n.delete(r)}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Ae(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this;return Zf(e).get(eh(t)).next((function(e){return n.Re(t,e)}))}},{key:"be",value:function(e,t){var n=this;return Zf(e).get(eh(t)).next((function(e){return{document:n.Re(t,e),size:Cf(e)}}))}},{key:"getEntries",value:function(e,t){var n=this,r=Ec();return this.Pe(e,t,(function(e,t){var i=n.Re(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"ve",value:function(e,t){var n=this,r=Ec(),i=new kc(Ls.comparator);return this.Pe(e,t,(function(e,t){var a=n.Re(e,t);r=r.insert(e,a),i=i.insert(e,Cf(t))})).next((function(){return{documents:r,Ve:i}}))}},{key:"Pe",value:function(e,t,n){if(t.isEmpty())return Wl.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),a=i.getNext();return Zf(e).Kt({range:r},(function(e,t,r){for(var o=Ls.fromSegments(e);a&&Ls.comparator(a,o)<0;)n(a,null),a=i.getNext();a&&a.isEqual(o)&&(n(a,t),a=i.hasNext()?i.getNext():null),a?r.Mt(a.path.toArray()):r.done()})).next((function(){for(;a;)n(a,null),a=i.hasNext()?i.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){var r=this,i=Ec(),a=t.path.length+1,o={};if(n.isEqual(vs.min())){var s=t.path.toArray();o.range=IDBKeyRange.lowerBound(s)}else{var u=t.path.toArray(),c=ff(n);o.range=IDBKeyRange.lowerBound([u,c],!0),o.index=Dl.collectionReadTimeIndex}return Zf(e).Kt(o,(function(e,n,o){if(e.length===a){var s=cf(r.N,n);t.path.isPrefixOf(s.key.path)?Ou(t,s)&&(i=i.insert(s.key,s)):o.done()}})).next((function(){return i}))}},{key:"newChangeBuffer",value:function(e){return new Jf(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Xf(e).get(Ll.key).next((function(e){return Jo(!!e),e}))}},{key:"Ae",value:function(e,t){return Xf(e).put(Ll.key,t)}},{key:"Re",value:function(e,t){if(t){var n=cf(this.N,t);if(!n.isNoDocument()||!n.version.isEqual(vs.min()))return n}return Xs.newInvalidDocument(e)}}]),e}(),Jf=function(e){Ue(n,e);var t=Ke(n);function n(e,r){var i;return De(this,n),(i=t.call(this)).Se=e,i.trackRemovals=r,i.De=new Qf((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return je(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new xc((function(e,t){return fs(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var s=t.De.get(a);if(o.document.isValidDocument()){var u=lf(t.Se.N,o.document,t.getReadTime(a));i=i.add(a.path.popLast());var c=Cf(u);r+=c-s,n.push(t.Se.addEntry(e,a,u))}else if(r-=s,t.trackRemovals){var l=lf(t.Se.N,Xs.newNoDocument(a,vs.min()),t.getReadTime(a));n.push(t.Se.addEntry(e,a,l))}else n.push(t.Se.removeEntry(e,a))})),i.forEach((function(r){n.push(t.Se.Ht.addToCollectionParentIndex(e,r))})),n.push(this.Se.updateMetadata(e,r)),Wl.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Se.be(e,t).next((function(e){return n.De.set(t,e.size),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Se.ve(e,t).next((function(e){var t=e.documents;return e.Ve.forEach((function(e,t){n.De.set(e,t)})),t}))}}]),n}($f);function Xf(e){return rf(e,Ll.store)}function Zf(e){return rf(e,Dl.store)}function eh(e){return e.path.toArray()}var th=function(){function e(t){De(this,e),this.N=t}return je(e,[{key:"Ct",value:function(e,t,n,r){var i=this;Jo(n<r&&n>=0&&r<=11);var a=new Gl("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(Nl.store)}(e),function(e){e.createObjectStore(Cl.store,{keyPath:Cl.keyPath}),e.createObjectStore(Al.store,{keyPath:Al.keyPath,autoIncrement:!0}).createIndex(Al.userMutationsIndex,Al.userMutationsKeyPath,{unique:!0}),e.createObjectStore(Rl.store)}(e),nh(e),function(e){e.createObjectStore(Dl.store)}(e));var o=Wl.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(Ml.store),e.deleteObjectStore(jl.store),e.deleteObjectStore(Fl.store)}(e),nh(e)),o=o.next((function(){return function(e){var t=e.store(Fl.store),n=new Fl(0,0,vs.min().toTimestamp(),0);return t.put(Fl.key,n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store(Al.store).Lt().next((function(n){e.deleteObjectStore(Al.store),e.createObjectStore(Al.store,{keyPath:Al.keyPath,autoIncrement:!0}).createIndex(Al.userMutationsIndex,Al.userMutationsKeyPath,{unique:!0});var r=t.store(Al.store),i=n.map((function(e){return r.put(e)}));return Wl.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore(Vl.store,{keyPath:Vl.keyPath})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Ce(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore(Ll.store)}(e),i.Ne(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.xe(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.ke(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(Dl.store);t.createIndex(Dl.readTimeIndex,Dl.readTimeIndexPath,{unique:!1}),t.createIndex(Dl.collectionReadTimeIndex,Dl.collectionReadTimeIndexPath,{unique:!1})}(t)}))),n<10&&r>=10&&(o=o.next((function(){return i.$e(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore(ql.store,{keyPath:ql.keyPath})}(e),function(e){e.createObjectStore(zl.store,{keyPath:zl.keyPath})}(e)}))),o}},{key:"Ne",value:function(e){var t=0;return e.store(Dl.store).Kt((function(e,n){t+=Cf(n)})).next((function(){var n=new Ll(t);return e.store(Ll.store).put(Ll.key,n)}))}},{key:"Ce",value:function(e){var t=this,n=e.store(Cl.store),r=e.store(Al.store);return n.Lt().next((function(n){return Wl.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Lt(Al.userMutationsIndex,i).next((function(r){return Wl.forEach(r,(function(r){Jo(r.userId===n.userId);var i=vf(t.N,r);return Nf(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"xe",value:function(e){var t=e.store(Ml.store),n=e.store(Dl.store);return e.store(Fl.store).get(Fl.key).next((function(e){var r=[];return n.Kt((function(n,i){var a=new ws(n),o=function(e){return[0,_l(e)]}(a);r.push(t.get(o).next((function(n){return n?Wl.resolve():function(n){return t.put(new Ml(0,_l(n),e.highestListenSequenceNumber))}(a)})))})).next((function(){return Wl.waitFor(r)}))}))}},{key:"ke",value:function(e,t){e.createObjectStore(Ul.store,{keyPath:Ul.keyPath});var n=t.store(Ul.store),r=new _f,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:_l(i)})}};return t.store(Dl.store).Kt({qt:!0},(function(e,t){var n=new ws(e);return i(n.popLast())})).next((function(){return t.store(Rl.store).Kt({qt:!0},(function(e,t){var n=Ee(e,3),r=(n[0],n[1]),a=(n[2],Tl(r));return i(a.popLast())}))}))}},{key:"$e",value:function(e){var t=this,n=e.store(jl.store);return n.Kt((function(e,r){var i=mf(r),a=yf(t.N,i);return n.put(a)}))}}]),e}();function nh(e){e.createObjectStore(Ml.store,{keyPath:Ml.keyPath}).createIndex(Ml.documentTargetsIndex,Ml.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(jl.store,{keyPath:jl.keyPath}).createIndex(jl.queryTargetsIndexName,jl.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(Fl.store)}var rh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ih=function(){function e(t,n,r,i,a,o,s,u,c,l){if(De(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Oe=a,this.window=o,this.document=s,this.Fe=c,this.Me=l,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=function(e){return Promise.resolve()},!e.bt())throw new es(Zo.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Wf(this,i),this.We=n+"main",this.N=new uf(u),this.Ge=new Ql(this.We,11,new th(this.N)),this.ze=new jf(this.referenceDelegate,this.N),this.Ht=new If,this.He=function(e,t){return new Yf(e,t)}(this.N,this.Ht),this.Je=new kf,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===l&&Go("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return je(e,[{key:"start",value:function(){var e=this;return this.Xe().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new es(Zo.FAILED_PRECONDITION,rh);return e.Ze(),e.tn(),e.en(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.ze.getHighestSequenceNumber(t)}))})).then((function(t){e.Le=new us(t,e.Fe)})).then((function(){e.Be=!0})).catch((function(t){return e.Ge&&e.Ge.close(),Promise.reject(t)}))}},{key:"nn",value:function(e){var t=this;return this.Qe=function(){var n=Pt(jt().mark((function n(r){return jt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.Ge.xt(function(){var t=Pt(jt().mark((function t(n){return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget(Pt(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.Xe();case 4:case"end":return e.stop()}}),e)})))))}},{key:"Xe",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return oh(t).put(new Vl(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.sn(t).next((function(t){t||(e.isPrimary=!1,e.Oe.enqueueRetryable((function(){return e.Qe(!1)})))}))})).next((function(){return e.rn(t)})).next((function(n){return e.isPrimary&&!n?e.on(t).next((function(){return!1})):!!n&&e.an(t).next((function(){return!0}))}))})).catch((function(t){if(Jl(t))return Wo("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Wo("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Oe.enqueueRetryable((function(){return e.Qe(t)})),e.isPrimary=t}))}},{key:"sn",value:function(e){var t=this;return ah(e).get(Nl.key).next((function(e){return Wl.resolve(t.cn(e))}))}},{key:"un",value:function(e){return oh(e).delete(this.clientId)}},{key:"hn",value:function(){var e=Pt(jt().mark((function e(){var t,n,r,i,a=this;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.ln(this.je,18e5)){e.next=6;break}return this.je=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=rf(e,Vl.store);return t.Lt().next((function(e){var n=a.fn(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Wl.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.Ye){n=Me(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.Ye.removeItem(this.dn(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"en",value:function(){var e=this;this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.Xe().then((function(){return e.hn()})).then((function(){return e.en()}))}))}},{key:"cn",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"rn",value:function(e){var t=this;return this.Me?Wl.resolve(!0):ah(e).get(Nl.key).next((function(n){if(null!==n&&t.ln(n.leaseTimestampMs,5e3)&&!t.wn(n.ownerId)){if(t.cn(n)&&t.networkEnabled)return!0;if(!t.cn(n)){if(!n.allowTabSynchronization)throw new es(Zo.FAILED_PRECONDITION,rh);return!1}}return!(!t.networkEnabled||!t.inForeground)||oh(e).Lt().next((function(e){return void 0===t.fn(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Wo("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=Pt(jt().mark((function e(){var t=this;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Be=!1,this._n(),this.Ke&&(this.Ke.cancel(),this.Ke=null),this.mn(),this.gn(),e.next=7,this.Ge.runTransaction("shutdown","readwrite",[Nl.store,Vl.store],(function(e){var n=new nf(e,us.T);return t.on(n).next((function(){return t.un(n)}))}));case 7:this.Ge.close(),this.yn();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fn",value:function(e,t){var n=this;return e.filter((function(e){return n.ln(e.updateTimeMs,t)&&!n.wn(e.clientId)}))}},{key:"pn",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return oh(t).Lt().next((function(t){return e.fn(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Be}},{key:"getMutationQueue",value:function(e){return Af.Yt(e,this.N,this.Ht,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.ze}},{key:"getRemoteDocumentCache",value:function(){return this.He}},{key:"getIndexManager",value:function(){return this.Ht}},{key:"getBundleCache",value:function(){return this.Je}},{key:"runTransaction",value:function(e,t,n){var r=this;Wo("IndexedDbPersistence","Starting transaction:",e);var i,a="readonly"===t?"readonly":"readwrite";return this.Ge.runTransaction(e,a,Bl,(function(a){return i=new nf(a,r.Le?r.Le.next():us.T),"readwrite-primary"===t?r.sn(i).next((function(e){return!!e||r.rn(i)})).next((function(t){if(!t)throw Go("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Oe.enqueueRetryable((function(){return r.Qe(!1)})),new es(Zo.FAILED_PRECONDITION,Kl);return n(i)})).next((function(e){return r.an(i).next((function(){return e}))})):r.En(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"En",value:function(e){var t=this;return ah(e).get(Nl.key).next((function(e){if(null!==e&&t.ln(e.leaseTimestampMs,5e3)&&!t.wn(e.ownerId)&&!t.cn(e)&&!(t.Me||t.allowTabSynchronization&&e.allowTabSynchronization))throw new es(Zo.FAILED_PRECONDITION,rh)}))}},{key:"an",value:function(e){var t=new Nl(this.clientId,this.allowTabSynchronization,Date.now());return ah(e).put(Nl.key,t)}},{key:"on",value:function(e){var t=this,n=ah(e);return n.get(Nl.key).next((function(e){return t.cn(e)?(Wo("IndexedDbPersistence","Releasing primary lease."),n.delete(Nl.key)):Wl.resolve()}))}},{key:"ln",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Go("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"Ze",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=function(){e.Oe.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.Xe()}))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}},{key:"mn",value:function(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}},{key:"tn",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Ue=function(){t._n(),!rt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match("Version/14")&&t.Oe.enterRestrictedMode(!0),t.Oe.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Ue))}},{key:"gn",value:function(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}},{key:"wn",value:function(e){var t;try{var n=null!==(null===(t=this.Ye)||void 0===t?void 0:t.getItem(this.dn(e)));return Wo("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Go("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"_n",value:function(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(e){Go("Failed to set zombie client id.",e)}}},{key:"yn",value:function(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(e){}}},{key:"dn",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"bt",value:function(){return Ql.bt()}}]),e}();function ah(e){return rf(e,Nl.store)}function oh(e){return rf(e,Vl.store)}function sh(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var uh=je((function e(t,n){De(this,e),this.progress=t,this.Tn=n})),ch=function(){function e(t,n,r){De(this,e),this.He=t,this.In=n,this.Ht=r}return je(e,[{key:"An",value:function(e,t){var n=this;return this.In.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Rn(e,t,r)}))}},{key:"Rn",value:function(e,t,n){return this.He.getEntry(e,t).next((function(e){var t,r=Me(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"bn",value:function(e,t){e.forEach((function(e,n){var r,i=Me(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"Pn",value:function(e,t){var n=this;return this.He.getEntries(e,t).next((function(t){return n.vn(e,t).next((function(){return t}))}))}},{key:"vn",value:function(e,t){var n=this;return this.In.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.bn(t,e)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Ls.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Vn(e,t.path):Tu(t)?this.Sn(e,t,n):this.Dn(e,t,n)}},{key:"Vn",value:function(e,t){return this.An(e,new Ls(t)).next((function(e){var t=Sc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"Sn",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Sc();return this.Ht.getCollectionParents(e,i).next((function(o){return Wl.forEach(o,(function(o){var s=function(e,t){return new ku(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.Dn(e,s,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"Dn",value:function(e,t,n){var r,i,a=this;return this.He.getDocumentsMatchingQuery(e,t,n).next((function(n){return r=n,a.In.getAllMutationBatchesAffectingQuery(e,t)})).next((function(t){return i=t,a.Cn(e,i,r).next((function(e){r=e;var t,n=Me(i);try{for(n.s();!(t=n.n()).done;){var a,o=t.value,s=Me(o.mutations);try{for(s.s();!(a=s.n()).done;){var u=a.value,c=u.key,l=r.get(c);null==l&&(l=Xs.newInvalidDocument(c),r=r.insert(c,l)),rc(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}catch(f){s.e(f)}finally{s.f()}}}catch(f){n.e(f)}finally{n.f()}}))})).next((function(){return r.forEach((function(e,n){Ou(t,n)||(r=r.remove(e))})),r}))}},{key:"Cn",value:function(e,t,n){var r,i=Rc(),a=Me(t);try{for(a.s();!(r=a.n()).done;){var o,s=Me(r.value.mutations);try{for(s.s();!(o=s.n()).done;){var u=o.value;u instanceof uc&&null===n.get(u.key)&&(i=i.add(u.key))}}catch(l){s.e(l)}finally{s.f()}}}catch(l){a.e(l)}finally{a.f()}var c=n;return this.He.getEntries(e,i).next((function(e){return e.forEach((function(e,t){t.isFoundDocument()&&(c=c.insert(e,t))})),c}))}}]),e}(),lh=function(){function e(t,n,r,i){De(this,e),this.targetId=t,this.fromCache=n,this.Nn=r,this.xn=i}return je(e,null,[{key:"kn",value:function(t,n){var r,i=Rc(),a=Rc(),o=Me(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),fh=function(){function e(){De(this,e)}return je(e,[{key:"$n",value:function(e){this.On=e}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(vs.min())?this.Fn(e,t):this.On.Pn(e,r).next((function(a){var o=i.Mn(t,a);return(xu(t)||_u(t))&&i.Ln(t.limitType,o,r,n)?i.Fn(e,t):(Ho()<=Dt.DEBUG&&Wo("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Pu(t)),i.On.getDocumentsMatchingQuery(e,t,n).next((function(e){return o.forEach((function(t){e=e.insert(t.key,t)})),e})))}))}},{key:"Mn",value:function(e,t){var n=new xc(Du(e));return t.forEach((function(t,r){Ou(e,r)&&(n=n.add(r))})),n}},{key:"Ln",value:function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Fn",value:function(e,t){return Ho()<=Dt.DEBUG&&Wo("QueryEngine","Using full collection scan to execute query:",Pu(t)),this.On.getDocumentsMatchingQuery(e,t,vs.min())}}]),e}(),hh=function(){function e(t,n,r,i){De(this,e),this.persistence=t,this.Bn=n,this.N=i,this.Un=new kc(fs),this.qn=new Qf((function(e){return tu(e)}),nu),this.Kn=vs.min(),this.In=t.getMutationQueue(r),this.jn=t.getRemoteDocumentCache(),this.ze=t.getTargetCache(),this.Qn=new ch(this.jn,this.In,this.persistence.getIndexManager()),this.Je=t.getBundleCache(),this.Bn.$n(this.Qn)}return je(e,[{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Un)}))}}]),e}();function dh(e,t,n,r){return new hh(e,t,n,r)}function ph(e,t){return vh.apply(this,arguments)}function vh(){return(vh=Pt(jt().mark((function e(t,n){var r,i,a,o;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Xo(t),i=r.In,a=r.Qn,e.next=4,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.In.getAllMutationBatches(e).next((function(o){return t=o,i=r.persistence.getMutationQueue(n),a=new ch(r.jn,i,r.persistence.getIndexManager()),i.getAllMutationBatches(e)})).next((function(n){var r,i=[],o=[],s=Rc(),u=Me(t);try{for(u.s();!(r=u.n()).done;){var c=r.value;i.push(c.batchId);var l,f=Me(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;s=s.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){u.e(k)}finally{u.f()}var d,p=Me(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=Me(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;s=s.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return a.Pn(e,s).next((function(e){return{Wn:e,removedBatchIds:i,addedBatchIds:o}}))}))}));case 4:return o=e.sent,e.abrupt("return",(r.In=i,r.Qn=a,r.Bn.$n(r.Qn),o));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mh(e,t){var n=Xo(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.jn.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Wl.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Jo(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&r.addEntry(t,n.commitVersion))}))})),o.next((function(){return e.In.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.In.performConsistencyCheck(e)})).next((function(){return n.Qn.Pn(e,r)}))}))}function yh(e){var t=Xo(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.ze.getLastRemoteSnapshotVersion(e)}))}function gh(e,t){var n=Xo(e),r=t.snapshotVersion,i=n.Un;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.jn.newChangeBuffer({trackRemovals:!0});i=n.Un;var o=[];t.targetChanges.forEach((function(t,a){var s=i.get(a);if(s){o.push(n.ze.removeMatchingKeys(e,t.removedDocuments,a).next((function(){return n.ze.addMatchingKeys(e,t.addedDocuments,a)})));var u=t.resumeToken;if(u.approximateByteSize()>0){var c=s.withResumeToken(u,r).withSequenceNumber(e.currentSequenceNumber);i=i.insert(a,c),function(e,t,n){return Jo(t.resumeToken.approximateByteSize()>0),0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,t)&&o.push(n.ze.updateTargetData(e,c))}}}));var s=Ec();if(t.documentUpdates.forEach((function(r,i){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(kh(e,a,t.documentUpdates,r,void 0).next((function(e){s=e}))),!r.isEqual(vs.min())){var u=n.ze.getLastRemoteSnapshotVersion(e).next((function(t){return n.ze.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(u)}return Wl.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.Qn.vn(e,s)})).next((function(){return s}))})).then((function(e){return n.Un=i,e}))}function kh(e,t,n,r,i){var a=Rc();return n.forEach((function(e){return a=a.add(e)})),t.getEntries(e,a).next((function(e){var a=Ec();return n.forEach((function(n,o){var s=e.get(n),u=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(vs.min())?(t.removeEntry(n,u),a=a.insert(n,o)):!s.isValidDocument()||o.version.compareTo(s.version)>0||0===o.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(o,u),a=a.insert(n,o)):Wo("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)})),a}))}function wh(e,t){var n=Xo(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.In.getNextMutationBatchAfterBatchId(e,t)}))}function bh(e,t){var n=Xo(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.ze.getTargetData(e,t).next((function(i){return i?(r=i,Wl.resolve(r)):n.ze.allocateTargetId(e).next((function(i){return r=new sf(t,i,0,e.currentSequenceNumber),n.ze.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Un.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Un=n.Un.insert(e.targetId,e),n.qn.set(t,e.targetId)),e}))}function xh(e,t,n){return _h.apply(this,arguments)}function _h(){return(_h=Pt(jt().mark((function e(t,n,r){var i,a,o;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Xo(t),a=i.Un.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Jl(e.t1)){e.next=12;break}throw e.t1;case 12:Wo("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Un=i.Un.remove(n),i.qn.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function Ih(e,t,n){var r=Xo(e),i=vs.min(),a=Rc();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Xo(e),i=r.qn.get(n);return void 0!==i?Wl.resolve(r.Un.get(i)):r.ze.getTargetData(t,n)}(r,e,Nu(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.ze.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Bn.getDocumentsMatchingQuery(e,t,n?i:vs.min(),n?a:Rc())})).next((function(e){return{documents:e,Gn:a}}))}))}function Eh(e,t){var n=Xo(e),r=Xo(n.ze),i=n.Un.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function Th(e){var t=Xo(e);return t.persistence.runTransaction("Get new document changes","readonly",(function(e){return function(e,t,n){var r=Xo(e),i=Ec(),a=ff(n),o=Zf(t),s=IDBKeyRange.lowerBound(a,!0);return o.Kt({index:Dl.readTimeIndex,range:s},(function(e,t){var n=cf(r.N,t);i=i.insert(n.key,n),a=t.readTime})).next((function(){return{Tn:i,readTime:hf(a)}}))}(t.jn,e,t.Kn)})).then((function(e){var n=e.Tn,r=e.readTime;return t.Kn=r,n}))}function Sh(e){return Nh.apply(this,arguments)}function Nh(){return(Nh=Pt(jt().mark((function e(t){var n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Xo(t),e.abrupt("return",n.persistence.runTransaction("Synchronize last document change read time","readonly",(function(e){return function(e){var t=Zf(e),n=vs.min();return t.Kt({index:Dl.readTimeIndex,reverse:!0},(function(e,t,r){t.readTime&&(n=hf(t.readTime)),r.done()})).next((function(){return n}))}(e)})).then((function(e){n.Kn=e})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ch(e,t,n,r){return Ah.apply(this,arguments)}function Ah(){return Ah=Pt(jt().mark((function e(t,n,r,i){var a,o,s,u,c,l,f,h,d,p;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Xo(t),o=Rc(),s=Ec(),u=Cc(),c=Me(r);try{for(c.s();!(l=c.n()).done;)f=l.value,h=n.zn(f.metadata.name),f.document&&(o=o.add(h)),s=s.insert(h,n.Hn(f)),u=u.insert(h,n.Jn(f.metadata.readTime))}catch(v){c.e(v)}finally{c.f()}return d=a.jn.newChangeBuffer({trackRemovals:!0}),e.next=7,bh(a,function(e){return Nu(bu(ws.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return kh(e,d,s,vs.min(),u).next((function(t){return d.apply(e),t})).next((function(t){return a.ze.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.ze.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.Qn.vn(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),Ah.apply(this,arguments)}function Rh(e,t){return Ph.apply(this,arguments)}function Ph(){return Ph=Pt(jt().mark((function e(t,n){var r,i,a,o=arguments;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Rc(),e.next=3,bh(t,Nu(gf(n.bundledQuery)));case 3:return i=e.sent,a=Xo(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=$c(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Je.saveNamedQuery(e,n);var o=i.withResumeToken(Is.EMPTY_BYTE_STRING,t);return a.Un=a.Un.insert(o.targetId,o),a.ze.updateTargetData(e,o).next((function(){return a.ze.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.ze.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Je.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Ph.apply(this,arguments)}var Oh=function(){function e(t){De(this,e),this.N=t,this.Yn=new Map,this.Xn=new Map}return je(e,[{key:"getBundleMetadata",value:function(e,t){return Wl.resolve(this.Yn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Yn.set(t.id,{id:(n=t).id,version:n.version,createTime:$c(n.createTime)}),Wl.resolve()}},{key:"getNamedQuery",value:function(e,t){return Wl.resolve(this.Xn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Xn.set(t.name,function(e){return{name:e.name,query:gf(e.bundledQuery),readTime:$c(e.readTime)}}(t)),Wl.resolve()}}]),e}(),Dh=function(){function e(){De(this,e),this.Zn=new xc(Lh.ts),this.es=new xc(Lh.ns)}return je(e,[{key:"isEmpty",value:function(){return this.Zn.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Lh(e,t);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}},{key:"ss",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.rs(new Lh(e,t))}},{key:"os",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"cs",value:function(e){var t=this,n=new Ls(new ws([])),r=new Lh(n,e),i=new Lh(n,e+1),a=[];return this.es.forEachInRange([r,i],(function(e){t.rs(e),a.push(e.key)})),a}},{key:"us",value:function(){var e=this;this.Zn.forEach((function(t){return e.rs(t)}))}},{key:"rs",value:function(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}},{key:"hs",value:function(e){var t=new Ls(new ws([])),n=new Lh(t,e),r=new Lh(t,e+1),i=Rc();return this.es.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Lh(e,0),n=this.Zn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Lh=function(){function e(t,n){De(this,e),this.key=t,this.ls=n}return je(e,null,[{key:"ts",value:function(e,t){return Ls.comparator(e.key,t.key)||fs(e.ls,t.ls)}},{key:"ns",value:function(e,t){return fs(e.ls,t.ls)||Ls.comparator(e.key,t.key)}}]),e}(),jh=function(){function e(t,n){De(this,e),this.Ht=t,this.referenceDelegate=n,this.In=[],this.fs=1,this.ds=new xc(Lh.ts)}return je(e,[{key:"checkEmpty",value:function(e){return Wl.resolve(0===this.In.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.fs;this.fs++,this.In.length>0&&this.In[this.In.length-1];var a=new af(i,t,n,r);this.In.push(a);var o,s=Me(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.ds=this.ds.add(new Lh(u.key,i)),this.Ht.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(c){s.e(c)}finally{s.f()}return Wl.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Wl.resolve(this.ws(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this._s(n),i=r<0?0:r;return Wl.resolve(this.In.length>i?this.In[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Wl.resolve(0===this.In.length?-1:this.fs-1)}},{key:"getAllMutationBatches",value:function(e){return Wl.resolve(this.In.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Lh(t,0),i=new Lh(t,Number.POSITIVE_INFINITY),a=[];return this.ds.forEachInRange([r,i],(function(e){var t=n.ws(e.ls);a.push(t)})),Wl.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new xc(fs);return t.forEach((function(e){var t=new Lh(e,0),i=new Lh(e,Number.POSITIVE_INFINITY);n.ds.forEachInRange([t,i],(function(e){r=r.add(e.ls)}))})),Wl.resolve(this.gs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Ls.isDocumentKey(i)||(i=i.child(""));var a=new Lh(new Ls(i),0),o=new xc(fs);return this.ds.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ls)),!0)}),a),Wl.resolve(this.gs(o))}},{key:"gs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ws(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Jo(0===this.ys(t.batchId,"removed")),this.In.shift();var r=this.ds;return Wl.forEach(t.mutations,(function(i){var a=new Lh(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ds=r}))}},{key:"te",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Lh(t,0),r=this.ds.firstAfterOrEqual(n);return Wl.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.In.length,Wl.resolve()}},{key:"ys",value:function(e,t){return this._s(e)}},{key:"_s",value:function(e){return 0===this.In.length?0:e-this.In[0].batchId}},{key:"ws",value:function(e){var t=this._s(e);return t<0||t>=this.In.length?null:this.In[t]}}]),e}(),Mh=function(){function e(t,n){De(this,e),this.Ht=t,this.ps=n,this.docs=new kc(Ls.comparator),this.size=0}return je(e,[{key:"addEntry",value:function(e,t,n){var r=t.key,i=this.docs.get(r),a=i?i.size:0,o=this.ps(t);return this.docs=this.docs.insert(r,{document:t.clone(),size:o,readTime:n}),this.size+=o-a,this.Ht.addToCollectionParentIndex(e,r.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Wl.resolve(n?n.document.clone():Xs.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Ec();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.clone():Xs.newInvalidDocument(e))})),Wl.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){for(var r=Ec(),i=new Ls(t.path.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),s=o.key,u=o.value,c=u.document,l=u.readTime;if(!t.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||Ou(t,c)&&(r=r.insert(c.key,c.clone()))}return Wl.resolve(r)}},{key:"Es",value:function(e,t){return Wl.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Fh(this)}},{key:"getSize",value:function(e){return Wl.resolve(this.size)}}]),e}(),Fh=function(e){Ue(n,e);var t=Ke(n);function n(e){var r;return De(this,n),(r=t.call(this)).Se=e,r}return je(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(t.Se.addEntry(e,i.document,t.getReadTime(r))):t.Se.removeEntry(r)})),Wl.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Se.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Se.getEntries(e,t)}}]),n}($f),Uh=function(){function e(t){De(this,e),this.persistence=t,this.Ts=new Qf((function(e){return tu(e)}),nu),this.lastRemoteSnapshotVersion=vs.min(),this.highestTargetId=0,this.Is=0,this.As=new Dh,this.targetCount=0,this.Rs=Lf.se()}return je(e,[{key:"forEachTarget",value:function(e,t){return this.Ts.forEach((function(e,n){return t(n)})),Wl.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Wl.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Wl.resolve(this.Is)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Rs.next(),Wl.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Is&&(this.Is=t),Wl.resolve()}},{key:"ae",value:function(e){this.Ts.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Rs=new Lf(t),this.highestTargetId=t),e.sequenceNumber>this.Is&&(this.Is=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.ae(t),this.targetCount+=1,Wl.resolve()}},{key:"updateTargetData",value:function(e,t){return this.ae(t),Wl.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Ts.delete(t.target),this.As.cs(t.targetId),this.targetCount-=1,Wl.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Ts.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Ts.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),Wl.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Wl.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Ts.get(t)||null;return Wl.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.As.ss(t,n),Wl.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.As.os(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Wl.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.As.cs(t),Wl.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.As.hs(t);return Wl.resolve(n)}},{key:"containsKey",value:function(e,t){return Wl.resolve(this.As.containsKey(t))}}]),e}(),Vh=function(){function e(t,n){var r=this;De(this,e),this.bs={},this.Le=new us(0),this.Be=!1,this.Be=!0,this.referenceDelegate=t(this),this.ze=new Uh(this),this.Ht=new xf,this.He=function(e,t){return new Mh(e,(function(e){return r.referenceDelegate.Ps(e)}))}(this.Ht),this.N=new uf(n),this.Je=new Oh(this.N)}return je(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Be=!1,Promise.resolve()}},{key:"started",get:function(){return this.Be}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(){return this.Ht}},{key:"getMutationQueue",value:function(e){var t=this.bs[e.toKey()];return t||(t=new jh(this.Ht,this.referenceDelegate),this.bs[e.toKey()]=t),t}},{key:"getTargetCache",value:function(){return this.ze}},{key:"getRemoteDocumentCache",value:function(){return this.He}},{key:"getBundleCache",value:function(){return this.Je}},{key:"runTransaction",value:function(e,t,n){var r=this;Wo("MemoryPersistence","Starting transaction:",e);var i=new qh(this.Le.next());return this.referenceDelegate.vs(),n(i).next((function(e){return r.referenceDelegate.Vs(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ss",value:function(e,t){return Wl.or(Object.values(this.bs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),qh=function(e){Ue(n,e);var t=Ke(n);function n(e){var r;return De(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return je(n)}(Hl),zh=function(){function e(t){De(this,e),this.persistence=t,this.Ds=new Dh,this.Cs=null}return je(e,[{key:"xs",get:function(){if(this.Cs)return this.Cs;throw Yo()}},{key:"addReference",value:function(e,t,n){return this.Ds.addReference(n,t),this.xs.delete(n.toString()),Wl.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Ds.removeReference(n,t),this.xs.add(n.toString()),Wl.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.xs.add(t.toString()),Wl.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Ds.cs(t.targetId).forEach((function(e){return n.xs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.xs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"vs",value:function(){this.Cs=new Set}},{key:"Vs",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Wl.forEach(this.xs,(function(r){var i=Ls.fromPath(r);return t.ks(e,i).next((function(e){e||n.removeEntry(i)}))})).next((function(){return t.Cs=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.ks(e,t).next((function(e){e?n.xs.delete(t.toString()):n.xs.add(t.toString())}))}},{key:"Ps",value:function(e){return 0}},{key:"ks",value:function(e,t){var n=this;return Wl.or([function(){return Wl.resolve(n.Ds.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ss(e,t)}])}}],[{key:"Ns",value:function(t){return new e(t)}}]),e}();function Bh(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Kh(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Hh(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Wh=function(){function e(t,n,r,i){De(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return je(e,[{key:"Os",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"$s",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new es(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Go("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Gh=function(){function e(t,n,r){De(this,e),this.targetId=t,this.state=n,this.error=r}return je(e,[{key:"Os",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"$s",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new es(i.error.code,i.error.message))),a?new e(t,i.state,r):(Go("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Qh=function(){function e(t,n){De(this,e),this.clientId=t,this.activeTargetIds=n}return je(e,null,[{key:"$s",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Oc(),o=0;i&&o<r.activeTargetIds.length;++o)i=Ds(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Go("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),$h=function(){function e(t,n){De(this,e),this.clientId=t,this.onlineState=n}return je(e,null,[{key:"$s",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Go("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Yh=function(){function e(){De(this,e),this.activeTargetIds=Oc()}return je(e,[{key:"Fs",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Ms",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Os",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Jh=function(){function e(t,n,r,i,a){De(this,e),this.window=t,this.Oe=n,this.persistenceKey=r,this.Ls=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new kc(fs),this.started=!1,this.Ks=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.js=Bh(this.persistenceKey,this.Ls),this.Qs=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.qs=this.qs.insert(this.Ls,new Yh),this.Ws=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Gs=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.zs=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.Hs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Js=function(e){return"firestore_bundle_loaded_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}return je(e,[{key:"start",value:function(){var e=Pt(jt().mark((function e(){var t,n,r,i,a,o,s,u,c,l,f,h=this;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.pn();case 2:t=e.sent,n=Me(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.Ls){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Bh(this.persistenceKey,i)))&&(o=Qh.$s(i,a))&&(this.qs=this.qs.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.Ys(),(s=this.storage.getItem(this.Hs))&&(u=this.Xs(s))&&this.Zs(u),c=Me(this.Ks);try{for(c.s();!(l=c.n()).done;)f=l.value,this.Us(f)}catch(d){c.e(d)}finally{c.f()}this.Ks=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Qs,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.ti(this.qs)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.qs.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.ei(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.ei(e,t,n),this.ni(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Hh(this.persistenceKey,e));if(n){var r=Gh.$s(e,n);r&&(t=r.state)}}return this.si.Fs(e),this.Ys(),t}},{key:"removeLocalQueryTarget",value:function(e){this.si.Ms(e),this.Ys()}},{key:"isLocalQueryTarget",value:function(e){return this.si.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Hh(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.ii(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.ni(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.ri(e)}},{key:"notifyBundleLoaded",value:function(){this.oi()}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Wo("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Wo("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Wo("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"Us",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Wo("SharedClientState","EVENT",n.key,n.newValue),n.key===this.js)return void Go("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable(Pt(jt().mark((function e(){var r,i,a,o,s,u;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=41;break}if(null===n.key){e.next=39;break}if(!t.Ws.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.ai(n.key),e.abrupt("return",t.ci(r,null));case 6:if(!(i=t.ui(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.ci(i.clientId,i));case 9:e.next=39;break;case 11:if(!t.Gs.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.hi(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.li(a));case 16:e.next=39;break;case 18:if(!t.zs.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.fi(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.di(o));case 23:e.next=39;break;case 25:if(n.key!==t.Hs){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.Xs(n.newValue))){e.next=30;break}return e.abrupt("return",t.Zs(s));case 30:e.next=39;break;case 32:if(n.key!==t.Qs){e.next=37;break}u=function(e){var t=us.T;if(null!=e)try{var n=JSON.parse(e);Jo("number"==typeof n),t=n}catch(e){Go("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),u!==us.T&&t.sequenceNumberHandler(u),e.next=39;break;case 37:if(n.key!==t.Js){e.next=39;break}return e.abrupt("return",t.syncEngine.wi());case 39:e.next=42;break;case 41:t.Ks.push(n);case 42:case"end":return e.stop()}}),e)}))))}}},{key:"si",get:function(){return this.qs.get(this.Ls)}},{key:"Ys",value:function(){this.setItem(this.js,this.si.Os())}},{key:"ei",value:function(e,t,n){var r=new Wh(this.currentUser,e,t,n),i=Kh(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Os())}},{key:"ni",value:function(e){var t=Kh(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"ri",value:function(e){var t={clientId:this.Ls,onlineState:e};this.storage.setItem(this.Hs,JSON.stringify(t))}},{key:"ii",value:function(e,t,n){var r=Hh(this.persistenceKey,e),i=new Gh(e,t,n);this.setItem(r,i.Os())}},{key:"oi",value:function(){this.setItem(this.Js,"value-not-used")}},{key:"ai",value:function(e){var t=this.Ws.exec(e);return t?t[1]:null}},{key:"ui",value:function(e,t){var n=this.ai(e);return Qh.$s(n,t)}},{key:"hi",value:function(e,t){var n=this.Gs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Wh.$s(new zo(i),r,t)}},{key:"fi",value:function(e,t){var n=this.zs.exec(e),r=Number(n[1]);return Gh.$s(r,t)}},{key:"Xs",value:function(e){return $h.$s(e)}},{key:"li",value:function(){var e=Pt(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine._i(t.batchId,t.state,t.error));case 2:Wo("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"di",value:function(e){return this.syncEngine.mi(e.targetId,e.state,e.error)}},{key:"ci",value:function(e,t){var n=this,r=t?this.qs.insert(e,t):this.qs.remove(e),i=this.ti(this.qs),a=this.ti(r),o=[],s=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||s.push(e)})),this.syncEngine.gi(o,s).then((function(){n.qs=r}))}},{key:"Zs",value:function(e){this.qs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"ti",value:function(e){var t=Oc();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"bt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Xh=function(){function e(){De(this,e),this.yi=new Yh,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return je(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.yi.Fs(e),this.pi[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.pi[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.yi.Ms(e)}},{key:"isLocalQueryTarget",value:function(e){return this.yi.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.pi[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.yi.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.yi.activeTargetIds.has(e)}},{key:"start",value:function(){return this.yi=new Yh,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(){}}]),e}(),Zh=function(){function e(){De(this,e)}return je(e,[{key:"Ei",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),ed=function(){function e(){var t=this;De(this,e),this.Ti=function(){return t.Ii()},this.Ai=function(){return t.Ri()},this.bi=[],this.Pi()}return je(e,[{key:"Ei",value:function(e){this.bi.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Ti),window.removeEventListener("offline",this.Ai)}},{key:"Pi",value:function(){window.addEventListener("online",this.Ti),window.addEventListener("offline",this.Ai)}},{key:"Ii",value:function(){Wo("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=Me(this.bi);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Ri",value:function(){Wo("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=Me(this.bi);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"bt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),td={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},nd=function(){function e(t){De(this,e),this.vi=t.vi,this.Vi=t.Vi}return je(e,[{key:"Si",value:function(e){this.Di=e}},{key:"Ci",value:function(e){this.Ni=e}},{key:"onMessage",value:function(e){this.xi=e}},{key:"close",value:function(){this.Vi()}},{key:"send",value:function(e){this.vi(e)}},{key:"ki",value:function(){this.Di()}},{key:"$i",value:function(e){this.Ni(e)}},{key:"Oi",value:function(e){this.xi(e)}}]),e}(),rd=function(e){Ue(n,e);var t=Ke(n);function n(e){var r;return De(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return je(n,[{key:"qi",value:function(e,t,n,r){return new Promise((function(i,a){var o=new qo;o.listenOnce(jo.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case Lo.NO_ERROR:var t=o.getResponseJson();Wo("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Lo.TIMEOUT:Wo("Connection",'RPC "'+e+'" timed out'),a(new es(Zo.DEADLINE_EXCEEDED,"Request time out"));break;case Lo.HTTP_ERROR:var n=o.getStatus();if(Wo("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var s=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Zo).indexOf(t)>=0?t:Zo.UNKNOWN}(r.status);a(new es(s,r.message))}else a(new es(Zo.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new es(Zo.UNAVAILABLE,"Connection failed."));break;default:Yo()}}finally{Wo("Connection",'RPC "'+e+'" completed.')}}));var s=JSON.stringify(r);o.send(t,"POST",s,n,15)}))}},{key:"ji",value:function(e,t){var n=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=Oo(),i=Do(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new Uo({})),this.Ui(a.initMessageHeaders,t),nt()||at()||tt().indexOf("Electron/")>=0||ot()||tt().indexOf("MSAppHost/")>=0||it()||(a.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");Wo("Connection","Creating WebChannel: "+o,a);var s=r.createWebChannel(o,a),u=!1,c=!1,l=new nd({vi:function(e){c?Wo("Connection","Not sending because WebChannel is closed:",e):(u||(Wo("Connection","Opening WebChannel transport."),s.open(),u=!0),Wo("Connection","WebChannel sending:",e),s.send(e))},Vi:function(){return s.close()}}),f=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return f(s,Vo.EventType.OPEN,(function(){c||Wo("Connection","WebChannel transport opened.")})),f(s,Vo.EventType.CLOSE,(function(){c||(c=!0,Wo("Connection","WebChannel transport closed"),l.$i())})),f(s,Vo.EventType.ERROR,(function(e){c||(c=!0,Qo("Connection","WebChannel transport errored:",e),l.$i(new es(Zo.UNAVAILABLE,"The operation could not be completed")))})),f(s,Vo.EventType.MESSAGE,(function(e){var t;if(!c){var n=e.data[0];Jo(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Wo("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=hc[e];if(void 0!==t)return gc(t)}(a),u=i.message;void 0===o&&(o=Zo.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),c=!0,l.$i(new es(o,u)),s.close()}else Wo("Connection","WebChannel received:",n),l.Oi(n)}})),f(i,Mo.STAT_EVENT,(function(e){e.stat===Fo.PROXY?Wo("Connection","Detected buffering proxy"):e.stat===Fo.NOPROXY&&Wo("Connection","Detected no buffering proxy")})),setTimeout((function(){l.ki()}),0),l}}]),n}(function(){function e(t){De(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.Fi=n+"://"+t.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return je(e,[{key:"Li",value:function(e,t,n,r){var i=this.Bi(e,t);Wo("RestConnection","Sending: ",i,n);var a={};return this.Ui(a,r),this.qi(e,i,a,n).then((function(e){return Wo("RestConnection","Received: ",e),e}),(function(t){throw Qo("RestConnection","".concat(e," failed with error: "),t,"url: ",i,"request:",n),t}))}},{key:"Ki",value:function(e,t,n,r){return this.Li(e,t,n,r)}},{key:"Ui",value:function(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/"+Bo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n])}},{key:"Bi",value:function(e,t){var n=td[e];return"".concat(this.Fi,"/v1/").concat(t,":").concat(n)}}]),e}());function id(){return"undefined"!=typeof window?window:null}function ad(){return"undefined"!=typeof document?document:null}function od(e){return new Hc(e,!0)}var sd=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;De(this,e),this.Oe=t,this.timerId=n,this.Qi=r,this.Wi=i,this.Gi=a,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}return je(e,[{key:"reset",value:function(){this.zi=0}},{key:"Yi",value:function(){this.zi=this.Gi}},{key:"Xi",value:function(e){var t=this;this.cancel();var n=Math.floor(this.zi+this.Zi()),r=Math.max(0,Date.now()-this.Ji),i=Math.max(0,n-r);i>0&&Wo("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.zi," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,i,(function(){return t.Ji=Date.now(),e()})),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}},{key:"tr",value:function(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}},{key:"cancel",value:function(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}},{key:"Zi",value:function(){return(Math.random()-.5)*this.zi}}]),e}(),ud=function(){function e(t,n,r,i,a,o){De(this,e),this.Oe=t,this.er=r,this.nr=i,this.credentialsProvider=a,this.listener=o,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new sd(t,n)}return je(e,[{key:"ar",value:function(){return 1===this.state||2===this.state||4===this.state}},{key:"cr",value:function(){return 2===this.state}},{key:"start",value:function(){3!==this.state?this.auth():this.ur()}},{key:"stop",value:function(){var e=Pt(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.ar(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"hr",value:function(){this.state=0,this.rr.reset()}},{key:"lr",value:function(){var e=this;this.cr()&&null===this.ir&&(this.ir=this.Oe.enqueueAfterDelay(this.er,6e4,(function(){return e.dr()})))}},{key:"wr",value:function(e){this._r(),this.stream.send(e)}},{key:"dr",value:function(){var e=Pt(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.cr()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_r",value:function(){this.ir&&(this.ir.cancel(),this.ir=null)}},{key:"close",value:function(){var e=Pt(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._r(),this.rr.cancel(),this.sr++,3!==t?this.rr.reset():n&&n.code===Zo.RESOURCE_EXHAUSTED?(Go(n.toString()),Go("Using maximum backoff delay to prevent overloading the backend."),this.rr.Yi()):n&&n.code===Zo.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.mr(),this.stream.close(),this.stream=null),this.state=t,e.next=8,this.listener.Ci(n);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"mr",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.gr(this.sr),n=this.sr;this.credentialsProvider.getToken().then((function(t){e.sr===n&&e.yr(t)}),(function(n){t((function(){var t=new es(Zo.UNKNOWN,"Fetching auth token failed: "+n.message);return e.pr(t)}))}))}},{key:"yr",value:function(e){var t=this,n=this.gr(this.sr);this.stream=this.Er(e),this.stream.Si((function(){n((function(){return t.state=2,t.listener.Si()}))})),this.stream.Ci((function(e){n((function(){return t.pr(e)}))})),this.stream.onMessage((function(e){n((function(){return t.onMessage(e)}))}))}},{key:"ur",value:function(){var e=this;this.state=4,this.rr.Xi(Pt(jt().mark((function t(){return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"pr",value:function(e){return Wo("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(3,e)}},{key:"gr",value:function(e){var t=this;return function(n){t.Oe.enqueueAndForget((function(){return t.sr===e?n():(Wo("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),cd=function(e){Ue(n,e);var t=Ke(n);function n(e,r,i,a,o){var s;return De(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",r,i,o)).N=a,s}return je(n,[{key:"Er",value:function(e){return this.nr.ji("Listen",e)}},{key:"onMessage",value:function(e){this.rr.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Yo()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.D?(Jo(void 0===t||"string"==typeof t),Is.fromBase64String(t||"")):(Jo(void 0===t||t instanceof Uint8Array),Is.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?Zo.UNKNOWN:gc(e.code);return new es(t,e.message||"")}(o);n=new Fc(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=Zc(e,u.document.name),l=$c(u.document.updateTime),f=new Ys({mapValue:{fields:u.document.fields}}),h=Xs.newFoundDocument(c,l,f),d=u.targetIds||[],p=u.removedTargetIds||[];n=new jc(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var m=Zc(e,v.document),y=v.readTime?$c(v.readTime):vs.min(),g=Xs.newNoDocument(m,y),k=v.removedTargetIds||[];n=new jc([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var b=Zc(e,w.document),x=w.removedTargetIds||[];n=new jc([],x,b,null)}else{if(!("filter"in t))return Yo();t.filter;var _=t.filter;_.targetId;var I=_.count||0,E=new mc(I),T=_.targetId;n=new Mc(T,E)}return n}(this.N,e),n=function(e){if(!("targetChange"in e))return vs.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?vs.min():t.readTime?$c(t.readTime):vs.min()}(e);return this.listener.Tr(t,n)}},{key:"Ir",value:function(e){var t={};t.database=nl(this.N),t.addTarget=function(e,t){var n,r=t.target;return(n=ru(r)?{documents:cl(e,r)}:{query:ll(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Gc(e,t.resumeToken):t.snapshotVersion.compareTo(vs.min())>0&&(n.readTime=Wc(e,t.snapshotVersion.toTimestamp())),n}(this.N,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Yo()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.N,e);n&&(t.labels=n),this.wr(t)}},{key:"Ar",value:function(e){var t={};t.database=nl(this.N),t.removeTarget=e,this.wr(t)}}]),n}(ud),ld=function(e){Ue(n,e);var t=Ke(n);function n(e,r,i,a,o){var s;return De(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",r,i,o)).N=a,s.Rr=!1,s}return je(n,[{key:"br",get:function(){return this.Rr}},{key:"start",value:function(){this.Rr=!1,this.lastStreamToken=void 0,Sn(Ve(n.prototype),"start",this).call(this)}},{key:"mr",value:function(){this.Rr&&this.Pr([])}},{key:"Er",value:function(e){return this.nr.ji("Write",e)}},{key:"onMessage",value:function(e){if(Jo(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Rr){this.rr.reset();var t=function(e,t){return e&&e.length>0?(Jo(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?$c(e.updateTime):$c(t);return n.isEqual(vs.min())&&(n=$c(t)),new Xu(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=$c(e.commitTime);return this.listener.vr(n,t)}return Jo(!e.writeResults||0===e.writeResults.length),this.Rr=!0,this.listener.Vr()}},{key:"Sr",value:function(){var e={};e.database=nl(this.N),this.wr(e)}},{key:"Pr",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return sl(t.N,e)}))};this.wr(n)}}]),n}(ud),fd=function(e){Ue(n,e);var t=Ke(n);function n(e,r,i){var a;return De(this,n),(a=t.call(this)).credentials=e,a.nr=r,a.N=i,a.Dr=!1,a}return je(n,[{key:"Cr",value:function(){if(this.Dr)throw new es(Zo.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Li",value:function(e,t,n){var r=this;return this.Cr(),this.credentials.getToken().then((function(i){return r.nr.Li(e,t,n,i)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Zo.UNAUTHENTICATED&&r.credentials.invalidateToken(),e):new es(Zo.UNKNOWN,e.toString())}))}},{key:"Ki",value:function(e,t,n){var r=this;return this.Cr(),this.credentials.getToken().then((function(i){return r.nr.Ki(e,t,n,i)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Zo.UNAUTHENTICATED&&r.credentials.invalidateToken(),e):new es(Zo.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.Dr=!0}}]),n}(function(){return je((function e(){De(this,e)}))}()),hd=function(){function e(t,n){De(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.Nr=0,this.kr=null,this.$r=!0}return je(e,[{key:"Or",value:function(){var e=this;0===this.Nr&&(this.Fr("Unknown"),this.kr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.kr=null,e.Mr("Backend didn't respond within 10 seconds."),e.Fr("Offline"),Promise.resolve()})))}},{key:"Lr",value:function(e){"Online"===this.state?this.Fr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.Fr("Offline")))}},{key:"set",value:function(e){this.Br(),this.Nr=0,"Online"===e&&(this.$r=!1),this.Fr(e)}},{key:"Fr",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"Mr",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.$r?(Go(t),this.$r=!1):Wo("OnlineStateTracker",t)}},{key:"Br",value:function(){null!==this.kr&&(this.kr.cancel(),this.kr=null)}}]),e}(),dd=je((function e(t,n,r,i,a){var o=this;De(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ur=[],this.qr=new Map,this.Kr=new Set,this.jr=[],this.Qr=a,this.Qr.Ei((function(e){r.enqueueAndForget(Pt(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Id(o),!e.t0){e.next=5;break}return Wo("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Pt(jt().mark((function e(t){var n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Xo(t)).Kr.add(4),e.next=4,md(n);case 4:return n.Wr.set("Unknown"),n.Kr.delete(4),e.next=8,pd(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.Wr=new hd(r,i)}));function pd(e){return vd.apply(this,arguments)}function vd(){return(vd=Pt(jt().mark((function e(t){var n,r,i;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Id(t)){e.next=18;break}n=Me(t.jr),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}function md(e){return yd.apply(this,arguments)}function yd(){return(yd=Pt(jt().mark((function e(t){var n,r,i;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Me(t.jr),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function gd(e,t){var n=Xo(e);n.qr.has(t.targetId)||(n.qr.set(t.targetId,t),_d(n)?xd(n):Jd(n).cr()&&wd(n,t))}function kd(e,t){var n=Xo(e),r=Jd(n);n.qr.delete(t),r.cr()&&bd(n,t),0===n.qr.size&&(r.cr()?r.lr():Id(n)&&n.Wr.set("Unknown"))}function wd(e,t){e.Gr.Y(t.targetId),Jd(e).Ir(t)}function bd(e,t){e.Gr.Y(t),Jd(e).Ar(t)}function xd(e){e.Gr=new Vc({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e.qr.get(t)||null}}),Jd(e).start(),e.Wr.Or()}function _d(e){return Id(e)&&!Jd(e).ar()&&e.qr.size>0}function Id(e){return 0===Xo(e).Kr.size}function Ed(e){e.Gr=void 0}function Td(e){return Sd.apply(this,arguments)}function Sd(){return(Sd=Pt(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.qr.forEach((function(e,n){wd(t,e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nd(e,t){return Cd.apply(this,arguments)}function Cd(){return(Cd=Pt(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ed(t),_d(t)?(t.Wr.Lr(n),xd(t)):t.Wr.set("Unknown");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ad(e,t,n){return Rd.apply(this,arguments)}function Rd(){return Rd=Pt(jt().mark((function e(t,n,r){var i;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.Wr.set("Online"),!(n instanceof Fc&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Pt(jt().mark((function e(t,n){var r,i,a,o;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=Me(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.qr.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.qr.delete(o),t.Gr.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Wo("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Pd(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof jc?t.Gr.rt(n):n instanceof Mc?t.Gr.ft(n):t.Gr.ct(n),r.isEqual(vs.min())){e.next=29;break}return e.prev=14,e.next=17,yh(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Gr._t(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.qr.get(r);i&&e.qr.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.qr.get(t);if(n){e.qr.set(t,n.withResumeToken(Is.EMPTY_BYTE_STRING,n.snapshotVersion)),bd(e,t);var r=new sf(n.target,t,1,n.sequenceNumber);wd(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Wo("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Pd(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Rd.apply(this,arguments)}function Pd(e,t,n){return Od.apply(this,arguments)}function Od(){return(Od=Pt(jt().mark((function e(t,n,r){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Jl(n)){e.next=2;break}throw n;case 2:return t.Kr.add(1),e.next=5,md(t);case 5:t.Wr.set("Offline"),r||(r=function(){return yh(t.localStore)}),t.asyncQueue.enqueueRetryable(Pt(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Wo("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.Kr.delete(1),e.next=6,pd(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dd(e,t){return t().catch((function(n){return Pd(e,n,t)}))}function Ld(e){return jd.apply(this,arguments)}function jd(){return(jd=Pt(jt().mark((function e(t){var n,r,i,a;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Xo(t),r=Xd(n),i=n.Ur.length>0?n.Ur[n.Ur.length-1].batchId:-1;case 2:if(!Md(n)){e.next=19;break}return e.prev=3,e.next=6,wh(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.Ur.length&&r.lr(),e.abrupt("break",19);case 10:i=a.batchId,Fd(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Pd(n,e.t0);case 17:e.next=2;break;case 19:Ud(n)&&Vd(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function Md(e){return Id(e)&&e.Ur.length<10}function Fd(e,t){e.Ur.push(t);var n=Xd(e);n.cr()&&n.br&&n.Pr(t.mutations)}function Ud(e){return Id(e)&&!Xd(e).ar()&&e.Ur.length>0}function Vd(e){Xd(e).start()}function qd(e){return zd.apply(this,arguments)}function zd(){return(zd=Pt(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Xd(t).Sr();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bd(e){return Kd.apply(this,arguments)}function Kd(){return(Kd=Pt(jt().mark((function e(t){var n,r,i,a;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Xd(t),r=Me(t.Ur);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Pr(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hd(e,t,n){return Wd.apply(this,arguments)}function Wd(){return(Wd=Pt(jt().mark((function e(t,n,r){var i,a;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Ur.shift(),a=of.from(i,n,r),e.next=3,Dd(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Ld(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gd(e,t){return Qd.apply(this,arguments)}function Qd(){return Qd=Pt(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Xd(t).br,!e.t0){e.next=4;break}return e.next=4,function(){var e=Pt(jt().mark((function e(t,n){var r,i;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!yc(i=n.code)||i===Zo.ABORTED){e.next=7;break}return r=t.Ur.shift(),Xd(t).hr(),e.next=5,Dd(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Ld(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Ud(t)&&Vd(t);case 5:case"end":return e.stop()}}),e)}))),Qd.apply(this,arguments)}function $d(e,t){return Yd.apply(this,arguments)}function Yd(){return(Yd=Pt(jt().mark((function e(t,n){var r;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Xo(t),!n){e.next=7;break}return r.Kr.delete(2),e.next=5,pd(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.Kr.add(2),e.next=12,md(r);case 12:r.Wr.set("Unknown");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jd(e){return e.zr||(e.zr=function(e,t,n){var r=Xo(e);return r.Cr(),new cd(t,r.nr,r.credentials,r.N,n)}(e.datastore,e.asyncQueue,{Si:Td.bind(null,e),Ci:Nd.bind(null,e),Tr:Ad.bind(null,e)}),e.jr.push(function(){var t=Pt(jt().mark((function t(n){return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.zr.hr(),_d(e)?xd(e):e.Wr.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.zr.stop();case 6:Ed(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.zr}function Xd(e){return e.Hr||(e.Hr=function(e,t,n){var r=Xo(e);return r.Cr(),new ld(t,r.nr,r.credentials,r.N,n)}(e.datastore,e.asyncQueue,{Si:qd.bind(null,e),Ci:Gd.bind(null,e),Vr:Bd.bind(null,e),vr:Hd.bind(null,e)}),e.jr.push(function(){var t=Pt(jt().mark((function t(n){return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Hr.hr(),t.next=4,Ld(e);case 4:t.next=9;break;case 6:return t.next=8,e.Hr.stop();case 8:e.Ur.length>0&&(Wo("RemoteStore","Stopping write stream with ".concat(e.Ur.length," pending writes")),e.Ur=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Hr}var Zd=function(){function e(t,n,r,i,a){De(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new ts,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return je(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new es(Zo.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function ep(e,t){if(Go("AsyncQueue","".concat(t,": ").concat(e)),Jl(e))return new es(Zo.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var tp=function(){function e(t){De(this,e),this.comparator=t?function(e,n){return t(e,n)||Ls.comparator(e.key,n.key)}:function(e,t){return Ls.comparator(e.key,t.key)},this.keyedMap=Sc(),this.sortedSet=new kc(this.comparator)}return je(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),np=function(){function e(){De(this,e),this.Jr=new kc(Ls.comparator)}return je(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Jr.get(t);n?0!==e.type&&3===n.type?this.Jr=this.Jr.insert(t,e):3===e.type&&1!==n.type?this.Jr=this.Jr.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Jr=this.Jr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Jr=this.Jr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Jr=this.Jr.remove(t):1===e.type&&2===n.type?this.Jr=this.Jr.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Jr=this.Jr.insert(t,{type:2,doc:e.doc}):Yo():this.Jr=this.Jr.insert(t,e)}},{key:"Yr",value:function(){var e=[];return this.Jr.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),rp=function(){function e(t,n,r,i,a,o,s,u){De(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u}return je(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Au(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,tp.emptySet(n),a,r,i,!0,!1)}}]),e}(),ip=je((function e(){De(this,e),this.Xr=void 0,this.listeners=[]})),ap=je((function e(){De(this,e),this.queries=new Qf((function(e){return Ru(e)}),Au),this.onlineState="Unknown",this.Zr=new Set}));function op(e,t){return sp.apply(this,arguments)}function sp(){return(sp=Pt(jt().mark((function e(t,n){var r,i,a,o,s;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Xo(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new ip),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Xr=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=ep(e.t0,"Initialization of query '".concat(Pu(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.eo(r.onlineState),o.Xr&&n.no(o.Xr)&&hp(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])})))).apply(this,arguments)}function up(e,t){return cp.apply(this,arguments)}function cp(){return(cp=Pt(jt().mark((function e(t,n){var r,i,a,o,s;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Xo(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lp(e,t){var n,r=Xo(e),i=!1,a=Me(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var c,l=Me(u.listeners);try{for(l.s();!(c=l.n()).done;){c.value.no(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}u.Xr=o}}}catch(f){a.e(f)}finally{a.f()}i&&hp(r)}function fp(e,t,n){var r=Xo(e),i=r.queries.get(t);if(i){var a,o=Me(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function hp(e){e.Zr.forEach((function(e){e.next()}))}var dp=function(){function e(t,n,r){De(this,e),this.query=t,this.so=n,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=r||{}}return je(e,[{key:"no",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=Me(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new rp(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.io?this.oo(e)&&(this.so.next(e),a=!0):this.ao(e,this.onlineState)&&(this.co(e),a=!0),this.ro=e,a}},{key:"onError",value:function(e){this.so.error(e)}},{key:"eo",value:function(e){this.onlineState=e;var t=!1;return this.ro&&!this.io&&this.ao(this.ro,e)&&(this.co(this.ro),t=!0),t}},{key:"ao",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.uo||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"oo",value:function(e){if(e.docChanges.length>0)return!0;var t=this.ro&&this.ro.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"co",value:function(e){e=rp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.io=!0,this.so.next(e)}}]),e}(),pp=function(){function e(t,n){De(this,e),this.payload=t,this.byteLength=n}return je(e,[{key:"ho",value:function(){return"metadata"in this.payload}}]),e}(),vp=function(){function e(t){De(this,e),this.N=t}return je(e,[{key:"zn",value:function(e){return Zc(this.N,e)}},{key:"Hn",value:function(e){return e.metadata.exists?al(this.N,e.document,!1):Xs.newNoDocument(this.zn(e.metadata.name),this.Jn(e.metadata.readTime))}},{key:"Jn",value:function(e){return $c(e)}}]),e}(),mp=function(){function e(t,n,r){De(this,e),this.lo=t,this.localStore=n,this.N=r,this.queries=[],this.documents=[],this.progress=yp(t)}return je(e,[{key:"fo",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"wo",value:function(e){var t,n=new Map,r=new vp(this.N),i=Me(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,s=r.zn(a.metadata.name),u=Me(a.metadata.queries);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=(n.get(c)||Rc()).add(s);n.set(c,l)}}catch(f){u.e(f)}finally{u.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=Pt(jt().mark((function e(){var t,n,r,i,a;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ch(this.localStore,new vp(this.N),this.documents,this.lo.id);case 2:t=e.sent,n=this.wo(this.documents),r=Me(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Rh(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",new uh(Object.assign({},this.progress),t)));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function yp(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var gp=je((function e(t){De(this,e),this.key=t})),kp=je((function e(t){De(this,e),this.key=t})),wp=function(){function e(t,n){De(this,e),this.query=t,this._o=n,this.mo=null,this.current=!1,this.yo=Rc(),this.mutatedKeys=Rc(),this.po=Du(t),this.Eo=new tp(this.po)}return je(e,[{key:"To",get:function(){return this._o}},{key:"Io",value:function(e,t){var n=this,r=t?t.Ao:new np,i=t?t.Eo:this.Eo,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u=xu(this.query)&&i.size===this.query.limit?i.last():null,c=_u(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Ou(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Ro(l,f)||(r.track({type:2,doc:f}),p=!0,(u&&n.po(f,u)>0||c&&n.po(f,c)<0)&&(s=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),xu(this.query)||_u(this.query))for(;o.size>this.query.limit;){var l=xu(this.query)?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Eo:o,Ao:r,Ln:s,mutatedKeys:a}}},{key:"Ro",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Eo;this.Eo=e.Eo,this.mutatedKeys=e.mutatedKeys;var a=e.Ao.Yr();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Yo()}};return n(e)-n(t)}(e.type,t.type)||r.po(e.doc,t.doc)})),this.bo(n);var o=t?this.Po():[],s=0===this.yo.size&&this.current?1:0,u=s!==this.mo;return this.mo=s,0!==a.length||u?{snapshot:new rp(this.query,e.Eo,i,a,e.mutatedKeys,0===s,u,!1),vo:o}:{vo:o}}},{key:"eo",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new np,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{vo:[]}}},{key:"Vo",value:function(e){return!this._o.has(e)&&!!this.Eo.has(e)&&!this.Eo.get(e).hasLocalMutations}},{key:"bo",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t._o=t._o.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t._o=t._o.delete(e)})),this.current=e.current)}},{key:"Po",value:function(){var e=this;if(!this.current)return[];var t=this.yo;this.yo=Rc(),this.Eo.forEach((function(t){e.Vo(t.key)&&(e.yo=e.yo.add(t.key))}));var n=[];return t.forEach((function(t){e.yo.has(t)||n.push(new kp(t))})),this.yo.forEach((function(e){t.has(e)||n.push(new gp(e))})),n}},{key:"So",value:function(e){this._o=e.Gn,this.yo=Rc();var t=this.Io(e.documents);return this.applyChanges(t,!0)}},{key:"Do",value:function(){return rp.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)}}]),e}(),bp=je((function e(t,n,r){De(this,e),this.query=t,this.targetId=n,this.view=r})),xp=je((function e(t){De(this,e),this.key=t,this.Co=!1})),_p=function(){function e(t,n,r,i,a,o){De(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.No={},this.xo=new Qf((function(e){return Ru(e)}),Au),this.ko=new Map,this.$o=new Set,this.Oo=new kc(Ls.comparator),this.Fo=new Map,this.Mo=new Dh,this.Lo={},this.Bo=new Map,this.Uo=Lf.ie(),this.onlineState="Unknown",this.qo=void 0}return je(e,[{key:"isPrimaryClient",get:function(){return!0===this.qo}}]),e}();function Ip(e,t){return Ep.apply(this,arguments)}function Ep(){return(Ep=Pt(jt().mark((function e(t,n){var r,i,a,o,s,u;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=yv(t),!(o=r.xo.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Do(),e.next=15;break;case 6:return e.next=8,bh(r.localStore,Nu(n));case 8:return s=e.sent,u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=13,Tp(r,n,i,"current"===u);case 13:a=e.sent,r.isPrimaryClient&&gd(r.remoteStore,s);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tp(e,t,n,r){return Sp.apply(this,arguments)}function Sp(){return Sp=Pt(jt().mark((function e(t,n,r,i){var a,o,s,u,c,l;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Ko=function(e,n,r){return function(){var e=Pt(jt().mark((function e(t,n,r,i){var a,o,s;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Io(r),e.t0=a.Ln,!e.t0){e.next=6;break}return e.next=5,Ih(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Io(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Gp(t,n.targetId,s.vo),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Ih(t.localStore,n,!0);case 3:return a=e.sent,o=new wp(n,a.Gn),s=o.Io(a.documents),u=Lc.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(s,t.isPrimaryClient,u),Gp(t,r,c.vo),l=new bp(n,r,o),e.abrupt("return",(t.xo.set(n,l),t.ko.has(r)?t.ko.get(r).push(n):t.ko.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),Sp.apply(this,arguments)}function Np(e,t){return Cp.apply(this,arguments)}function Cp(){return(Cp=Pt(jt().mark((function e(t,n){var r,i,a;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Xo(t),i=r.xo.get(n),!((a=r.ko.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ko.set(i.targetId,a.filter((function(e){return!Au(e,n)}))),void r.xo.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,xh(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),kd(r.remoteStore,i.targetId),Hp(r,i.targetId)})).catch(Vf);case 9:e.next=14;break;case 11:return Hp(r,i.targetId),e.next=14,xh(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ap(e,t,n){return Rp.apply(this,arguments)}function Rp(){return(Rp=Pt(jt().mark((function e(t,n,r){var i,a,o;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=gv(t),e.prev=1,e.next=4,function(e,t){var n,r=Xo(e),i=ps.now(),a=t.reduce((function(e,t){return e.add(t.key)}),Rc());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.Qn.Pn(e,a).next((function(a){n=a;var o,s=[],u=Me(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=ic(c,n.get(c.key));null!=l&&s.push(new uc(c.key,l,Js(l.value.mapValue),Zu.exists(!0)))}}catch(f){u.e(f)}finally{u.f()}return r.In.addMutationBatch(e,i,s,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Lo[e.currentUser.toKey()];r||(r=new kc(fs)),r=r.insert(t,n),e.Lo[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,Yp(i,a.changes);case 9:return e.next=11,Ld(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=ep(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}function Pp(e,t){return Op.apply(this,arguments)}function Op(){return(Op=Pt(jt().mark((function e(t,n){var r,i;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Xo(t),e.prev=1,e.next=4,gh(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.Fo.get(t);n&&(Jo(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Co=!0:e.modifiedDocuments.size>0?Jo(n.Co):e.removedDocuments.size>0&&(Jo(n.Co),n.Co=!1))})),e.next=8,Yp(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Vf(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function Dp(e,t,n){var r=Xo(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.xo.forEach((function(e,n){var r=n.view.eo(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Xo(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=Me(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.eo(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&hp(n)}(r.eventManager,t),i.length&&r.No.Tr(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Lp(e,t,n){return jp.apply(this,arguments)}function jp(){return(jp=Pt(jt().mark((function e(t,n,r){var i,a,o,s,u,c;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Xo(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.Fo.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new kc(Ls.comparator)).insert(o,Xs.newNoDocument(o,vs.min())),u=Rc().add(o),c=new Dc(vs.min(),new Map,new xc(fs),s,u),e.next=9,Pp(i,c);case 9:i.Oo=i.Oo.remove(o),i.Fo.delete(n),$p(i),e.next=16;break;case 14:return e.next=16,xh(i.localStore,n,!1).then((function(){return Hp(i,n,r)})).catch(Vf);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mp(e,t){return Fp.apply(this,arguments)}function Fp(){return(Fp=Pt(jt().mark((function e(t,n){var r,i,a;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Xo(t),i=n.batch.batchId,e.prev=1,e.next=4,mh(r.localStore,n);case 4:return a=e.sent,Kp(r,i,null),Bp(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Yp(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Vf(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function Up(e,t,n){return Vp.apply(this,arguments)}function Vp(){return(Vp=Pt(jt().mark((function e(t,n,r){var i,a;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Xo(t),e.prev=1,e.next=4,function(e,t){var n=Xo(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.In.lookupMutationBatch(e,t).next((function(t){return Jo(null!==t),r=t.keys(),n.In.removeMutationBatch(e,t)})).next((function(){return n.In.performConsistencyCheck(e)})).next((function(){return n.Qn.Pn(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Kp(i,n,r),Bp(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Yp(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Vf(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function qp(e,t){return zp.apply(this,arguments)}function zp(){return(zp=Pt(jt().mark((function e(t,n){var r,i,a,o;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Id((r=Xo(t)).remoteStore)||Wo("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Xo(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.In.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.Bo.get(i)||[]).push(n),r.Bo.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=ep(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}function Bp(e,t){(e.Bo.get(t)||[]).forEach((function(e){e.resolve()})),e.Bo.delete(t)}function Kp(e,t,n){var r=Xo(e),i=r.Lo[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Lo[r.currentUser.toKey()]=i}}function Hp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=Me(e.ko.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.xo.delete(a),n&&e.No.jo(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ko.delete(t),e.isPrimaryClient&&e.Mo.cs(t).forEach((function(t){e.Mo.containsKey(t)||Wp(e,t)}))}function Wp(e,t){e.$o.delete(t.path.canonicalString());var n=e.Oo.get(t);null!==n&&(kd(e.remoteStore,n),e.Oo=e.Oo.remove(t),e.Fo.delete(n),$p(e))}function Gp(e,t,n){var r,i=Me(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof gp?(e.Mo.addReference(a.key,t),Qp(e,a)):a instanceof kp?(Wo("SyncEngine","Document no longer in limbo: "+a.key),e.Mo.removeReference(a.key,t),e.Mo.containsKey(a.key)||Wp(e,a.key)):Yo()}}catch(o){i.e(o)}finally{i.f()}}function Qp(e,t){var n=t.key,r=n.path.canonicalString();e.Oo.get(n)||e.$o.has(r)||(Wo("SyncEngine","New document in limbo: "+n),e.$o.add(r),$p(e))}function $p(e){for(;e.$o.size>0&&e.Oo.size<e.maxConcurrentLimboResolutions;){var t=e.$o.values().next().value;e.$o.delete(t);var n=new Ls(ws.fromString(t)),r=e.Uo.next();e.Fo.set(r,new xp(n)),e.Oo=e.Oo.insert(n,r),gd(e.remoteStore,new sf(Nu(bu(n.path)),r,2,us.T))}}function Yp(e,t,n){return Jp.apply(this,arguments)}function Jp(){return Jp=Pt(jt().mark((function e(t,n,r){var i,a,o,s;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Xo(t),a=[],o=[],s=[],e.t0=i.xo.isEmpty(),e.t0){e.next=9;break}return i.xo.forEach((function(e,t){s.push(i.Ko(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=lh.kn(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.No.Tr(a),e.next=9,function(){var e=Pt(jt().mark((function e(t,n){var r,i,a,o,s,u,c,l;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Xo(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Wl.forEach(n,(function(t){return Wl.forEach(t.Nn,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Wl.forEach(t.xn,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Jl(e.t0)){e.next=10;break}throw e.t0;case 10:Wo("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=Me(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(u=r.Un.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),r.Un=r.Un.insert(s,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),Jp.apply(this,arguments)}function Xp(e,t){return Zp.apply(this,arguments)}function Zp(){return(Zp=Pt(jt().mark((function e(t,n){var r,i;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Xo(t)).currentUser.isEqual(n)){e.next=11;break}return Wo("SyncEngine","User change. New user:",n.toKey()),e.next=5,ph(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.Bo.forEach((function(e){e.forEach((function(e){e.reject(new es(Zo.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Bo.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Yp(r,i.Wn);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ev(e,t){var n=Xo(e),r=n.Fo.get(t);if(r&&r.Co)return Rc().add(r.key);var i=Rc(),a=n.ko.get(t);if(!a)return i;var o,s=Me(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.xo.get(u);i=i.unionWith(c.view.To)}}catch(l){s.e(l)}finally{s.f()}return i}function tv(e,t){return nv.apply(this,arguments)}function nv(){return(nv=Pt(jt().mark((function e(t,n){var r,i,a;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Xo(t),e.next=3,Ih(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.So(i),e.abrupt("return",(r.isPrimaryClient&&Gp(r,n.targetId,a.vo),a));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rv(e){return iv.apply(this,arguments)}function iv(){return(iv=Pt(jt().mark((function e(t){var n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Xo(t),e.abrupt("return",Th(n.localStore).then((function(e){return Yp(n,e)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function av(e,t,n,r){return ov.apply(this,arguments)}function ov(){return(ov=Pt(jt().mark((function e(t,n,r,i){var a,o;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Xo(t),e.next=3,function(e,t){var n=Xo(e),r=Xo(n.In);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Xt(e,t).next((function(t){return t?n.Qn.Pn(e,t):Wl.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Ld(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Kp(a,n,i||null),Bp(a,n),function(e,t){Xo(Xo(e).In).te(t)}(a.localStore,n)):Yo();case 11:return e.next=13,Yp(a,o);case 13:e.next=16;break;case 15:Wo("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sv(e,t){return uv.apply(this,arguments)}function uv(){return(uv=Pt(jt().mark((function e(t,n){var r,i,a,o,s,u,c,l;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(yv(r=Xo(t)),gv(r),!0!==n||!0===r.qo){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,cv(r,i.toArray());case 5:return a=e.sent,r.qo=!0,e.next=9,$d(r.remoteStore,!0);case 9:o=Me(a);try{for(o.s();!(s=o.n()).done;)u=s.value,gd(r.remoteStore,u)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.qo){e.next=25;break}return c=[],l=Promise.resolve(),r.ko.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return Hp(r,t),xh(r.localStore,t,!0)})),kd(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,cv(r,c);case 21:return function(e){var t=Xo(e);t.Fo.forEach((function(e,n){kd(t.remoteStore,n)})),t.Mo.us(),t.Fo=new Map,t.Oo=new kc(Ls.comparator)}(r),r.qo=!1,e.next=25,$d(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cv(e,t,n){return lv.apply(this,arguments)}function lv(){return(lv=Pt(jt().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h,d,p,v,m,y;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Xo(t),a=[],o=[],s=Me(n),e.prev=2,s.s();case 4:if((u=s.n()).done){e.next=45;break}if(c=u.value,l=void 0,!(f=i.ko.get(c))||0===f.length){e.next=34;break}return e.next=11,bh(i.localStore,Nu(f[0]));case 11:l=e.sent,h=Me(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.xo.get(p),e.next=20,tv(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Eh(i.localStore,c);case 36:return y=e.sent,e.next=39,bh(i.localStore,y);case 39:return l=e.sent,e.next=42,Tp(i,fv(y),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.No.Tr(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])})))).apply(this,arguments)}function fv(e){return wu(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function hv(e){var t=Xo(e);return Xo(Xo(t.localStore).persistence).pn()}function dv(e,t,n,r){return pv.apply(this,arguments)}function pv(){return(pv=Pt(jt().mark((function e(t,n,r,i){var a,o,s;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Xo(t)).qo){e.next=5;break}Wo("SyncEngine","Ignoring unexpected query state notification."),e.next=21;break;case 5:if(!a.ko.has(n)){e.next=21;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?9:"rejected"===e.t0?16:20;break;case 9:return e.next=11,Th(a.localStore);case 11:return o=e.sent,s=Dc.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=15,Yp(a,o,s);case 15:return e.abrupt("break",21);case 16:return e.next=18,xh(a.localStore,n,!0);case 18:return Hp(a,n,i),e.abrupt("break",21);case 20:Yo();case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vv(e,t,n){return mv.apply(this,arguments)}function mv(){return(mv=Pt(jt().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=yv(t)).qo){e.next=45;break}a=Me(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(s=o.value,!i.ko.has(s)){e.next=10;break}return Wo("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,Eh(i.localStore,s);case 12:return u=e.sent,e.next=15,bh(i.localStore,u);case 15:return c=e.sent,e.next=18,Tp(i,fv(u),c.targetId,!1);case 18:gd(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=Me(r),e.prev=30,h=jt().mark((function e(){var t;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.ko.has(t),!e.t0){e.next=5;break}return e.next=5,xh(i.localStore,t,!1).then((function(){kd(i.remoteStore,t),Hp(i,t)})).catch(Vf);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])})))).apply(this,arguments)}function yv(e){var t=Xo(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Pp.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ev.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Lp.bind(null,t),t.No.Tr=lp.bind(null,t.eventManager),t.No.jo=fp.bind(null,t.eventManager),t}function gv(e){var t=Xo(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Mp.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Up.bind(null,t),t}function kv(e,t,n){var r=Xo(e);(function(){var e=Pt(jt().mark((function e(t,n,r){var i,a,o,s,u;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Xo(e),r=$c(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Je.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=10;break}return e.next=9,n.close();case 9:return e.abrupt("return",void r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)));case 10:return r._updateProgress(yp(i)),a=new mp(i,t.localStore,n.N),e.next=14,n.Qo();case 14:o=e.sent;case 15:if(!o){e.next=25;break}return e.next=18,a.fo(o);case 18:return(s=e.sent)&&r._updateProgress(s),e.next=22,n.Qo();case 22:o=e.sent;case 23:e.next=15;break;case 25:return e.next=27,a.complete();case 27:return u=e.sent,e.next=30,Yp(t,u.Tn,void 0);case 30:return e.next=32,function(e,t){var n=Xo(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Je.saveBundleMetadata(e,t)}))}(t.localStore,i);case 32:r._completeWith(u.progress),e.next=38;break;case 35:e.prev=35,e.t0=e.catch(0),Qo("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0);case 38:case"end":return e.stop()}}),e,null,[[0,35]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(){r.sharedClientState.notifyBundleLoaded()}))}var wv=function(){function e(){De(this,e),this.synchronizeTabs=!1}return je(e,[{key:"initialize",value:function(){var e=Pt(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.N=od(t.databaseInfo.databaseId),this.sharedClientState=this.Wo(t),this.persistence=this.Go(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.zo(t),this.localStore=this.Ho(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"zo",value:function(e){return null}},{key:"Ho",value:function(e){return dh(this.persistence,new fh,e.initialUser,this.N)}},{key:"Go",value:function(e){return new Vh(zh.Ns,this.N)}},{key:"Wo",value:function(e){return new Xh}},{key:"terminate",value:function(){var e=Pt(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),bv=function(e){Ue(n,e);var t=Ke(n);function n(e,r,i){var a;return De(this,n),(a=t.call(this)).Jo=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return je(n,[{key:"initialize",value:function(){var e=Pt(jt().mark((function e(t){var r=this;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sn(Ve(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,Sh(this.localStore);case 4:return e.next=6,this.Jo.initialize(this,t);case 6:return e.next=8,gv(this.Jo.syncEngine);case 8:return e.next=10,Ld(this.Jo.remoteStore);case 10:return e.next=12,this.persistence.nn((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ho",value:function(e){return dh(this.persistence,new fh,e.initialUser,this.N)}},{key:"zo",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new Kf(t,e.asyncQueue)}},{key:"Go",value:function(e){var t=sh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Sf.withCacheSize(this.cacheSizeBytes):Sf.DEFAULT;return new ih(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,id(),ad(),this.N,this.sharedClientState,!!this.forceOwnership)}},{key:"Wo",value:function(e){return new Xh}}]),n}(wv),xv=function(e){Ue(n,e);var t=Ke(n);function n(e,r){var i;return De(this,n),(i=t.call(this,e,r,!1)).Jo=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return je(n,[{key:"initialize",value:function(){var e=Pt(jt().mark((function e(t){var r,i=this;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sn(Ve(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Jo.syncEngine,e.t0=this.sharedClientState instanceof Jh,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={_i:av.bind(null,r),mi:dv.bind(null,r),gi:vv.bind(null,r),pn:hv.bind(null,r),wi:rv.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.nn(function(){var e=Pt(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sv(i.Jo.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Wo",value:function(e){var t=id();if(!Jh.bt(t))throw new es(Zo.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=sh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Jh(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(bv),_v=function(){function e(){De(this,e)}return je(e,[{key:"initialize",value:function(){var e=Pt(jt().mark((function e(t,n){var r=this;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Dp(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Xp.bind(null,this.syncEngine),e.next=12,$d(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new ap}},{key:"createDatastore",value:function(e){var t,n=od(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new rd(t));return function(e,t,n){return new fd(e,t,n)}(e.credentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Dp(o.syncEngine,e,0)},a=ed.bt()?new ed:new Zh,new dd(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new _p(e,t,n,r,i,a);return o&&(s.qo=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Pt(jt().mark((function e(t){var n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Xo(t),Wo("RemoteStore","RemoteStore shutting down."),n.Kr.add(5),e.next=5,md(n);case 5:n.Qr.shutdown(),n.Wr.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function Iv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return Pt(jt().mark((function r(){var i;return jt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return Pt(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var Ev=function(){function e(t){De(this,e),this.observer=t,this.muted=!1}return je(e,[{key:"next",value:function(e){this.observer.next&&this.Yo(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Yo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Xo",value:function(){this.muted=!0}},{key:"Yo",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Tv=function(){function e(t,n){var r=this;De(this,e),this.Zo=t,this.N=n,this.metadata=new ts,this.buffer=new Uint8Array,this.ta=new TextDecoder("utf-8"),this.ea().then((function(e){e&&e.ho()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return je(e,[{key:"close",value:function(){return this.Zo.cancel()}},{key:"getMetadata",value:function(){var e=Pt(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Qo",value:function(){var e=Pt(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.ea());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ea",value:function(){var e=Pt(jt().mark((function e(){var t,n,r,i;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.na();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.ta.decode(t),r=Number(n),isNaN(r)&&this.sa("length string (".concat(n,") is not valid number")),e.next=9,this.ia(r);case 9:return i=e.sent,e.abrupt("return",new pp(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ra",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"na",value:function(){var e=Pt(jt().mark((function e(){var t,n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.ra()<0)){e.next=7;break}return e.next=3,this.oa();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.ra())<0&&this.sa("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ia",value:function(){var e=Pt(jt().mark((function e(t){var n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.oa();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.sa("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.ta.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sa",value:function(e){throw this.Zo.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"oa",value:function(){var e=Pt(jt().mark((function e(){var t,n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Zo.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Sv=function(){function e(t){De(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return je(e,[{key:"lookup",value:function(){var e=Pt(jt().mark((function e(t){var n,r=this;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new es(Zo.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=Pt(jt().mark((function e(t,n){var r,i,a,o,s,u;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Xo(t),i=nl(r.N)+"/documents",a={documents:n.map((function(e){return Xc(r.N,e)}))},e.next=5,r.Ki("BatchGetDocuments",i,a);case 5:return o=e.sent,s=new Map,o.forEach((function(e){var t=ol(r.N,e);s.set(t.key.toString(),t)})),u=[],e.abrupt("return",(n.forEach((function(e){var t=s.get(e.toString());Jo(!!t),u.push(t)})),u));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new pc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=Pt(jt().mark((function e(){var t,n=this;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Ls.fromPath(t);n.mutations.push(new vc(r,n.precondition(r)))})),e.next=7,function(){var e=Pt(jt().mark((function e(t,n){var r,i,a;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Xo(t),i=nl(r.N)+"/documents",a={writes:n.map((function(e){return sl(r.N,e)}))},e.next=3,r.Li("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Yo();t=vs.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new es(Zo.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Zu.updateTime(t):Zu.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(vs.min()))throw new es(Zo.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Zu.updateTime(t)}return Zu.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Nv=function(){function e(t,n,r,i){De(this,e),this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.aa=5,this.rr=new sd(this.asyncQueue,"transaction_retry")}return je(e,[{key:"run",value:function(){this.aa-=1,this.ca()}},{key:"ca",value:function(){var e=this;this.rr.Xi(Pt(jt().mark((function t(){var n,r;return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new Sv(e.datastore),(r=e.ua(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.ha(t)}))}))})).catch((function(t){e.ha(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"ua",value:function(e){try{var t=this.updateFunction(e);return!Ps(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"ha",value:function(e){var t=this;this.aa>0&&this.la(e)?(this.aa-=1,this.asyncQueue.enqueueAndForget((function(){return t.ca(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"la",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!yc(t)}return!1}}]),e}(),Cv=function(){function e(t,n,r){var i=this;De(this,e),this.credentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=zo.UNAUTHENTICATED,this.clientId=ls.I(),this.credentialListener=function(){return Promise.resolve()},this.credentials.start(n,function(){var e=Pt(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Wo("FirestoreClient","Received user=",t.uid),e.next=3,i.credentialListener(t);case 3:i.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}return je(e,[{key:"getConfiguration",value:function(){var e=Pt(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.credentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new es(Zo.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new ts;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Pt(jt().mark((function n(){var r;return jt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.credentials.shutdown(),t.resolve(),n.next=17;break;case 13:n.prev=13,n.t2=n.catch(0),r=ep(n.t2,"Failed to shutdown persistence"),t.reject(r);case 17:case"end":return n.stop()}}),n,null,[[0,13]])})))),t.promise}}]),e}();function Av(e,t){return Rv.apply(this,arguments)}function Rv(){return Rv=Pt(jt().mark((function e(t,n){var r,i;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Wo("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Pt(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,ph(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),Rv.apply(this,arguments)}function Pv(e,t){return Ov.apply(this,arguments)}function Ov(){return Ov=Pt(jt().mark((function e(t,n){var r,i;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,Dv(t);case 3:return r=e.sent,Wo("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return function(){var e=Pt(jt().mark((function e(t,n){var r,i;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Xo(t)).asyncQueue.verifyOperationInProgress(),Wo("RemoteStore","RemoteStore received new credentials"),i=Id(r),r.Kr.add(3),e.next=6,md(r);case 6:return i&&r.Wr.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.Kr.delete(3),e.next=12,pd(r);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(n.remoteStore,e)})),t.onlineComponents=n;case 12:case"end":return e.stop()}}),e)}))),Ov.apply(this,arguments)}function Dv(e){return Lv.apply(this,arguments)}function Lv(){return(Lv=Pt(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Wo("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,Av(t,new wv);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jv(e){return Mv.apply(this,arguments)}function Mv(){return(Mv=Pt(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Wo("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,Pv(t,new _v);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fv(e){return Dv(e).then((function(e){return e.persistence}))}function Uv(e){return Dv(e).then((function(e){return e.localStore}))}function Vv(e){return jv(e).then((function(e){return e.remoteStore}))}function qv(e){return jv(e).then((function(e){return e.syncEngine}))}function zv(e){return Bv.apply(this,arguments)}function Bv(){return(Bv=Pt(jt().mark((function e(t){var n,r;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jv(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Ip.bind(null,n.syncEngine),r.onUnlisten=Np.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new ts;return e.asyncQueue.enqueueAndForget(Pt(jt().mark((function i(){return jt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Ev({next:function(a){t.enqueueAndForget((function(){return up(e,o)}));var s=a.docs.has(n);!s&&a.fromCache?i.reject(new es(Zo.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&a.fromCache&&r&&"server"===r.source?i.reject(new es(Zo.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new dp(bu(n.path),a,{includeMetadataChanges:!0,uo:!0});return op(e,o)},i.next=3,zv(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function Hv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new ts;return e.asyncQueue.enqueueAndForget(Pt(jt().mark((function i(){return jt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Ev({next:function(n){t.enqueueAndForget((function(){return up(e,o)})),n.fromCache&&"server"===r.source?i.reject(new es(Zo.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new dp(n,a,{includeMetadataChanges:!0,uo:!0});return op(e,o)},i.next=3,zv(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var Wv=je((function e(t,n,r,i,a,o,s,u){De(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=u})),Gv=function(){function e(t,n){De(this,e),this.projectId=t,this.database=n||"(default)"}return je(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}]),e}(),Qv=new Map;function $v(e,t,n){if(!n)throw new es(Zo.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Yv(e,t,n,r){if(!0===t&&!0===r)throw new es(Zo.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Jv(e){if(!Ls.isDocumentKey(e))throw new es(Zo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Xv(e){if(Ls.isDocumentKey(e))throw new es(Zo.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Zv(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Yo()}function em(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new es(Zo.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Zv(e);throw new es(Zo.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function tm(e,t){if(t<=0)throw new es(Zo.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var nm=function(){function e(t){var n;if(De(this,e),void 0===t.host){if(void 0!==t.ssl)throw new es(Zo.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new es(Zo.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Yv("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return je(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),rm=function(){function e(t,n){De(this,e),this._credentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nm({}),this._settingsFrozen=!1,t instanceof Gv?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new es(Zo.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gv(e.options.projectId)}(t))}return je(e,[{key:"app",get:function(){if(!this._app)throw new es(Zo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new es(Zo.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nm(e),void 0!==e.credentials&&(this._credentials=function(e){if(!e)return new rs;switch(e.type){case"gapi":var t=e.client;return Jo(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new ss(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new es(Zo.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Qv.get(e);t&&(Wo("ComponentProvider","Removing Datastore"),Qv.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function im(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=em(e,rm))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Qo("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,s;if("string"==typeof i.mockUserToken)o=i.mockUserToken,s=zo.MOCK_USER;else{o=et(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new es(Zo.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new zo(u)}e._credentials=new is(new ns(o,s))}}var am=function(){function e(t,n,r){De(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return je(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new sm(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),om=function(){function e(t,n,r){De(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return je(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),sm=function(e){Ue(n,e);var t=Ke(n);function n(e,r,i){var a;return De(this,n),(a=t.call(this,e,r,bu(i)))._path=i,a.type="collection",a}return je(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new am(this.firestore,null,new Ls(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(om);function um(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=bt(e),$v("collection","path",t),e instanceof rm){var a=ws.fromString.apply(ws,[t].concat(r));return Xv(a),new sm(e,null,a)}if(!(e instanceof am||e instanceof sm))throw new es(Zo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(ws.fromString.apply(ws,[t].concat(r)));return Xv(o),new sm(e.firestore,null,o)}function cm(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=bt(e),1===arguments.length&&(t=ls.I()),$v("doc","path",t),e instanceof rm){var a=ws.fromString.apply(ws,[t].concat(r));return Jv(a),new am(e,null,new Ls(a))}if(!(e instanceof am||e instanceof sm))throw new es(Zo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(ws.fromString.apply(ws,[t].concat(r)));return Jv(o),new am(e.firestore,e instanceof sm?e.converter:null,new Ls(o))}function lm(e,t){return e=bt(e),t=bt(t),(e instanceof am||e instanceof sm)&&(t instanceof am||t instanceof sm)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function fm(e,t){return e=bt(e),t=bt(t),e instanceof om&&t instanceof om&&e.firestore===t.firestore&&Au(e._query,t._query)&&e.converter===t.converter}var hm=function(){function e(){var t=this;De(this,e),this.fa=Promise.resolve(),this.da=[],this.wa=!1,this._a=[],this.ma=null,this.ga=!1,this.ya=!1,this.pa=[],this.rr=new sd(this,"async_queue_retry"),this.Ea=function(){var e=ad();e&&Wo("AsyncQueue","Visibility state changed to "+e.visibilityState),t.rr.tr()};var n=ad();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Ea)}return je(e,[{key:"isShuttingDown",get:function(){return this.wa}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Ta(),this.Ia(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.wa){this.wa=!0,this.ya=e||!1;var t=ad();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ea)}}},{key:"enqueue",value:function(e){var t=this;if(this.Ta(),this.wa)return new Promise((function(){}));var n=new ts;return this.Ia((function(){return t.wa&&t.ya?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.da.push(e),t.Aa()}))}},{key:"Aa",value:function(){var e=Pt(jt().mark((function e(){var t=this;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.da.length){e.next=14;break}return e.prev=1,e.next=4,this.da[0]();case 4:this.da.shift(),this.rr.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Jl(e.t0)){e.next=12;break}throw e.t0;case 12:Wo("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.da.length>0&&this.rr.Xi((function(){return t.Aa()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Ia",value:function(e){var t=this,n=this.fa.then((function(){return t.ga=!0,e().catch((function(e){throw t.ma=e,t.ga=!1,Go("INTERNAL UNHANDLED ERROR: ",function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e})).then((function(e){return t.ga=!1,e}))}));return this.fa=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Ta(),this.pa.indexOf(e)>-1&&(t=0);var i=Zd.createAndSchedule(this,e,t,n,(function(e){return r.Ra(e)}));return this._a.push(i),i}},{key:"Ta",value:function(){this.ma&&Yo()}},{key:"verifyOperationInProgress",value:function(){}},{key:"ba",value:function(){var e=Pt(jt().mark((function e(){var t;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.fa,e.next=3,t;case 3:if(t!==this.fa){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Pa",value:function(e){var t,n=Me(this._a);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"va",value:function(e){var t=this;return this.ba().then((function(){t._a.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=Me(t._a);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.ba()}))}},{key:"Va",value:function(e){this.pa.push(e)}},{key:"Ra",value:function(e){var t=this._a.indexOf(e);this._a.splice(t,1)}}]),e}();function dm(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=Me(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var pm=function(){function e(){De(this,e),this._progressObserver={},this._taskCompletionResolver=new ts,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return je(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),vm=function(e){Ue(n,e);var t=Ke(n);function n(e,r){var i;return De(this,n),(i=t.call(this,e,r)).type="firestore",i._queue=new hm,i._persistenceKey="name"in e?e.name:"[DEFAULT]",i}return je(n,[{key:"_terminate",value:function(){return this._firestoreClient||ym(this),this._firestoreClient.terminate()}}]),n}(rm);function mm(e){return e._firestoreClient||ym(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function ym(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Wv(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new Cv(e._credentials,e._queue,r)}function gm(e,t,n){var r=new ts;return e.asyncQueue.enqueue(Pt(jt().mark((function i(){return jt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Av(e,n);case 3:return i.next=5,Pv(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===Zo.FAILED_PRECONDITION||e.code===Zo.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function km(e){return function(e){return e.asyncQueue.enqueue(Pt(jt().mark((function t(){var n,r;return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Fv(e);case 2:return n=t.sent,t.next=5,Vv(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Xo(e);return t.Kr.delete(0),pd(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(mm(e=em(e,vm)))}function wm(e){return function(e){return e.asyncQueue.enqueue(Pt(jt().mark((function t(){var n,r;return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Fv(e);case 2:return n=t.sent,t.next=5,Vv(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=Pt(jt().mark((function e(t){var n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Xo(t)).Kr.add(0),e.next=4,md(n);case 4:n.Wr.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(mm(e=em(e,vm)))}function bm(e,t){var n=mm(e=em(e,vm)),r=new pm;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new Tv(e,t)}(function(e,t){if(e instanceof Uint8Array)return Iv(e,t);if(e instanceof ArrayBuffer)return Iv(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,od(t));e.asyncQueue.enqueueAndForget(Pt(jt().mark((function t(){return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=kv,t.next=3,qv(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function xm(e,t){return function(e,t){return e.asyncQueue.enqueue(Pt(jt().mark((function n(){return jt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Xo(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Je.getNamedQuery(e,t)}))},n.next=3,Uv(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(mm(e=em(e,vm)),t).then((function(t){return t?new om(e,null,t.query):null}))}function _m(e){if(e._initialized||e._terminated)throw new es(Zo.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Im=function(){function e(){De(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new es(Zo.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xs(n)}return je(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var Em=function(){function e(t){De(this,e),this._byteString=t}return je(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Is.fromBase64String(t))}catch(t){throw new es(Zo.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Is.fromUint8Array(t))}}]),e}(),Tm=je((function e(t){De(this,e),this._methodName=t})),Sm=function(){function e(t,n){if(De(this,e),!isFinite(t)||t<-90||t>90)throw new es(Zo.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new es(Zo.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return je(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return fs(this._lat,e._lat)||fs(this._long,e._long)}}]),e}(),Nm=/^__.*__$/,Cm=function(){function e(t,n,r){De(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return je(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new uc(e,this.data,this.fieldMask,t,this.fieldTransforms):new sc(e,this.data,t,this.fieldTransforms)}}]),e}(),Am=function(){function e(t,n,r){De(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return je(e,[{key:"toMutation",value:function(e,t){return new uc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function Rm(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Yo()}}var Pm=function(){function e(t,n,r,i,a,o){De(this,e),this.settings=t,this.databaseId=n,this.N=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Sa(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return je(e,[{key:"path",get:function(){return this.settings.path}},{key:"Da",get:function(){return this.settings.Da}},{key:"Ca",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Na",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Ca({path:n,xa:!1});return r.ka(e),r}},{key:"$a",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Ca({path:n,xa:!1});return r.Sa(),r}},{key:"Oa",value:function(e){return this.Ca({path:void 0,xa:!0})}},{key:"Fa",value:function(e){return Xm(e,this.settings.methodName,this.settings.Ma||!1,this.path,this.settings.La)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Sa",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ka(this.path.get(e))}},{key:"ka",value:function(e){if(0===e.length)throw this.Fa("Document fields must not be empty");if(Rm(this.Da)&&Nm.test(e))throw this.Fa('Document fields cannot begin and end with "__"')}}]),e}(),Om=function(){function e(t,n,r){De(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.N=r||od(t)}return je(e,[{key:"Ba",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Pm({Da:e,methodName:t,La:n,path:xs.emptyPath(),xa:!1,Ma:r},this.databaseId,this.N,this.ignoreUndefinedProperties)}}]),e}();function Dm(e){var t=e._freezeSettings(),n=od(e._databaseId);return new Om(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Lm(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.Ba(a.merge||a.mergeFields?2:0,t,n,i);Qm("Data must be an object, but it was:",o,r);var s,u,c=Wm(r,o);if(a.merge)s=new _s(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=Me(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=$m(t,d,n);if(!o.contains(p))throw new es(Zo.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));Zm(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}s=new _s(f),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new Cm(new Ys(c),s,u)}var jm=function(e){Ue(n,e);var t=Ke(n);function n(){return De(this,n),t.apply(this,arguments)}return je(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Da)throw 1===e.Da?e.Fa("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Fa("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Tm);function Mm(e,t,n){return new Pm({Da:3,La:t.settings.La,methodName:e._methodName,xa:n},t.databaseId,t.N,t.ignoreUndefinedProperties)}var Fm=function(e){Ue(n,e);var t=Ke(n);function n(){return De(this,n),t.apply(this,arguments)}return je(n,[{key:"_toFieldTransform",value:function(e){return new Ju(e.path,new Bu)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Tm),Um=function(e){Ue(n,e);var t=Ke(n);function n(e,r){var i;return De(this,n),(i=t.call(this,e)).Ua=r,i}return je(n,[{key:"_toFieldTransform",value:function(e){var t=Mm(this,e,!0),n=this.Ua.map((function(e){return Hm(e,t)})),r=new Ku(n);return new Ju(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Tm),Vm=function(e){Ue(n,e);var t=Ke(n);function n(e,r){var i;return De(this,n),(i=t.call(this,e)).Ua=r,i}return je(n,[{key:"_toFieldTransform",value:function(e){var t=Mm(this,e,!0),n=this.Ua.map((function(e){return Hm(e,t)})),r=new Wu(n);return new Ju(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Tm),qm=function(e){Ue(n,e);var t=Ke(n);function n(e,r){var i;return De(this,n),(i=t.call(this,e)).qa=r,i}return je(n,[{key:"_toFieldTransform",value:function(e){var t=new Qu(e.N,Fu(e.N,this.qa));return new Ju(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Tm);function zm(e,t,n,r){var i=e.Ba(1,t,n);Qm("Data must be an object, but it was:",i,r);var a=[],o=Ys.empty();ys(r,(function(e,r){var s=Jm(t,e,n);r=bt(r);var u=i.$a(s);if(r instanceof jm)a.push(s);else{var c=Hm(r,u);null!=c&&(a.push(s),o.set(s,c))}}));var s=new _s(a);return new Am(o,s,i.fieldTransforms)}function Bm(e,t,n,r,i,a){var o=e.Ba(1,t,n),s=[$m(t,r,n)],u=[i];if(a.length%2!=0)throw new es(Zo.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)s.push($m(t,a[c])),u.push(a[c+1]);for(var l=[],f=Ys.empty(),h=s.length-1;h>=0;--h)if(!Zm(l,s[h])){var d=s[h],p=u[h];p=bt(p);var v=o.$a(d);if(p instanceof jm)l.push(d);else{var m=Hm(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new _s(l);return new Am(f,y,o.fieldTransforms)}function Km(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Hm(n,e.Ba(r?4:3,t))}function Hm(e,t){if(Gm(e=bt(e)))return Qm("Unsupported field value:",t,e),Wm(e,t);if(e instanceof Tm)return function(e,t){if(!Rm(t.Da))throw t.Fa("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Fa("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xa&&4!==t.Da)throw t.Fa("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=Me(e);try{for(a.s();!(n=a.n()).done;){var o=Hm(n.value,t.Oa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=bt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Fu(t.N,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=ps.fromDate(e);return{timestampValue:Wc(t.N,n)}}if(e instanceof ps){var r=new ps(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Wc(t.N,r)}}if(e instanceof Sm)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Em)return{bytesValue:Gc(t.N,e._byteString)};if(e instanceof am){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.Fa("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Yc(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Fa("Unsupported field value: ".concat(Zv(e)))}(e,t)}function Wm(e,t){var n={};return gs(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ys(e,(function(e,r){var i=Hm(r,t.Na(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Gm(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ps||e instanceof Sm||e instanceof Em||e instanceof am||e instanceof Tm)}function Qm(e,t,n){if(!Gm(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Zv(n);throw"an object"===r?t.Fa(e+" a custom object"):t.Fa(e+" "+r)}}function $m(e,t,n){if((t=bt(t))instanceof Im)return t._internalPath;if("string"==typeof t)return Jm(e,t);throw Xm("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}var Ym=new RegExp("[~\\*/\\[\\]]");function Jm(e,t,n){if(t.search(Ym)>=0)throw Xm("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return He(Im,Se(t.split(".")))._internalPath}catch(r){throw Xm("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Xm(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new es(Zo.INVALID_ARGUMENT,s+e+u)}function Zm(e,t){return e.some((function(e){return e.isEqual(t)}))}var ey=function(){function e(t,n,r,i,a){De(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return je(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new am(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new ty(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(ny("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),ty=function(e){Ue(n,e);var t=Ke(n);function n(){return De(this,n),t.apply(this,arguments)}return je(n,[{key:"data",value:function(){return Sn(Ve(n.prototype),"data",this).call(this)}}]),n}(ey);function ny(e,t){return"string"==typeof t?Jm(e,t):t instanceof Im?t._internalPath:t._delegate._internalPath}var ry=function(){function e(t,n){De(this,e),this.hasPendingWrites=t,this.fromCache=n}return je(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),iy=function(e){Ue(n,e);var t=Ke(n);function n(e,r,i,a,o,s){var u;return De(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return je(n,[{key:"exists",value:function(){return Sn(Ve(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new ay(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(ny("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(ey),ay=function(e){Ue(n,e);var t=Ke(n);function n(){return De(this,n),t.apply(this,arguments)}return je(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Sn(Ve(n.prototype),"data",this).call(this,e)}}]),n}(iy),oy=function(){function e(t,n,r,i){De(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new ry(i.hasPendingWrites,i.fromCache),this.query=r}return je(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new ay(n._firestore,n._userDataWriter,r.key,r,new ry(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new es(Zo.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new ay(e._firestore,e._userDataWriter,t.doc.key,t.doc,new ry(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new ay(e._firestore,e._userDataWriter,t.doc.key,t.doc,new ry(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:sy(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function sy(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Yo()}}function uy(e,t){return e instanceof iy&&t instanceof iy?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof oy&&t instanceof oy&&e._firestore===t._firestore&&fm(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function cy(e){if(_u(e)&&0===e.explicitOrderBy.length)throw new es(Zo.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ly=je((function e(){De(this,e)}));function fy(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var hy=function(e){Ue(n,e);var t=Ke(n);function n(e,r,i){var a;return De(this,n),(a=t.call(this)).Ka=e,a.ja=r,a.Qa=i,a.type="where",a}return je(n,[{key:"_apply",value:function(e){var t=Dm(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new es(Zo.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on FieldPath.documentId()."));if("in"===a||"not-in"===a){_y(o,a);var u,c=[],l=Me(o);try{for(l.s();!(u=l.n()).done;){var f=u.value;c.push(xy(r,e,f))}}catch(d){l.e(d)}finally{l.f()}s={arrayValue:{values:c}}}else s=xy(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||_y(o,a),s=Km(n,"where",o,"in"===a||"not-in"===a);var h=iu.create(i,a,s);return function(e,t){if(t.v()){var n=Eu(e);if(null!==n&&!n.isEqual(t.field))throw new es(Zo.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=Iu(e);null!==r&&Iy(e,t.field,r)}var i=function(e,t){var n,r=Me(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new es(Zo.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new es(Zo.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.Ka,this.ja,this.Qa);return new om(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new ku(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(ly);var dy=function(e){Ue(n,e);var t=Ke(n);function n(e,r){var i;return De(this,n),(i=t.call(this)).Ka=e,i.Wa=r,i.type="orderBy",i}return je(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new es(Zo.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new es(Zo.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new vu(t,n);return function(e,t){if(null===Iu(e)){var n=Eu(e);null!==n&&Iy(e,n,t.field)}}(e,r),r}(e._query,this.Ka,this.Wa);return new om(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new ku(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(ly);var py=function(e){Ue(n,e);var t=Ke(n);function n(e,r,i){var a;return De(this,n),(a=t.call(this)).type=e,a.Ga=r,a.za=i,a}return je(n,[{key:"_apply",value:function(e){return new om(e.firestore,e.converter,Cu(e._query,this.Ga,this.za))}}]),n}(ly);var vy=function(e){Ue(n,e);var t=Ke(n);function n(e,r,i){var a;return De(this,n),(a=t.call(this)).type=e,a.Ha=r,a.Ja=i,a}return je(n,[{key:"_apply",value:function(e){var t=by(e,this.type,this.Ha,this.Ja);return new om(e.firestore,e.converter,function(e,t){return new ku(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(ly);function my(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new vy("startAt",t,!0)}function yy(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new vy("startAfter",t,!1)}var gy=function(e){Ue(n,e);var t=Ke(n);function n(e,r,i){var a;return De(this,n),(a=t.call(this)).type=e,a.Ha=r,a.Ja=i,a}return je(n,[{key:"_apply",value:function(e){var t=by(e,this.type,this.Ha,this.Ja);return new om(e.firestore,e.converter,function(e,t){return new ku(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(ly);function ky(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new gy("endBefore",t,!0)}function wy(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new gy("endAt",t,!1)}function by(e,t,n,r){if(n[0]=bt(n[0]),n[0]instanceof ey)return function(e,t,n,r,i){if(!r)throw new es(Zo.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],s=Me(Su(e));try{for(s.s();!(a=s.n()).done;){var u=a.value;if(u.field.isKeyField())o.push(Bs(t,r.key));else{var c=r.data.field(u.field);if(Cs(c))throw new es(Zo.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new es(Zo.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){s.e(f)}finally{s.f()}return new du(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=Dm(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new es(Zo.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var s=[],u=0;u<i.length;u++){var c=i[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new es(Zo.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Tu(e)&&-1!==c.indexOf("/"))throw new es(Zo.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(ws.fromString(c));if(!Ls.isDocumentKey(l))throw new es(Zo.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Ls(l);s.push(Bs(t,f))}else{var h=Km(n,r,c);s.push(h)}}return new du(s,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function xy(e,t,n){if("string"==typeof(n=bt(n))){if(""===n)throw new es(Zo.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Tu(t)&&-1!==n.indexOf("/"))throw new es(Zo.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(ws.fromString(n));if(!Ls.isDocumentKey(r))throw new es(Zo.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Bs(e,new Ls(r))}if(n instanceof am)return Bs(e,n._key);throw new es(Zo.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Zv(n),"."))}function _y(e,t){if(!Array.isArray(e)||0===e.length)throw new es(Zo.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new es(Zo.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function Iy(e,t,n){if(!n.isEqual(t))throw new es(Zo.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var Ey=function(){function e(){De(this,e)}return je(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(js(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ss(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ns(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Yo()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return ys(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new Sm(Ss(e.latitude),Ss(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=As(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Rs(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Ts(e);return new ps(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=ws.fromString(e);Jo(xl(n));var r=new Gv(n.get(1),n.get(3)),i=new Ls(n.popFirst(5));return r.isEqual(t)||Go("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function Ty(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Sy=function(e){Ue(n,e);var t=Ke(n);function n(e){var r;return De(this,n),(r=t.call(this)).firestore=e,r}return je(n,[{key:"convertBytes",value:function(e){return new Em(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new am(this.firestore,null,t)}}]),n}(Ey),Ny=function(){function e(t,n){De(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Dm(t)}return je(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=Cy(e,this._firestore),i=Ty(r.converter,t,n),a=Lm(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Zu.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=Cy(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=bt(t))||t instanceof Im?Bm(this._dataReader,"WriteBatch.update",i._key,t,n,o):zm(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Zu.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=Cy(e,this._firestore);return this._mutations=this._mutations.concat(new pc(t._key,Zu.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new es(Zo.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function Cy(e,t){if((e=bt(e)).firestore!==t)throw new es(Zo.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var Ay=function(e){Ue(n,e);var t=Ke(n);function n(e){var r;return De(this,n),(r=t.call(this)).firestore=e,r}return je(n,[{key:"convertBytes",value:function(e){return new Em(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new am(this.firestore,null,t)}}]),n}(Ey);function Ry(e){e=em(e,am);var t=em(e.firestore,vm),n=mm(t),r=new Ay(t);return function(e,t){var n=new ts;return e.asyncQueue.enqueueAndForget(Pt(jt().mark((function r(){return jt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Pt(jt().mark((function e(t,n,r){var i,a;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Xo(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.Qn.An(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new es(Zo.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=ep(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Uv(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new iy(t,r,e._key,n,new ry(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function Py(e){e=em(e,om);var t=em(e.firestore,vm),n=mm(t),r=new Ay(t);return function(e,t){var n=new ts;return e.asyncQueue.enqueueAndForget(Pt(jt().mark((function r(){return jt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Pt(jt().mark((function e(t,n,r){var i,a,o,s,u;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ih(t,n,!0);case 3:i=e.sent,a=new wp(n,i.Gn),o=a.Io(i.documents),s=a.applyChanges(o,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),u=ep(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(u);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Uv(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new oy(t,r,e,n)}))}function Oy(e,t,n){e=em(e,am);var r=em(e.firestore,vm),i=Ty(e.converter,t,n);return My(r,[Lm(Dm(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Zu.none())])}function Dy(e,t,n){e=em(e,am);for(var r=em(e.firestore,vm),i=Dm(r),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return My(r,[("string"==typeof(t=bt(t))||t instanceof Im?Bm(i,"updateDoc",e._key,t,n,o):zm(i,"updateDoc",e._key,t)).toMutation(e._key,Zu.exists(!0))])}function Ly(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=bt(e);var s={includeMetadataChanges:!1},u=0;"object"!=typeof n[u]||dm(n[u])||(s=n[u],u++);var c,l,f,h={includeMetadataChanges:s.includeMetadataChanges};if(dm(n[u])){var d=n[u];n[u]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[u+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[u+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof am)l=em(e.firestore,vm),f=bu(e._key.path),c={next:function(t){n[u]&&n[u](Fy(l,e,t))},error:n[u+1],complete:n[u+2]};else{var p=em(e,om);l=em(p.firestore,vm),f=p._query;var v=new Ay(l);c={next:function(e){n[u]&&n[u](new oy(l,v,p,e))},error:n[u+1],complete:n[u+2]},cy(e._query)}return function(e,t,n,r){var i=new Ev(r),a=new dp(t,i,n);return e.asyncQueue.enqueueAndForget(Pt(jt().mark((function t(){return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=op,t.next=3,zv(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Xo(),e.asyncQueue.enqueueAndForget(Pt(jt().mark((function t(){return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=up,t.next=3,zv(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(mm(l),f,h,c)}function jy(e,t){return function(e,t){var n=new Ev(t);return e.asyncQueue.enqueueAndForget(Pt(jt().mark((function t(){return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Xo(e).Zr.add(t),t.next()},t.next=3,zv(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Xo(),e.asyncQueue.enqueueAndForget(Pt(jt().mark((function t(){return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Xo(e).Zr.delete(t)},t.next=3,zv(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(mm(e=em(e,vm)),dm(t)?t:{next:t})}function My(e,t){return function(e,t){var n=new ts;return e.asyncQueue.enqueueAndForget(Pt(jt().mark((function r(){return jt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Ap,r.next=3,qv(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(mm(e),t)}function Fy(e,t,n){var r=n.docs.get(t._key),i=new Ay(e);return new iy(e,i,t._key,r,new ry(n.hasPendingWrites,n.fromCache),t.converter)}var Uy=function(e){Ue(n,e);var t=Ke(n);function n(e,r){var i;return De(this,n),(i=t.call(this,e,r))._firestore=e,i}return je(n,[{key:"get",value:function(e){var t=this,r=Cy(e,this._firestore),i=new Ay(this._firestore);return Sn(Ve(n.prototype),"get",this).call(this,e).then((function(e){return new iy(t._firestore,i,r._key,e._document,new ry(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){De(this,e),this._firestore=t,this._transaction=n,this._dataReader=Dm(t)}return je(e,[{key:"get",value:function(e){var t=this,n=Cy(e,this._firestore),r=new Sy(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Yo();var i=e[0];if(i.isFoundDocument())return new ey(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new ey(t._firestore,r,n._key,null,n.converter);throw Yo()}))}},{key:"set",value:function(e,t,n){var r=Cy(e,this._firestore),i=Ty(r.converter,t,n),a=Lm(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=Cy(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=bt(t))||t instanceof Im?Bm(this._dataReader,"Transaction.update",i._key,t,n,o):zm(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=Cy(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function Vy(e,t){return function(e,t){var n=new ts;return e.asyncQueue.enqueueAndForget(Pt(jt().mark((function r(){var i;return jt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e){return jv(e).then((function(e){return e.datastore}))}(e);case 2:i=r.sent,new Nv(e.asyncQueue,i,t,n).run();case 4:case"end":return r.stop()}}),r)})))),n.promise}(mm(e),(function(n){return t(new Uy(e,n))}))}function qy(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Um("arrayUnion",t)}function zy(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Vm("arrayRemove",t)}!function(e){Bo=e}(ln),en(new St("firestore",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=new vm(r,new as(e.getProvider("auth-internal")));return n=Object.assign({useFetchStreams:!0},n),i._setSettings(n),i}),"PUBLIC")),mn("@firebase/firestore","3.1.0",undefined);function By(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new es("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function Ky(){if("undefined"===typeof Uint8Array)throw new es("unimplemented","Uint8Arrays are not available in this environment.")}function Hy(){if("undefined"==typeof atob)throw new es("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Wy=function(){function e(t){De(this,e),this._delegate=t}return je(e,[{key:"toBase64",value:function(){return Hy(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return Ky(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return Hy(),new e(Em.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return Ky(),new e(Em.fromUint8Array(t))}}]),e}();function Gy(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=Me(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var Qy=function(){function e(){De(this,e)}return je(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){_m(e=em(e,vm));var n=mm(e),r=e._freezeSettings(),i=new _v;return gm(n,i,new bv(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){_m(e=em(e,vm));var t=mm(e),n=e._freezeSettings(),r=new _v;return gm(t,r,new xv(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new es(Zo.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new ts;return e._queue.enqueueAndForgetEvenWhileRestricted(Pt(jt().mark((function n(){return jt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=Pt(jt().mark((function e(t){var n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ql.bt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Ql.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(sh(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),$y=function(){function e(t,n,r){var i=this;De(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Gv||(this._appCompat=t)}return je(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Qo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};im(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return km(this._delegate)}},{key:"disableNetwork",value:function(){return wm(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&Yv("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new ts;return e.asyncQueue.enqueueAndForget(Pt(jt().mark((function n(){return jt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=qp,n.next=3,qv(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(mm(e=em(e,vm)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return jy(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new es("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new cg(this,um(this._delegate,e))}catch(t){throw tg(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new eg(this,cm(this._delegate,e))}catch(t){throw tg(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new og(this,function(e,t){if(e=em(e,rm),$v("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new es(Zo.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new om(e,null,function(e){return new ku(ws.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw tg(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return Vy(this._delegate,(function(n){return e(new Jy(t,n))}))}},{key:"batch",value:function(){var e=this;return mm(this._delegate),new Xy(new Ny(this._delegate,(function(t){return My(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return bm(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return xm(this._delegate,e).then((function(e){return e?new og(t,e):null}))}}]),e}(),Yy=function(e){Ue(n,e);var t=Ke(n);function n(e){var r;return De(this,n),(r=t.call(this)).firestore=e,r}return je(n,[{key:"convertBytes",value:function(e){return new Wy(new Em(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return eg.forKey(t,this.firestore,null)}}]),n}(Ey);var Jy=function(){function e(t,n){De(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new Yy(t)}return je(e,[{key:"get",value:function(e){var t=this,n=lg(e);return this._delegate.get(n).then((function(e){return new ig(t._firestore,new iy(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=lg(e);return n?(By("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=lg(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=lg(e);return this._delegate.delete(t),this}}]),e}(),Xy=function(){function e(t){De(this,e),this._delegate=t}return je(e,[{key:"set",value:function(e,t,n){var r=lg(e);return n?(By("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=lg(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=lg(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),Zy=function(){function e(t,n,r){De(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return je(e,[{key:"fromFirestore",value:function(e,t){var n=new ay(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ag(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new Yy(t),n),i.set(n,a)),a}}]),e}();Zy.INSTANCES=new WeakMap;var eg=function(){function e(t,n){De(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Yy(t)}return je(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new cg(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new cg(this.firestore,um(this._delegate,e))}catch(t){throw tg(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=bt(e))instanceof am&&lm(this._delegate,e)}},{key:"set",value:function(e,t){t=By("DocumentReference.set",t);try{return t?Oy(this._delegate,e,t):Oy(this._delegate,e)}catch(n){throw tg(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Dy(this._delegate,e):Dy.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw tg(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return My(em(e.firestore,vm),[new pc(e._key,Zu.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=ng(n),a=rg(n,(function(t){return new ig(e.firestore,new iy(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return Ly(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?Ry(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=em(e,am);var t=em(e.firestore,vm);return Kv(mm(t),e._key,{source:"server"}).then((function(n){return Fy(t,e,n)}))}(this._delegate):function(e){e=em(e,am);var t=em(e.firestore,vm);return Kv(mm(t),e._key).then((function(n){return Fy(t,e,n)}))}(this._delegate)).then((function(e){return new ig(t.firestore,new iy(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Zy.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new es("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new am(n._delegate,r,new Ls(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new am(n._delegate,r,t))}}]),e}();function tg(e,t,n){return e.message=e.message.replace(t,n),e}function ng(e){var t,n=Me(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!Gy(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function rg(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=Gy(e[0])?e[0]:Gy(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var ig=function(){function e(t,n){De(this,e),this._firestore=t,this._delegate=n}return je(e,[{key:"ref",get:function(){return new eg(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return uy(this._delegate,e._delegate)}}]),e}(),ag=function(e){Ue(n,e);var t=Ke(n);function n(){return De(this,n),t.apply(this,arguments)}return je(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||Yo()}(void 0!==t),t}}]),n}(ig),og=function(){function e(t,n){De(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Yy(t)}return je(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,fy(this._delegate,function(e,t,n){var r=t,i=ny("where",e);return new hy(i,r,n)}(t,n,r)))}catch(i){throw tg(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,fy(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=ny("orderBy",e);return new dy(n,t)}(t,n)))}catch(r){throw tg(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,fy(this._delegate,function(e){return tm("limit",e),new py("limit",e,"F")}(t)))}catch(n){throw tg(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,fy(this._delegate,function(e){return tm("limitToLast",e),new py("limitToLast",e,"L")}(t)))}catch(n){throw tg(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,fy(this._delegate,my.apply(void 0,arguments)))}catch(t){throw tg(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,fy(this._delegate,yy.apply(void 0,arguments)))}catch(t){throw tg(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,fy(this._delegate,ky.apply(void 0,arguments)))}catch(t){throw tg(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,fy(this._delegate,wy.apply(void 0,arguments)))}catch(t){throw tg(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return fm(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?Py(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=em(e,om);var t=em(e.firestore,vm),n=mm(t),r=new Ay(t);return Hv(n,e._query,{source:"server"}).then((function(n){return new oy(t,r,e,n)}))}(this._delegate):function(e){e=em(e,om);var t=em(e.firestore,vm),n=mm(t),r=new Ay(t);return cy(e._query),Hv(n,e._query).then((function(n){return new oy(t,r,e,n)}))}(this._delegate)).then((function(e){return new ug(t.firestore,new oy(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=ng(n),a=rg(n,(function(t){return new ug(e.firestore,new oy(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return Ly(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Zy.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),sg=function(){function e(t,n){De(this,e),this._firestore=t,this._delegate=n}return je(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new ag(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),ug=function(){function e(t,n){De(this,e),this._firestore=t,this._delegate=n}return je(e,[{key:"query",get:function(){return new og(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new ag(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new sg(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new ag(n._firestore,r))}))}},{key:"isEqual",value:function(e){return uy(this._delegate,e._delegate)}}]),e}(),cg=function(e){Ue(n,e);var t=Ke(n);function n(e,r){var i;return De(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return je(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new eg(this.firestore,e):null}},{key:"doc",value:function(e){try{return new eg(this.firestore,void 0===e?cm(this._delegate):cm(this._delegate,e))}catch(t){throw tg(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=em(e.firestore,vm),r=cm(e),i=Ty(e.converter,t);return My(n,[Lm(Dm(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Zu.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new eg(t.firestore,e)}))}},{key:"isEqual",value:function(e){return lm(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(Zy.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(og);function lg(e){return em(e,am)}var fg,hg=function(){function e(){De(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=He(Im,n)}return je(e,[{key:"isEqual",value:function(e){return(e=bt(e))instanceof Im&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(xs.keyField().canonicalString())}}]),e}(),dg=function(){function e(t){De(this,e),this._delegate=t}return je(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new Fm("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new jm("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=qy.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=zy.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new qm("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),pg={Firestore:$y,GeoPoint:Sm,Timestamp:ps,Blob:Wy,Transaction:Jy,WriteBatch:Xy,DocumentReference:eg,DocumentSnapshot:ig,Query:og,QueryDocumentSnapshot:ag,QuerySnapshot:ug,CollectionReference:cg,FieldPath:hg,FieldValue:dg,setLogLevel:function(e){!function(e){Ko.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new St("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},pg)))})(fg=En,(function(e,t){return new $y(e,t,new Qy)})),fg.registerVersion("@firebase/firestore-compat","0.1.3");function vg(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var mg;Object.create;var yg="facebook.com",gg="github.com",kg="google.com",wg="password",bg="twitter.com",xg="EMAIL_SIGNIN",_g="PASSWORD_RESET",Ig="RECOVER_EMAIL",Eg="REVERT_SECOND_FACTOR_ADDITION",Tg="VERIFY_AND_CHANGE_EMAIL",Sg="VERIFY_EMAIL";function Ng(){return Oe({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Cg=function(){var e;return Oe(e={},"admin-restricted-operation","This operation is restricted to administrators only."),Oe(e,"argument-error",""),Oe(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),Oe(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),Oe(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),Oe(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),Oe(e,"cordova-not-ready","Cordova framework is not ready."),Oe(e,"cors-unsupported","This browser is not supported."),Oe(e,"credential-already-in-use","This credential is already associated with a different user account."),Oe(e,"custom-token-mismatch","The custom token corresponds to a different audience."),Oe(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),Oe(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),Oe(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),Oe(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),Oe(e,"email-already-in-use","The email address is already in use by another account."),Oe(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),Oe(e,"expired-action-code","The action code has expired."),Oe(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),Oe(e,"internal-error","An internal AuthError has occurred."),Oe(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),Oe(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),Oe(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),Oe(e,"invalid-auth-event","An internal AuthError has occurred."),Oe(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),Oe(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),Oe(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),Oe(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),Oe(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),Oe(e,"invalid-email","The email address is badly formatted."),Oe(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),Oe(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),Oe(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),Oe(e,"invalid-credential","The supplied auth credential is malformed or has expired."),Oe(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),Oe(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),Oe(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),Oe(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),Oe(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),Oe(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),Oe(e,"wrong-password","The password is invalid or the user does not have a password."),Oe(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),Oe(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),Oe(e,"invalid-provider-id","The specified provider ID is invalid."),Oe(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),Oe(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),Oe(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),Oe(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),Oe(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),Oe(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),Oe(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),Oe(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),Oe(e,"missing-continue-uri","A continue URL must be provided in the request."),Oe(e,"missing-iframe-start","An internal AuthError has occurred."),Oe(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),Oe(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),Oe(e,"missing-multi-factor-info","No second factor identifier is provided."),Oe(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),Oe(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),Oe(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),Oe(e,"app-deleted","This instance of FirebaseApp has been deleted."),Oe(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),Oe(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),Oe(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),Oe(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),Oe(e,"no-auth-event","An internal AuthError has occurred."),Oe(e,"no-such-provider","User was not linked to an account with the given provider."),Oe(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),Oe(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),Oe(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),Oe(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),Oe(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),Oe(e,"provider-already-linked","User can only be linked to one identity for the given provider."),Oe(e,"quota-exceeded","The project's quota for this operation has been exceeded."),Oe(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),Oe(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),Oe(e,"rejected-credential","The request contains malformed or mismatching credentials."),Oe(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),Oe(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),Oe(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),Oe(e,"timeout","The operation has timed out."),Oe(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),Oe(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),Oe(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),Oe(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),Oe(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),Oe(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),Oe(e,"unverified-email","The operation requires a verified email."),Oe(e,"user-cancelled","The user did not grant your application the permissions it requested."),Oe(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),Oe(e,"user-disabled","The user account has been disabled by an administrator."),Oe(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),Oe(e,"user-signed-out",""),Oe(e,"weak-password","The password must be 6 characters long or more."),Oe(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),Oe(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},Ag=Ng,Rg=new ct("auth","Firebase",Ng()),Pg=new Kt("@firebase/auth");function Og(e){if(Pg.logLevel<=Dt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Pg.error.apply(Pg,["Auth (".concat(ln,"): ").concat(e)].concat(n))}}function Dg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Fg.apply(void 0,[e].concat(n))}function Lg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Fg.apply(void 0,[e].concat(n))}function jg(e,t,n){var r=Object.assign(Object.assign({},Ag()),Oe({},t,n));return new ct("auth","Firebase",r).create(t,{appName:e.name})}function Mg(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Dg(e,"argument-error"),jg(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Fg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=Se(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(Se(o)))}return Rg.create.apply(Rg,[e].concat(n))}function Ug(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Fg.apply(void 0,[t].concat(r))}}function Vg(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Og(t),new Error(t)}function qg(e,t){e||Vg(t)}var zg=new Map;function Bg(e){qg(e instanceof Function,"Expected a class definition");var t=zg.get(e);return t?(qg(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,zg.set(e,t),t)}function Kg(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Hg(){return"http:"===Wg()||"https:"===Wg()}function Wg(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Gg=function(){function e(t,n){De(this,e),this.shortDelay=t,this.longDelay=n,qg(n>t,"Short delay should be less than long delay!"),this.isMobile=nt()||at()}return je(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Hg()||it()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Qg(e,t){qg(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var $g=function(){function e(){De(this,e)}return je(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Vg("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Vg("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Vg("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Yg=(Oe(mg={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),Oe(mg,"MISSING_CUSTOM_TOKEN","internal-error"),Oe(mg,"INVALID_IDENTIFIER","invalid-email"),Oe(mg,"MISSING_CONTINUE_URI","internal-error"),Oe(mg,"INVALID_PASSWORD","wrong-password"),Oe(mg,"MISSING_PASSWORD","internal-error"),Oe(mg,"EMAIL_EXISTS","email-already-in-use"),Oe(mg,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),Oe(mg,"INVALID_IDP_RESPONSE","invalid-credential"),Oe(mg,"INVALID_PENDING_TOKEN","invalid-credential"),Oe(mg,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),Oe(mg,"MISSING_REQ_TYPE","internal-error"),Oe(mg,"EMAIL_NOT_FOUND","user-not-found"),Oe(mg,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),Oe(mg,"EXPIRED_OOB_CODE","expired-action-code"),Oe(mg,"INVALID_OOB_CODE","invalid-action-code"),Oe(mg,"MISSING_OOB_CODE","internal-error"),Oe(mg,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),Oe(mg,"INVALID_ID_TOKEN","invalid-user-token"),Oe(mg,"TOKEN_EXPIRED","user-token-expired"),Oe(mg,"USER_NOT_FOUND","user-token-expired"),Oe(mg,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),Oe(mg,"INVALID_CODE","invalid-verification-code"),Oe(mg,"INVALID_SESSION_INFO","invalid-verification-id"),Oe(mg,"INVALID_TEMPORARY_PROOF","invalid-credential"),Oe(mg,"MISSING_SESSION_INFO","missing-verification-id"),Oe(mg,"SESSION_EXPIRED","code-expired"),Oe(mg,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),Oe(mg,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),Oe(mg,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),Oe(mg,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),Oe(mg,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),Oe(mg,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),Oe(mg,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),Oe(mg,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),Oe(mg,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),Oe(mg,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),Oe(mg,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),mg),Jg=new Gg(3e4,6e4);function Xg(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Zg(e,t,n,r){return ek.apply(this,arguments)}function ek(){return ek=Pt(jt().mark((function e(t,n,r,i){var a,o=arguments;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",tk(t,a,(function(){var e={},a={};i&&("GET"===n?a=i:e={body:JSON.stringify(i)});var o=vt(Object.assign({key:t.config.apiKey},a)).slice(1),s=new($g.headers());return s.set("Content-Type","application/json"),s.set("X-Client-Version",t._getSdkClientVersion()),t.languageCode&&s.set("X-Firebase-Locale",t.languageCode),$g.fetch()(ak(t,t.config.apiHost,r,o),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},e))})));case 2:case"end":return e.stop()}}),e)}))),ek.apply(this,arguments)}function tk(e,t,n){return nk.apply(this,arguments)}function nk(){return nk=Pt(jt().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h,d;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Yg),n),e.prev=2,a=new ok(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw sk(t,"account-exists-with-different-credential",s);case 13:if(!o.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(u=o.ok?s.errorMessage:s.error.message,c=u.split(" : "),l=Ee(c,2),f=l[0],h=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw sk(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==f){e.next=25;break}throw sk(t,"email-already-in-use",s);case 25:if(d=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!h){e.next=30;break}throw jg(t,d,h);case 30:Dg(t,d);case 31:e.next=38;break;case 33:if(e.prev=33,e.t0=e.catch(2),!(e.t0 instanceof ut)){e.next=37;break}throw e.t0;case 37:Dg(t,"network-request-failed");case 38:case"end":return e.stop()}}),e,null,[[2,33]])}))),nk.apply(this,arguments)}function rk(e,t,n,r){return ik.apply(this,arguments)}function ik(){return ik=Pt(jt().mark((function e(t,n,r,i){var a,o,s=arguments;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,Zg(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Dg(t,"multi-factor-auth-required",{serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),ik.apply(this,arguments)}function ak(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Qg(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var ok=function(){function e(t){var n=this;De(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Lg(n.auth,"timeout"))}),Jg.get())}))}return je(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function sk(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Lg(e,t,r);return i.customData._tokenResponse=n,i}function uk(e,t){return ck.apply(this,arguments)}function ck(){return ck=Pt(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zg(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),ck.apply(this,arguments)}function lk(e,t){return fk.apply(this,arguments)}function fk(){return fk=Pt(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zg(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),fk.apply(this,arguments)}function hk(e,t){return dk.apply(this,arguments)}function dk(){return dk=Pt(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zg(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),dk.apply(this,arguments)}function pk(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function vk(){return vk=Pt(jt().mark((function e(t){var n,r,i,a,o,s,u=arguments;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=bt(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Ug((a=yk(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:pk(mk(a.auth_time)),issuedAtTime:pk(mk(a.iat)),expirationTime:pk(mk(a.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),vk.apply(this,arguments)}function mk(e){return 1e3*Number(e)}function yk(e){var t=Ee(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return Og("JWT malformed, contained fewer than 3 sections"),null;try{var a=Ye(r);return a?JSON.parse(a):(Og("Failed to decode base64 JWT payload"),null)}catch(o){return Og("Caught error parsing JWT payload as JSON",o),null}}function gk(e,t){return kk.apply(this,arguments)}function kk(){return kk=Pt(jt().mark((function e(t,n){var r=arguments;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof ut&&wk(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),kk.apply(this,arguments)}function wk(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var bk=function(){function e(t){De(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return je(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Pt(jt().mark((function t(){return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=Pt(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),xk=function(){function e(t,n){De(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return je(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=pk(this.lastLoginAt),this.creationTime=pk(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function _k(e){return Ik.apply(this,arguments)}function Ik(){return Ik=Pt(jt().mark((function e(t){var n,r,i,a,o,s,u,c,l,f,h;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,gk(t,hk(r,{idToken:i}));case 6:Ug(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Sk(o.providerUserInfo):[],u=Tk(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===u||void 0===u?void 0:u.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new xk(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),Ik.apply(this,arguments)}function Ek(){return(Ek=Pt(jt().mark((function e(t){var n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=bt(t),e.next=3,_k(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tk(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(Se(n),Se(t))}function Sk(e){return e.map((function(e){var t=e.providerId,n=vg(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function Nk(e,t){return Ck.apply(this,arguments)}function Ck(){return Ck=Pt(jt().mark((function e(t,n){var r;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tk(t,{},(function(){var e=vt({grant_type:"refresh_token",refresh_token:n}).slice(1),r=t.config,i=r.tokenApiHost,a=r.apiKey,o=ak(t,i,"/v1/token","key=".concat(a));return $g.fetch()(o,{method:"POST",headers:{"X-Client-Version":t._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:e})}));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),Ck.apply(this,arguments)}var Ak=function(){function e(){De(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return je(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Ug(e.idToken,"internal-error"),Ug("undefined"!==typeof e.idToken,"internal-error"),Ug("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=yk(e);return Ug(t,"internal-error"),Ug("undefined"!==typeof t.exp,"internal-error"),Ug("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=Pt(jt().mark((function e(t){var n,r=arguments;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Ug(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=Pt(jt().mark((function e(t,n){var r,i,a,o;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nk(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Vg("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Ug("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Ug("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Ug("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Rk(e,t){Ug("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Pk=function(){function e(t){De(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=vg(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new bk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.metadata=new xk(a.createdAt||void 0,a.lastLoginAt||void 0)}return je(e,[{key:"getIdToken",value:function(){var e=Pt(jt().mark((function e(t){var n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gk(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Ug(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return vk.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Ek.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Ug(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Ug(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=Pt(jt().mark((function e(t){var n,r,i=arguments;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,_k(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Pt(jt().mark((function e(){var t;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,gk(this,uk(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,s,u,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,m=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,w=n.emailVerified,b=n.isAnonymous,x=n.providerData,_=n.stsTokenManager;Ug(k&&_,t,"internal-error");var I=Ak.fromJSON(this.name,_);Ug("string"===typeof k,t,"internal-error"),Rk(f,t.name),Rk(h,t.name),Ug("boolean"===typeof w,t,"internal-error"),Ug("boolean"===typeof b,t,"internal-error"),Rk(d,t.name),Rk(p,t.name),Rk(v,t.name),Rk(m,t.name),Rk(y,t.name),Rk(g,t.name);var E=new e({uid:k,auth:t,email:h,emailVerified:w,displayName:f,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:y,lastLoginAt:g});return x&&Array.isArray(x)&&(E.providerData=x.map((function(e){return Object.assign({},e)}))),m&&(E._redirectEventId=m),E}},{key:"_fromIdTokenResponse",value:function(){var t=Pt(jt().mark((function t(n,r){var i,a,o,s=arguments;return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new Ak).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,_k(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Ok=function(){function e(){De(this,e),this.type="NONE",this.storage={}}return je(e,[{key:"_isAvailable",value:function(){var e=Pt(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Pt(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Pt(jt().mark((function e(t){var n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Pt(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Ok.type="NONE";var Dk=Ok;function Lk(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var jk=function(){function e(t,n,r){De(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Lk(this.userKey,a.apiKey,o),this.fullPersistenceKey=Lk("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return je(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=Pt(jt().mark((function e(){var t;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Pk._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=Pt(jt().mark((function e(t){var n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=Pt(jt().mark((function t(n,r){var i,a,o,s,u,c,l,f,h,d,p,v=arguments;return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Bg(Dk),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=Pt(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Bg(Dk),s=Lk(i,n.config.apiKey,n.name),u=null,c=Me(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(s);case 17:if(!(h=t.sent)){t.next=23;break}return d=Pk._fromJSON(n,h),f!==o&&(u=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!u){t.next=44;break}return t.next=44,o._set(s,u.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Pt(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Mk(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(qk(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Fk(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Bk(t))return"Blackberry";if(Kk(t))return"Webos";if(Uk(t))return"Safari";if((t.includes("chrome/")||Vk(t))&&!t.includes("edge/"))return"Chrome";if(zk(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Fk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt();return/firefox\//i.test(e)}function Uk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Vk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt();return/crios\//i.test(e)}function qk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt();return/iemobile/i.test(e)}function zk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt();return/android/i.test(e)}function Bk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt();return/blackberry/i.test(e)}function Kk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt();return/webos/i.test(e)}function Hk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt();return/iphone|ipad|ipod/i.test(e)}function Wk(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt();return Hk(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function Gk(){return ot()&&10===document.documentMode}function Qk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt();return Hk(e)||zk(e)||Kk(e)||Bk(e)||/windows phone/i.test(e)||qk(e)}function $k(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Mk(tt());break;case"Worker":t="".concat(Mk(tt()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(ln,"/").concat(r)}var Yk=function(){function e(t,n){De(this,e),this.app=t,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xk(this),this.idTokenSubscription=new Xk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Rg,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=n.sdkClientVersion}return je(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Bg(t)),this._initializationPromise=this.queue(Pt(jt().mark((function r(){var i;return jt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,jk.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=10;break}return r.next=10,n._popupRedirectResolver._initialize(n);case 10:return r.next=12,n.initializeCurrentUser(t);case 12:if(!n._deleted){r.next=14;break}return r.abrupt("return");case 14:n._isInitialized=!0;case 15:case"end":return r.stop()}}),r)})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=Pt(jt().mark((function e(){var t;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=Pt(jt().mark((function e(t){var n,r,i,a,o;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,!t||!this.config.authDomain){e.next=12;break}return e.next=6,this.getOrInitRedirectPersistenceManager();case 6:return i=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,a=null===r||void 0===r?void 0:r._redirectEventId,e.next=10,this.tryRedirectSignIn(t);case 10:o=e.sent,i&&i!==a||!(null===o||void 0===o?void 0:o.user)||(r=o.user);case 12:if(r){e.next=14;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 14:if(r._redirectEventId){e.next=16;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 16:return Ug(this._popupRedirectResolver,this,"argument-error"),e.next=19,this.getOrInitRedirectPersistenceManager();case 19:if(!this.redirectUser||this.redirectUser._redirectEventId!==r._redirectEventId){e.next=21;break}return e.abrupt("return",this.directlySetCurrentUser(r));case 21:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=Pt(jt().mark((function e(t){var n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=Pt(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_k(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=Pt(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Pt(jt().mark((function e(t){var n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?bt(t):null)&&Ug(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=Pt(jt().mark((function e(t){var n=this;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return t&&Ug(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e.abrupt("return",this.queue(Pt(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.directlySetCurrentUser(t);case 2:n.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Pt(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=3;break}return e.next=3,this._setRedirectUser(null);case 3:return e.abrupt("return",this._updateCurrentUser(null));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(Pt(jt().mark((function n(){return jt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Bg(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new ct("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=Pt(jt().mark((function e(t,n){var r;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=Pt(jt().mark((function e(t){var n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Ug(n=t&&Bg(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,jk.create(this,[Bg(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=Pt(jt().mark((function e(t){var n,r;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Pt(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=Pt(jt().mark((function e(t){var n=this;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Pt(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Ug(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=Pt(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Ug(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$k(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getSdkClientVersion",value:function(){return this.clientVersion}}]),e}();function Jk(e){return bt(e)}var Xk=function(){function e(t){var n=this;De(this,e),this.auth=t,this.observer=null,this.addObserver=gt((function(e){return n.observer=e}))}return je(e,[{key:"next",get:function(){return Ug(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Zk(e,t,n){var r=Jk(e);Ug(r._canInitEmulator,r,"emulator-config-failed"),Ug(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=ew(t),o=function(e){var t=ew(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:tw(r.substr(a.length+1))}}var o=Ee(r.split(":"),2);return{host:o[0],port:tw(o[1])}}(t),s=o.host,u=o.port,c=null===u?"":":".concat(u);r.config.emulator={url:"".concat(a,"//").concat(s).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),function(e){function t(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"===typeof window||"undefined"===typeof document||e||("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}(i)}function ew(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function tw(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var nw=function(){function e(t,n){De(this,e),this.providerId=t,this.signInMethod=n}return je(e,[{key:"toJSON",value:function(){return Vg("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Vg("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Vg("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Vg("not implemented")}}]),e}();function rw(e,t){return iw.apply(this,arguments)}function iw(){return iw=Pt(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zg(t,"POST","/v1/accounts:resetPassword",Xg(t,n)));case 1:case"end":return e.stop()}}),e)}))),iw.apply(this,arguments)}function aw(e,t){return ow.apply(this,arguments)}function ow(){return ow=Pt(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zg(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),ow.apply(this,arguments)}function sw(e,t){return uw.apply(this,arguments)}function uw(){return uw=Pt(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zg(t,"POST","/v1/accounts:update",Xg(t,n)));case 1:case"end":return e.stop()}}),e)}))),uw.apply(this,arguments)}function cw(e,t){return lw.apply(this,arguments)}function lw(){return lw=Pt(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rk(t,"POST","/v1/accounts:signInWithPassword",Xg(t,n)));case 1:case"end":return e.stop()}}),e)}))),lw.apply(this,arguments)}function fw(e,t){return hw.apply(this,arguments)}function hw(){return hw=Pt(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zg(t,"POST","/v1/accounts:sendOobCode",Xg(t,n)));case 1:case"end":return e.stop()}}),e)}))),hw.apply(this,arguments)}function dw(e,t){return pw.apply(this,arguments)}function pw(){return pw=Pt(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fw(t,n));case 1:case"end":return e.stop()}}),e)}))),pw.apply(this,arguments)}function vw(e,t){return mw.apply(this,arguments)}function mw(){return mw=Pt(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fw(t,n));case 1:case"end":return e.stop()}}),e)}))),mw.apply(this,arguments)}function yw(e,t){return gw.apply(this,arguments)}function gw(){return gw=Pt(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fw(t,n));case 1:case"end":return e.stop()}}),e)}))),gw.apply(this,arguments)}function kw(e,t){return ww.apply(this,arguments)}function ww(){return ww=Pt(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fw(t,n));case 1:case"end":return e.stop()}}),e)}))),ww.apply(this,arguments)}function bw(e,t){return xw.apply(this,arguments)}function xw(){return xw=Pt(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rk(t,"POST","/v1/accounts:signInWithEmailLink",Xg(t,n)));case 1:case"end":return e.stop()}}),e)}))),xw.apply(this,arguments)}function _w(e,t){return Iw.apply(this,arguments)}function Iw(){return Iw=Pt(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rk(t,"POST","/v1/accounts:signInWithEmailLink",Xg(t,n)));case 1:case"end":return e.stop()}}),e)}))),Iw.apply(this,arguments)}var Ew=function(e){Ue(n,e);var t=Ke(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return De(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return je(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=Pt(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",cw(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",bw(t,{email:this._email,oobCode:this._password}));case 5:Dg(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=Pt(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",aw(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",_w(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Dg(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(nw);function Tw(e,t){return Sw.apply(this,arguments)}function Sw(){return Sw=Pt(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rk(t,"POST","/v1/accounts:signInWithIdp",Xg(t,n)));case 1:case"end":return e.stop()}}),e)}))),Sw.apply(this,arguments)}var Nw=function(e){Ue(n,e);var t=Ke(n);function n(){var e;return De(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return je(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Tw(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Tw(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Tw(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=vt(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Dg("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=vg(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return Object.assign(o,a),o}}]),n}(nw);function Cw(e,t){return Aw.apply(this,arguments)}function Aw(){return Aw=Pt(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zg(t,"POST","/v1/accounts:sendVerificationCode",Xg(t,n)));case 1:case"end":return e.stop()}}),e)}))),Aw.apply(this,arguments)}function Rw(){return Rw=Pt(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rk(t,"POST","/v1/accounts:signInWithPhoneNumber",Xg(t,n)));case 1:case"end":return e.stop()}}),e)}))),Rw.apply(this,arguments)}function Pw(){return Pw=Pt(jt().mark((function e(t,n){var r;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rk(t,"POST","/v1/accounts:signInWithPhoneNumber",Xg(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw sk(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Pw.apply(this,arguments)}var Ow=Oe({},"USER_NOT_FOUND","user-not-found");function Dw(){return Dw=Pt(jt().mark((function e(t,n){var r;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",rk(t,"POST","/v1/accounts:signInWithPhoneNumber",Xg(t,r),Ow));case 2:case"end":return e.stop()}}),e)}))),Dw.apply(this,arguments)}var Lw=function(e){Ue(n,e);var t=Ke(n);function n(e){var r;return De(this,n),(r=t.call(this,"phone","phone")).params=e,r}return je(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Rw.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Pw.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Dw.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(nw);var jw=function(){function e(t){var n,r,i,a,o,s;De(this,e);var u=mt(yt(t)),c=null!==(n=u.apiKey)&&void 0!==n?n:null,l=null!==(r=u.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);Ug(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=u.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return je(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=mt(yt(e)).link,n=t?mt(yt(t)).deep_link_id:null,r=mt(yt(e)).deep_link_id;return(r?mt(yt(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(Gp){return null}}}]),e}();var Mw=function(){function e(){De(this,e),this.providerId=e.PROVIDER_ID}return je(e,null,[{key:"credential",value:function(e,t){return Ew._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=jw.parseLink(t);return Ug(n,"argument-error"),Ew._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Mw.PROVIDER_ID="password",Mw.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Mw.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Fw=function(){function e(t){De(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return je(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Uw=function(e){Ue(n,e);var t=Ke(n);function n(){var e;return De(this,n),(e=t.apply(this,arguments)).scopes=[],e}return je(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return Se(this.scopes)}}]),n}(Fw),Vw=function(e){Ue(n,e);var t=Ke(n);function n(){return De(this,n),t.apply(this,arguments)}return je(n,[{key:"credential",value:function(e){return this._credential(e)}},{key:"_credential",value:function(e){return Ug(e.idToken||e.accessToken,"argument-error"),Nw._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Ug("providerId"in t&&"signInMethod"in t,"argument-error"),Nw._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,s=t.nonce,u=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!u)return null;try{return new n(u)._credential({idToken:r,accessToken:i,rawNonce:s,pendingToken:o})}catch(c){return null}}}]),n}(Uw),qw=function(e){Ue(n,e);var t=Ke(n);function n(){return De(this,n),t.call(this,"facebook.com")}return je(n,null,[{key:"credential",value:function(e){return Nw._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(Gp){return null}}}]),n}(Uw);qw.FACEBOOK_SIGN_IN_METHOD="facebook.com",qw.PROVIDER_ID="facebook.com";var zw=function(e){Ue(n,e);var t=Ke(n);function n(){var e;return De(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return je(n,null,[{key:"credential",value:function(e,t){return Nw._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(Gp){return null}}}]),n}(Uw);zw.GOOGLE_SIGN_IN_METHOD="google.com",zw.PROVIDER_ID="google.com";var Bw=function(e){Ue(n,e);var t=Ke(n);function n(){return De(this,n),t.call(this,"github.com")}return je(n,null,[{key:"credential",value:function(e){return Nw._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(Gp){return null}}}]),n}(Uw);Bw.GITHUB_SIGN_IN_METHOD="github.com",Bw.PROVIDER_ID="github.com";var Kw=function(e){Ue(n,e);var t=Ke(n);function n(e,r){var i;return De(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return je(n,[{key:"_getIdTokenResponse",value:function(e){return Tw(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Tw(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Tw(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(nw),Hw=function(e){Ue(n,e);var t=Ke(n);function n(){return De(this,n),t.call(this,"twitter.com")}return je(n,null,[{key:"credential",value:function(e,t){return Nw._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(Gp){return null}}}]),n}(Uw);function Ww(e,t){return Gw.apply(this,arguments)}function Gw(){return Gw=Pt(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rk(t,"POST","/v1/accounts:signUp",Xg(t,n)));case 1:case"end":return e.stop()}}),e)}))),Gw.apply(this,arguments)}Hw.TWITTER_SIGN_IN_METHOD="twitter.com",Hw.PROVIDER_ID="twitter.com";var Qw=function(){function e(t){De(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return je(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=Pt(jt().mark((function t(n,r,i){var a,o,s,u,c=arguments;return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Pk._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,s=$w(i),u=new e({user:o,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=Pt(jt().mark((function t(n,r,i){var a;return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=$w(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function $w(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Yw(){return Yw=Pt(jt().mark((function e(t){var n,r,i,a;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Jk(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Qw({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Ww(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Qw._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),Yw.apply(this,arguments)}var Jw=function(e){Ue(n,e);var t=Ke(n);function n(e,r,i,a){var o,s;return De(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,o.name="FirebaseError",Object.setPrototypeOf(Fe(o),n.prototype),o.appName=e.name,o.code=r.code,o.tenantId=null!==(s=e.tenantId)&&void 0!==s?s:void 0,o.serverResponse=r.customData.serverResponse,o}return je(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(ut);function Xw(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Jw._fromErrorAndOperation(e,n,t,r);throw n}))}function Zw(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function eb(e,t){return tb.apply(this,arguments)}function tb(){return tb=Pt(jt().mark((function e(t,n){var r,i,a,o;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=bt(t),e.next=3,ib(!0,r,n);case 3:return e.t0=lk,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=Zw(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),tb.apply(this,arguments)}function nb(e,t){return rb.apply(this,arguments)}function rb(){return rb=Pt(jt().mark((function e(t,n){var r,i,a=arguments;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=gk,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Qw._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),rb.apply(this,arguments)}function ib(e,t,n){return ab.apply(this,arguments)}function ab(){return(ab=Pt(jt().mark((function e(t,n,r){var i,a;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_k(n);case 2:i=Zw(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",Ug(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ob(e,t){return sb.apply(this,arguments)}function sb(){return sb=Pt(jt().mark((function e(t,n){var r,i,a,o,s,u,c=arguments;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,gk(t,Xw(i,a,n,t),r);case 6:return Ug((o=e.sent).idToken,i,"internal-error"),Ug(s=yk(o.idToken),i,"internal-error"),u=s.sub,Ug(t.uid===u,i,"user-mismatch"),e.abrupt("return",Qw._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Dg(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),sb.apply(this,arguments)}function ub(e,t){return cb.apply(this,arguments)}function cb(){return cb=Pt(jt().mark((function e(t,n){var r,i,a,o,s=arguments;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,Xw(t,i,n);case 4:return a=e.sent,e.next=7,Qw._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),cb.apply(this,arguments)}function lb(e,t){return fb.apply(this,arguments)}function fb(){return fb=Pt(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ub(Jk(t),n));case 1:case"end":return e.stop()}}),e)}))),fb.apply(this,arguments)}function hb(e,t){return db.apply(this,arguments)}function db(){return(db=Pt(jt().mark((function e(t,n){var r;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=bt(t),e.next=3,ib(!1,r,n.providerId);case 3:return e.abrupt("return",nb(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pb(e,t){return vb.apply(this,arguments)}function vb(){return(vb=Pt(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ob(bt(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mb(e,t){return yb.apply(this,arguments)}function yb(){return yb=Pt(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rk(t,"POST","/v1/accounts:signInWithCustomToken",Xg(t,n)));case 1:case"end":return e.stop()}}),e)}))),yb.apply(this,arguments)}function gb(){return gb=Pt(jt().mark((function e(t,n){var r,i,a;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Jk(t),e.next=3,mb(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Qw._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),gb.apply(this,arguments)}var kb=function(){function e(t,n){De(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return je(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?wb._fromServerResponse(e,t):Dg(e,"internal-error")}}]),e}(),wb=function(e){Ue(n,e);var t=Ke(n);function n(e){var r;return De(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return je(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(kb);function bb(e,t,n){var r;Ug((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Ug("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Ug(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Ug(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function xb(){return xb=Pt(jt().mark((function e(t,n,r){var i,a;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=bt(t),a={requestType:"PASSWORD_RESET",email:n},r&&bb(i,a,r),e.next=5,vw(i,a);case 5:case"end":return e.stop()}}),e)}))),xb.apply(this,arguments)}function _b(){return _b=Pt(jt().mark((function e(t,n,r){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rw(bt(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),_b.apply(this,arguments)}function Ib(){return Ib=Pt(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sw(bt(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),Ib.apply(this,arguments)}function Eb(e,t){return Tb.apply(this,arguments)}function Tb(){return Tb=Pt(jt().mark((function e(t,n){var r,i,a,o;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=bt(t),e.next=3,rw(r,{oobCode:n});case 3:i=e.sent,Ug(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Ug(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Ug(i.mfaInfo,r,"internal-error");case 13:Ug(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=kb._fromServerResponse(Jk(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),Tb.apply(this,arguments)}function Sb(){return Sb=Pt(jt().mark((function e(t,n){var r,i;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Eb(bt(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),Sb.apply(this,arguments)}function Nb(e,t,n){return Cb.apply(this,arguments)}function Cb(){return Cb=Pt(jt().mark((function e(t,n,r){var i,a,o;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Jk(t),e.next=3,Ww(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,Qw._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),Cb.apply(this,arguments)}function Ab(){return Ab=Pt(jt().mark((function e(t,n,r){var i,a;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=bt(t),a={requestType:"EMAIL_SIGNIN",email:n},Ug(r.handleCodeInApp,i,"argument-error"),r&&bb(i,a,r),e.next=6,yw(i,a);case 6:case"end":return e.stop()}}),e)}))),Ab.apply(this,arguments)}function Rb(){return Rb=Pt(jt().mark((function e(t,n,r){var i,a;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=bt(t),Ug((a=Mw.credentialWithLink(n,r||Kg()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",lb(i,a));case 4:case"end":return e.stop()}}),e)}))),Rb.apply(this,arguments)}function Pb(e,t){return Ob.apply(this,arguments)}function Ob(){return Ob=Pt(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zg(t,"POST","/v1/accounts:createAuthUri",Xg(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ob.apply(this,arguments)}function Db(){return Db=Pt(jt().mark((function e(t,n){var r,i,a,o;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Hg()?Kg():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Pb(bt(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),Db.apply(this,arguments)}function Lb(){return(Lb=Pt(jt().mark((function e(t,n){var r,i,a,o;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=bt(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&bb(r.auth,a,n),e.next=8,dw(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jb(){return(jb=Pt(jt().mark((function e(t,n,r){var i,a,o,s;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=bt(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&bb(i.auth,o,r),e.next=8,kw(i.auth,o);case 8:if(s=e.sent,s.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mb(e,t){return Fb.apply(this,arguments)}function Fb(){return Fb=Pt(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zg(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Fb.apply(this,arguments)}function Ub(){return(Ub=Pt(jt().mark((function e(t,n){var r,i,a,o,s,u,c;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=bt(t),e.next=6,a.getIdToken();case 6:return o=e.sent,s={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,gk(a,Mb(a.auth,s));case 10:return u=e.sent,a.displayName=u.displayName||null,a.photoURL=u.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(u);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vb(e,t,n){return qb.apply(this,arguments)}function qb(){return qb=Pt(jt().mark((function e(t,n,r){var i,a,o,s;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,gk(t,aw(i,o));case 9:return s=e.sent,e.next=12,t._updateTokensIfNecessary(s,!0);case 12:case"end":return e.stop()}}),e)}))),qb.apply(this,arguments)}var zb=je((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};De(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Bb=function(e){Ue(n,e);var t=Ke(n);function n(e,r,i,a){var o;return De(this,n),(o=t.call(this,e,r,i)).username=a,o}return je(n)}(zb),Kb=function(e){Ue(n,e);var t=Ke(n);function n(e,r){return De(this,n),t.call(this,e,"facebook.com",r)}return je(n)}(zb),Hb=function(e){Ue(n,e);var t=Ke(n);function n(e,r){return De(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return je(n)}(Bb),Wb=function(e){Ue(n,e);var t=Ke(n);function n(e,r){return De(this,n),t.call(this,e,"google.com",r)}return je(n)}(zb),Gb=function(e){Ue(n,e);var t=Ke(n);function n(e,r,i){return De(this,n),t.call(this,e,"twitter.com",r,i)}return je(n)}(Bb);function Qb(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=yk(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new zb(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Kb(a,i);case"github.com":return new Hb(a,i);case"google.com":return new Wb(a,i);case"twitter.com":return new Gb(a,i,e.screenName||null);case"custom":case"anonymous":return new zb(a,null);default:return new zb(a,r,i)}}(n)}var $b=function(){function e(t,n){De(this,e),this.type=t,this.credential=n}return je(e,[{key:"toJSON",value:function(){return{multiFactorSession:Oe({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Yb=function(){function e(t,n,r){De(this,e),this.session=t,this.hints=n,this.signInResolver=r}return je(e,[{key:"resolveSignIn",value:function(){var e=Pt(jt().mark((function e(t){var n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=Jk(t),i=(n.serverResponse.mfaInfo||[]).map((function(e){return kb._fromServerResponse(r,e)}));Ug(n.serverResponse.mfaPendingCredential,r,"internal-error");var a=$b._fromMfaPendingCredential(n.serverResponse.mfaPendingCredential);return new e(a,i,function(){var e=Pt(jt().mark((function e(t){var i,o,s;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,a);case 2:i=e.sent,delete n.serverResponse.mfaInfo,delete n.serverResponse.mfaPendingCredential,o=Object.assign(Object.assign({},n.serverResponse),{idToken:i.idToken,refreshToken:i.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,Qw._fromIdTokenResponse(r,n.operationType,o);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return Ug(n.user,r,"internal-error"),e.abrupt("return",Qw._forOperation(n.user,n.operationType,o));case 17:Dg(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function Jb(e,t){return Zg(e,"POST","/v2/accounts/mfaEnrollment:start",Xg(e,t))}function Xb(e,t){return Zg(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Xg(e,t))}var Zb=function(){function e(t){var n=this;De(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return kb._fromServerResponse(t.auth,e)})))}))}return je(e,[{key:"getSession",value:function(){var e=Pt(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=$b,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=Pt(jt().mark((function e(t,n){var r,i,a;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,gk(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=Pt(jt().mark((function e(t){var n,r,i;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,gk(this.user,Xb(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),ex=new WeakMap;var tx="__sak",nx=function(){function e(t,n){De(this,e),this.storage=t,this.type=n}return je(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(tx,"1"),this.storage.removeItem(tx),Promise.resolve(!0)):Promise.resolve(!1)}catch(Gp){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}}]),e}();var rx=function(e){Ue(n,e);var t=Ke(n);function n(){var e;return De(this,n),(e=t.call(this,window.localStorage,"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=tt();return Uk(e)||Hk(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Qk(),e._shouldAllowMigration=!0,e}return je(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);Gk()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=Pt(jt().mark((function e(t,r){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sn(Ve(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Pt(jt().mark((function e(t){var r;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sn(Ve(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Pt(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sn(Ve(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(nx);rx.type="LOCAL";var ix=rx,ax=function(e){Ue(n,e);var t=Ke(n);function n(){return De(this,n),t.call(this,window.sessionStorage,"SESSION")}return je(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(nx);ax.type="SESSION";var ox=ax;function sx(e){return Promise.all(e.map(function(){var e=Pt(jt().mark((function e(t){var n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var ux=function(){function e(t){De(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return je(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=Pt(jt().mark((function e(t){var n,r,i,a,o,s,u,c;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(s=this.handlersMap[a])||void 0===s?void 0:s.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),u=Array.from(s).map(function(){var e=Pt(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,sx(u);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function cx(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}ux.receivers=[];var lx=function(){function e(t){De(this,e),this.target=t,this.handlers=new Set}return je(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=Pt(jt().mark((function e(t,n){var r,i,a,o,s=this,u=arguments;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var c=cx("",20);i.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),u(new Error("invalid_response"))}}},s.handlers.add(o),i.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function fx(){return window}function hx(){return"undefined"!==typeof fx().WorkerGlobalScope&&"function"===typeof fx().importScripts}function dx(){return px.apply(this,arguments)}function px(){return(px=Pt(jt().mark((function e(){var t;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function vx(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var mx="firebaseLocalStorageDb",yx="firebaseLocalStorage",gx="fbase_key",kx=function(){function e(t){De(this,e),this.request=t}return je(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function wx(e,t){return e.transaction([yx],t?"readwrite":"readonly").objectStore(yx)}function bx(){var e=indexedDB.deleteDatabase(mx);return new kx(e).toPromise()}function xx(){var e=indexedDB.open(mx,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(yx,{keyPath:gx})}catch(r){n(r)}})),e.addEventListener("success",Pt(jt().mark((function n(){var r;return jt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(yx)){n.next=12;break}return r.close(),n.next=5,bx();case 5:return n.t0=t,n.next=8,xx();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function _x(e,t,n){return Ix.apply(this,arguments)}function Ix(){return Ix=Pt(jt().mark((function e(t,n,r){var i,a;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=wx(t,!0).put((Oe(i={},gx,n),Oe(i,"value",r),i)),e.abrupt("return",new kx(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Ix.apply(this,arguments)}function Ex(e,t){return Tx.apply(this,arguments)}function Tx(){return Tx=Pt(jt().mark((function e(t,n){var r,i;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wx(t,!1).get(n),e.next=3,new kx(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Tx.apply(this,arguments)}function Sx(e,t){var n=wx(e,!0).delete(t);return new kx(n).toPromise()}var Nx=function(){function e(){De(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return je(e,[{key:"_openDb",value:function(){var e=Pt(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,xx();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=Pt(jt().mark((function e(t){var n,r;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=Pt(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hx()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=Pt(jt().mark((function e(){var t=this;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=ux._getInstance(hx()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Pt(jt().mark((function e(n,r){var i;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Pt(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=Pt(jt().mark((function e(){var t,n,r;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dx();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new lx(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=Pt(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&vx()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=Pt(jt().mark((function e(){var t;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,xx();case 5:return t=e.sent,e.next=8,_x(t,tx,"1");case 8:return e.next=10,Sx(t,tx);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=Pt(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Pt(jt().mark((function e(t,n){var r=this;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Pt(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return _x(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Pt(jt().mark((function e(t){var n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Ex(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Pt(jt().mark((function e(t){var n=this;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Pt(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Sx(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=Pt(jt().mark((function e(){var t,n,r,i,a,o,s,u,c,l,f;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=wx(e,!1).getAll();return new kx(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=Me(t);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.fbase_key,u=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Pt(jt().mark((function t(){return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Nx.type="LOCAL";var Cx=Nx;function Ax(e,t){return Zg(e,"POST","/v2/accounts/mfaSignIn:start",Xg(e,t))}function Rx(e){return Px.apply(this,arguments)}function Px(){return Px=Pt(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zg(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),Px.apply(this,arguments)}function Ox(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Lg("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Dx(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Lx=1e12,jx=function(){function e(t){De(this,e),this.auth=t,this.counter=Lx,this._widgets=new Map}return je(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Mx(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Lx;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Lx;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=Pt(jt().mark((function e(t){var n,r;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Lx,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Mx=function(){function e(t,n,r){var i=this;De(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;Ug(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return je(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var Fx=Dx("rcb"),Ux=new Gg(3e4,6e4),Vx="https://www.google.com/recaptcha/api.js?",qx=function(){function e(){De(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!fx().grecaptcha}return je(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Ug(zx(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(fx().grecaptcha):new Promise((function(r,i){var a=fx().setTimeout((function(){i(Lg(e,"network-request-failed"))}),Ux.get());fx()[Fx]=function(){fx().clearTimeout(a),delete fx()[Fx];var o=fx().grecaptcha;if(o){var s=o.render;o.render=function(e,n){var r=s(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Lg(e,"internal-error"))},Ox("".concat(Vx,"?").concat(vt({onload:Fx,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Lg(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!fx().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function zx(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var Bx=function(){function e(){De(this,e)}return je(e,[{key:"load",value:function(){var e=Pt(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new jx(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),Kx="recaptcha",Hx={theme:"light",type:"image"},Wx=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},Hx),r=arguments.length>2?arguments[2]:void 0;De(this,e),this.parameters=n,this.type=Kx,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Jk(r),this.isInvisible="invisible"===this.parameters.size,Ug("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;Ug(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Bx:new qx,this.validateStartingState()}return je(e,[{key:"verify",value:function(){var e=Pt(jt().mark((function e(){var t,n,r,i=this;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Ug(!this.parameters.sitekey,this.auth,"argument-error"),Ug(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ug("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=fx()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Ug(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=Pt(jt().mark((function e(){var t,n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=Pt(jt().mark((function e(){var t;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ug(Hg()&&!hx(),this.auth,"internal-error"),e.next=3,Gx();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Rx(this.auth);case 8:Ug(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Ug(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function Gx(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var Qx=function(){function e(t,n){De(this,e),this.verificationId=t,this.onConfirmation=n}return je(e,[{key:"confirm",value:function(e){var t=Lw._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function $x(){return $x=Pt(jt().mark((function e(t,n,r){var i,a;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Jk(t),e.next=3,Zx(i,n,bt(r));case 3:return a=e.sent,e.abrupt("return",new Qx(a,(function(e){return lb(i,e)})));case 5:case"end":return e.stop()}}),e)}))),$x.apply(this,arguments)}function Yx(e,t,n){return Jx.apply(this,arguments)}function Jx(){return(Jx=Pt(jt().mark((function e(t,n,r){var i,a;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=bt(t),e.next=3,ib(!1,i,"phone");case 3:return e.next=5,Zx(i.auth,n,bt(r));case 5:return a=e.sent,e.abrupt("return",new Qx(a,(function(e){return hb(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xx(){return(Xx=Pt(jt().mark((function e(t,n,r){var i,a;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=bt(t),e.next=3,Zx(i.auth,n,bt(r));case 3:return a=e.sent,e.abrupt("return",new Qx(a,(function(e){return pb(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zx(e,t,n){return e_.apply(this,arguments)}function e_(){return e_=Pt(jt().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Ug("string"===typeof a,t,"argument-error"),Ug(r.type===Kx,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=o.session,!("phoneNumber"in o)){e.next=17;break}return Ug("enroll"===s.type,t,"internal-error"),e.next=13,Jb(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return Ug("signin"===s.type,t,"internal-error"),Ug(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Ax(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Cw(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),e_.apply(this,arguments)}function t_(){return(t_=Pt(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nb(bt(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var n_=function(){function e(t){De(this,e),this.providerId=e.PROVIDER_ID,this.auth=Jk(t)}return je(e,[{key:"verifyPhoneNumber",value:function(e,t){return Zx(this.auth,e,bt(t))}}],[{key:"credential",value:function(e,t){return Lw._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Lw._fromTokenResponse(n,r):null}}]),e}();function r_(e,t){return t?Bg(t):(Ug(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}n_.PROVIDER_ID="phone",n_.PHONE_SIGN_IN_METHOD="phone";var i_=function(e){Ue(n,e);var t=Ke(n);function n(e){var r;return De(this,n),(r=t.call(this,"custom","custom")).params=e,r}return je(n,[{key:"_getIdTokenResponse",value:function(e){return Tw(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Tw(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Tw(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(nw);function a_(e){return ub(e.auth,new i_(e),e.bypassAuthState)}function o_(e){var t=e.auth,n=e.user;return Ug(n,t,"internal-error"),ob(n,new i_(e),e.bypassAuthState)}function s_(e){return u_.apply(this,arguments)}function u_(){return u_=Pt(jt().mark((function e(t){var n,r;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Ug(r=t.user,n,"internal-error"),e.abrupt("return",nb(r,new i_(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),u_.apply(this,arguments)}var c_=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];De(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return je(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Pt(jt().mark((function t(n,r){return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=Pt(jt().mark((function e(t){var n,r,i,a,o,s,u;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,s=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return a_;case"linkViaPopup":case"linkViaRedirect":return s_;case"reauthViaPopup":case"reauthViaRedirect":return o_;default:Dg(this.auth,"internal-error")}}},{key:"resolve",value:function(e){qg(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){qg(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),l_=new Gg(2e3,1e4);function f_(e,t,n){return h_.apply(this,arguments)}function h_(){return h_=Pt(jt().mark((function e(t,n,r){var i,a,o;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Jk(t),Mg(t,n,Fw),a=r_(i,r),o=new m_(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),h_.apply(this,arguments)}function d_(){return(d_=Pt(jt().mark((function e(t,n,r){var i,a,o;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Mg((i=bt(t)).auth,n,Fw),a=r_(i.auth,r),o=new m_(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p_(e,t,n){return v_.apply(this,arguments)}function v_(){return(v_=Pt(jt().mark((function e(t,n,r){var i,a,o;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Mg((i=bt(t)).auth,n,Fw),a=r_(i.auth,r),o=new m_(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var m_=function(e){Ue(n,e);var t=Ke(n);function n(e,r,i,a,o){var s;return De(this,n),(s=t.call(this,e,r,a,o)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=Fe(s),s}return je(n,[{key:"executeNotNull",value:function(){var e=Pt(jt().mark((function e(){var t;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Ug(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Pt(jt().mark((function e(){var t,n=this;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qg(1===this.filter.length,"Popup operations only handle one event"),t=cx(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Lg(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Lg(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Lg(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,l_.get())}()}}]),n}(c_);m_.currentPopupAction=null;var y_=new Map,g_=function(e){Ue(n,e);var t=Ke(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return De(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return je(n,[{key:"execute",value:function(){var e=Pt(jt().mark((function e(){var t,r;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=y_.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,k_(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Sn(Ve(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:y_.set(this.auth._key(),t);case 21:return e.abrupt("return",t());case 22:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=Pt(jt().mark((function e(t){var r;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Sn(Ve(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Sn(Ve(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Pt(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(c_);function k_(e,t){return w_.apply(this,arguments)}function w_(){return w_=Pt(jt().mark((function e(t,n){var r,i;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=I_(n),e.next=3,__(t)._get(r);case 3:return e.t0=e.sent,i="true"===e.t0,e.next=7,__(t)._remove(r);case 7:return e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)}))),w_.apply(this,arguments)}function b_(e,t){return x_.apply(this,arguments)}function x_(){return x_=Pt(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",__(t)._set(I_(n),"true"));case 1:case"end":return e.stop()}}),e)}))),x_.apply(this,arguments)}function __(e){return Bg(e._redirectPersistence)}function I_(e){return Lk("pendingRedirect",e.config.apiKey,e.name)}function E_(e,t,n){return function(e,t,n){return T_.apply(this,arguments)}(e,t,n)}function T_(){return T_=Pt(jt().mark((function e(t,n,r){var i,a;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Jk(t),Mg(t,n,Fw),a=r_(i,r),e.next=5,b_(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)}))),T_.apply(this,arguments)}function S_(e,t,n){return function(e,t,n){return N_.apply(this,arguments)}(e,t,n)}function N_(){return(N_=Pt(jt().mark((function e(t,n,r){var i,a,o;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Mg((i=bt(t)).auth,n,Fw),a=r_(i.auth,r),e.next=5,b_(a,i.auth);case 5:return e.next=7,L_(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C_(e,t,n){return function(e,t,n){return A_.apply(this,arguments)}(e,t,n)}function A_(){return(A_=Pt(jt().mark((function e(t,n,r){var i,a,o;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Mg((i=bt(t)).auth,n,Fw),a=r_(i.auth,r),e.next=5,ib(!1,i,n.providerId);case 5:return e.next=7,b_(a,i.auth);case 7:return e.next=9,L_(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R_(e,t){return P_.apply(this,arguments)}function P_(){return P_=Pt(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jk(t)._initializationPromise;case 2:return e.abrupt("return",O_(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),P_.apply(this,arguments)}function O_(e,t){return D_.apply(this,arguments)}function D_(){return D_=Pt(jt().mark((function e(t,n){var r,i,a,o,s,u=arguments;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=Jk(t),a=r_(i,n),o=new g_(i,a,r),e.next=6,o.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),D_.apply(this,arguments)}function L_(e){return j_.apply(this,arguments)}function j_(){return(j_=Pt(jt().mark((function e(t){var n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=cx("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var M_=function(){function e(t){De(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return je(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return U_(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!U_(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Lg(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(F_(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(F_(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function F_(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function U_(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function V_(e){return q_.apply(this,arguments)}function q_(){return q_=Pt(jt().mark((function e(t){var n,r=arguments;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Zg(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),q_.apply(this,arguments)}var z_=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,B_=/^https?/;function K_(){return K_=Pt(jt().mark((function e(t){var n,r,i,a,o;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,V_(t);case 4:n=e.sent,r=n.authorizedDomains,i=Me(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!H_(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Dg(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),K_.apply(this,arguments)}function H_(e){var t=Kg(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!B_.test(r))return!1;if(z_.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var W_=new Gg(3e4,6e4);function G_(){var e=fx().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=Se(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var Q_=null;function $_(e){return Q_=Q_||function(e){return new Promise((function(t,n){var r,i,a;function o(){G_(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){G_(),n(Lg(e,"network-request-failed"))},timeout:W_.get()})}if(null===(i=null===(r=fx().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=fx().gapi)||void 0===a?void 0:a.load)){var s=Dx("iframefcb");return fx()[s]=function(){gapi.load?o():n(Lg(e,"network-request-failed"))},Ox("https://apis.google.com/js/api.js?onload=".concat(s))}o()}})).catch((function(e){throw Q_=null,e}))}(e),Q_}var Y_=new Gg(5e3,15e3),J_={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},X_=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Z_(e){var t=e.config;Ug(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Qg(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:ln},i=X_.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(vt(r).slice(1))}function eI(e){return tI.apply(this,arguments)}function tI(){return tI=Pt(jt().mark((function e(t){var n,r;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$_(t);case 2:return n=e.sent,Ug(r=fx().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Z_(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:J_,dontclear:!0},(function(e){return new Promise(function(){var n=Pt(jt().mark((function n(r,i){var a,o,s;return jt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){fx().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Lg(t,"network-request-failed"),o=fx().setTimeout((function(){i(a)}),Y_.get()),e.ping(s).then(s,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),tI.apply(this,arguments)}var nI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rI="_blank",iI="http://localhost",aI=function(){function e(t){De(this,e),this.window=t,this.associatedEvent=null}return je(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function oI(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",u=Object.assign(Object.assign({},nI),{width:r.toString(),height:i.toString(),top:a,left:o}),c=tt().toLowerCase();n&&(s=Vk(c)?rI:n),Fk(c)&&(t=t||iI,u.scrollbars="yes");var l=Object.entries(u).reduce((function(e,t){var n=Ee(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(Wk(c)&&"_self"!==s)return sI(t||"",s),new aI(null);var f=window.open(t||"",s,l);Ug(f,e,"popup-blocked");try{f.focus()}catch(h){}return new aI(f)}function sI(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var uI="__/auth/handler",cI="emulator/auth/handler";function lI(e,t,n,r,i,a){Ug(e.config.authDomain,e,"auth-domain-config-required"),Ug(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:ln,eventId:i};if(t instanceof Fw){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var s=0,u=Object.entries(a||{});s<u.length;s++){var c=Ee(u[s],2),l=c[0],f=c[1];o[l]=f}}if(t instanceof Uw){var h=t.getScopes().filter((function(e){return""!==e}));h.length>0&&(o.scopes=h.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var d=o,p=0,v=Object.keys(d);p<v.length;p++){var m=v[p];void 0===d[m]&&delete d[m]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(uI);return Qg(t,cI)}(e),"?").concat(vt(d).slice(1))}var fI="webStorageSupport",hI=function(){function e(){De(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ox,this._completeRedirectFn=O_}return je(e,[{key:"_openPopup",value:function(){var e=Pt(jt().mark((function e(t,n,r,i){var a,o;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qg(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=lI(t,n,r,Kg(),i),e.abrupt("return",oI(t,o,cx()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Pt(jt().mark((function e(t,n,r,i){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=lI(t,n,r,Kg(),i),fx().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=e._key();if(this.eventManagers[t]){var n=this.eventManagers[t],r=n.manager,i=n.promise;return r?Promise.resolve(r):(qg(i,"If manager is not set, promise should be"),i)}var a=this.initAndGetManager(e);return this.eventManagers[t]={promise:a},a}},{key:"initAndGetManager",value:function(){var e=Pt(jt().mark((function e(t){var n,r;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eI(t);case 2:return n=e.sent,r=new M_(t),n.register("authEvent",(function(e){return Ug(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(fI,{type:fI},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Dg(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return K_.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Qk()||Uk()||Hk()}}]),e}(),dI=hI,pI=function(){function e(t){De(this,e),this.factorId=t}return je(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Vg("unexpected MultiFactorSessionType")}}}]),e}(),vI=function(e){Ue(n,e);var t=Ke(n);function n(e){var r;return De(this,n),(r=t.call(this,"phone")).credential=e,r}return je(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Zg(e,"POST","/v2/accounts/mfaEnrollment:finalize",Xg(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Zg(e,"POST","/v2/accounts/mfaSignIn:finalize",Xg(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(pI),mI=function(){function e(){De(this,e)}return je(e,null,[{key:"assertion",value:function(e){return vI._fromCredential(e)}}]),e}();mI.FACTOR_ID="phone";var yI,gI=function(){function e(t){De(this,e),this.auth=t,this.internalListeners=new Map}return je(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=Pt(jt().mark((function e(t){var n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Ug(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function kI(){return window}yI="Browser",en(new St("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=r.options,a=i.apiKey,o=i.authDomain;return function(e){Ug(a&&!a.includes(":"),"invalid-api-key",{appName:e.name}),Ug(!(null===o||void 0===o?void 0:o.includes(":")),"argument-error",{appName:e.name});var t={apiKey:a,authDomain:o,clientPlatform:yI,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$k(yI)},r=new Yk(e,t);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Bg);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(r,n),r}(r)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),en(new St("auth-internal",(function(e){return function(e){return new gI(e)}(Jk(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),mn("@firebase/auth","0.18.1",function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(yI));function wI(e,t,n){return bI.apply(this,arguments)}function bI(){return bI=Pt(jt().mark((function e(t,n,r){var i,a,o,s,u;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=kI(),o=a.BuildInfo,qg(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,SI(n.sessionId);case 4:return s=e.sent,u={},Hk()?u.ibi=o.packageName:zk()?u.apn=o.packageName:Dg(t,"operation-not-supported-in-this-environment"),o.displayName&&(u.appDisplayName=o.displayName),u.sessionId=s,e.abrupt("return",lI(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,u));case 10:case"end":return e.stop()}}),e)}))),bI.apply(this,arguments)}function xI(){return xI=Pt(jt().mark((function e(t){var n,r,i;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=kI(),r=n.BuildInfo,i={},Hk()?i.iosBundleId=r.packageName:zk()?i.androidPackageName=r.packageName:Dg(t,"operation-not-supported-in-this-environment"),e.next=5,V_(t,i);case 5:case"end":return e.stop()}}),e)}))),xI.apply(this,arguments)}function _I(e){var t=kI().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function II(e,t,n){return EI.apply(this,arguments)}function EI(){return EI=Pt(jt().mark((function e(t,n,r){var i,a,o;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=kI(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var s=null;function u(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){s||(s=window.setTimeout((function(){i(Lg(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(u),document.addEventListener("resume",c,!1),zk()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),s&&window.clearTimeout(s)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),EI.apply(this,arguments)}function TI(e){var t,n,r,i,a,o,s,u,c,l,f=kI();Ug("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ug("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ug("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ug("function"===typeof(null===(u=null===(s=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===s?void 0:s.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ug("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function SI(e){return NI.apply(this,arguments)}function NI(){return(NI=Pt(jt().mark((function e(t){var n,r,i;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=CI(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function CI(e){if(qg(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var AI=function(e){Ue(n,e);var t=Ke(n);function n(){var e;return De(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return je(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Sn(Ve(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=Pt(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(M_);function RI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:jI(),postBody:null,tenantId:e.tenantId,error:Lg(e,"no-auth-event")}}function PI(e,t){return MI()._set(FI(e),t)}function OI(e){return DI.apply(this,arguments)}function DI(){return DI=Pt(jt().mark((function e(t){var n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,MI()._get(FI(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,MI()._remove(FI(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),DI.apply(this,arguments)}function LI(e,t){var n,r,i=function(e){var t=UI(e),n=t.link?decodeURIComponent(t.link):void 0,r=UI(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return UI(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=UI(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,s=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],u=s?Lg(s):null;return u?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function jI(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function MI(){return Bg(ix)}function FI(e){return Lk("authEvent",e.config.apiKey,e.name)}function UI(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=be(t=n)||Te(t)||_e(t)||Ie();r[0];return mt(r.slice(1).join("?"))}var VI=function(){function e(){De(this,e),this._redirectPersistence=ox,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=O_}return je(e,[{key:"_initialize",value:function(){var e=Pt(jt().mark((function e(t){var n,r;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new AI(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Dg(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=Pt(jt().mark((function e(t,n,r,i){var a,o,s,u;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return TI(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),y_.clear(),e.next=10,this._originValidation(t);case 10:return o=RI(t,r,i),e.next=13,PI(t,o);case 13:return e.next=15,wI(t,o,n);case 15:return s=e.sent,e.next=18,_I(s);case 18:return u=e.sent,e.abrupt("return",II(t,a,u));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return xI.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=kI(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(Pt(jt().mark((function n(){return jt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,OI(e);case 2:t.onEvent(zI());case 3:case"end":return n.stop()}}),n)}))),500),s=function(){var n=Pt(jt().mark((function n(r){var i,a;return jt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,OI(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=LI(i,r.url)),t.onEvent(a||zI());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,s);var u=i,c="".concat(a.packageName.toLowerCase(),"://");kI().handleOpenURL=function(){var e=Pt(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&s({url:t}),"function"===typeof u)try{u(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),qI=VI;function zI(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Lg("no-auth-event")}}function BI(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function KI(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt();return!("file:"!==BI()&&"ionic:"!==BI()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function HI(){return ot()&&11===(null===document||void 0===document?void 0:document.documentMode)}function WI(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt();return/Edge\/\d+/.test(e)}function GI(){try{var e=self.localStorage,t=cx();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt();return HI()||WI(e)}()||st()}catch(n){return QI()&&st()}return!1}function QI(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function $I(){return("http:"===BI()||"https:"===BI()||it()||KI())&&!(at()||rt())&&GI()&&!QI()}function YI(){return KI()&&"undefined"!==typeof document}function JI(){return XI.apply(this,arguments)}function XI(){return(XI=Pt(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(YI()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ZI={LOCAL:"local",NONE:"none",SESSION:"session"},eE=Ug,tE="persistence";function nE(e,t){eE(Object.values(ZI).includes(t),e,"invalid-persistence-type"),at()?eE(t!==ZI.SESSION,e,"unsupported-persistence-type"):rt()?eE(t===ZI.NONE,e,"unsupported-persistence-type"):QI()?eE(t===ZI.NONE||t===ZI.LOCAL&&st(),e,"unsupported-persistence-type"):eE(t===ZI.NONE||GI(),e,"unsupported-persistence-type")}function rE(e){return iE.apply(this,arguments)}function iE(){return iE=Pt(jt().mark((function e(t){var n,r;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=aE(),r=Lk(tE,t.config.apiKey,t.name),(null===n||void 0===n?void 0:n.sessionStorage)&&n.sessionStorage.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),iE.apply(this,arguments)}function aE(){return"undefined"!==typeof window?window:null}var oE=Ug,sE=function(){function e(){De(this,e),this.browserResolver=Bg(dI),this.cordovaResolver=Bg(qI),this.underlyingResolver=null,this._redirectPersistence=ox,this._completeRedirectFn=O_}return je(e,[{key:"_initialize",value:function(){var e=Pt(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=Pt(jt().mark((function e(t,n,r,i){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Pt(jt().mark((function e(t,n,r,i){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return YI()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return oE(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=Pt(jt().mark((function e(){var t;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,JI();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function uE(e){return e.unwrap()}function cE(e){return fE(e)}function lE(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new mE(e,function(e,t){var n,r=bt(e),i=t;return Ug(t.operationType,r,"argument-error"),Ug(null===(n=i.serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Yb._fromError(r,i)}(e,t));else if(r){var i=fE(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function fE(e){var t=(e instanceof ut?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof ut)&&"temporaryProof"in t&&"phoneNumber"in t)return n_.credentialFromResult(e);var n,r=t.providerId;if(!r||r===wg)return null;switch(r){case kg:n=zw;break;case yg:n=qw;break;case gg:n=Bw;break;case bg:n=Hw;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,s=t.pendingToken,u=t.nonce;return a||o||i||s?s?r.startsWith("saml.")?Kw._create(r,s):Nw._fromParams({providerId:r,signInMethod:r,pendingToken:s,idToken:i,accessToken:a}):new Vw(r).credential({idToken:i,accessToken:a,rawNonce:u}):null}return e instanceof ut?n.credentialFromError(e):n.credentialFromResult(e)}function hE(e,t){return dE.apply(this,arguments)}function dE(){return dE=Pt(jt().mark((function e(t,n){var r,i,a,o;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n;case 3:r=e.sent,e.next=10;break;case 6:throw e.prev=6,e.t0=e.catch(0),e.t0 instanceof ut&&lE(t,e.t0),e.t0;case 10:return a=(i=r).operationType,o=i.user,e.abrupt("return",{operationType:a,credential:cE(r),additionalUserInfo:Qb(r),user:yE.getOrCreate(o)});case 12:case"end":return e.stop()}}),e,null,[[0,6]])}))),dE.apply(this,arguments)}function pE(e,t){return vE.apply(this,arguments)}function vE(){return vE=Pt(jt().mark((function e(t,n){var r;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return hE(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),vE.apply(this,arguments)}var mE=function(){function e(t,n){De(this,e),this.resolver=n,this.auth=t.wrapped()}return je(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return hE(uE(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),yE=function(){function e(t){De(this,e),this._delegate=t,this.multiFactor=function(e){var t=bt(e);return ex.has(t)||ex.set(t,Zb._fromUser(t)),ex.get(t)}(t)}return je(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=Pt(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hE(this.auth,hb(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=Pt(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pE(this.auth,Yx(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=Pt(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hE(this.auth,p_(this._delegate,t,sE)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=Pt(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rE(Jk(this.auth));case 2:return e.abrupt("return",C_(this._delegate,t,sE));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=Pt(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hE(this.auth,pb(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return pE(this.auth,function(e,t,n){return Xx.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return hE(this.auth,function(e,t,n){return d_.apply(this,arguments)}(this._delegate,e,sE))}},{key:"reauthenticateWithRedirect",value:function(){var e=Pt(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rE(Jk(this.auth));case 2:return e.abrupt("return",S_(this._delegate,t,sE));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Lb.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=Pt(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eb(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Vb(bt(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Vb(bt(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return t_.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Ub.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return jb.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();yE.USER_MAP=new WeakMap;var gE=Ug,kE=function(){function e(t,n){if(De(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;gE(r,"invalid-api-key",{appName:t.name});var i=[Dk];if("undefined"!==typeof window){i=function(e,t){var n=aE();if(!(null===n||void 0===n?void 0:n.sessionStorage))return[];var r=Lk(tE,e,t);switch(n.sessionStorage.getItem(r)){case ZI.NONE:return[Dk];case ZI.LOCAL:return[Cx,ox];case ZI.SESSION:return[ox];default:return[]}}(r,t.name);for(var a=0,o=[Cx,ix,ox];a<o.length;a++){var s=o[a];i.includes(s)||i.push(s)}}gE(r,"invalid-api-key",{appName:t.name});var u="undefined"!==typeof window?sE:void 0;this._delegate=n.initialize({options:{persistence:i,popupRedirectResolver:u}}),this._delegate._updateErrorMap(Cg),this.linkUnderlyingAuth()}return je(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?yE.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){Zk(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Ib.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Eb(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return _b.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=Pt(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hE(this._delegate,Nb(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Db.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=jw.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=Pt(jt().mark((function e(){var t;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return gE($I(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,R_(this._delegate,sE);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",hE(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Jk(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=wE(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=wE(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Ab.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return xb.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=Pt(jt().mark((function e(t){var n,r;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:nE(this._delegate,t),e.t0=t,e.next=e.t0===ZI.SESSION?4:e.t0===ZI.LOCAL?6:e.t0===ZI.NONE?11:13;break;case 4:return n=ox,e.abrupt("break",14);case 6:return e.next=8,Bg(Cx)._isAvailable();case 8:return r=e.sent,n=r?Cx:ix,e.abrupt("break",14);case 11:return n=Dk,e.abrupt("break",14);case 13:return e.abrupt("return",Dg("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return hE(this._delegate,function(e){return Yw.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return hE(this._delegate,lb(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return hE(this._delegate,function(e,t){return gb.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return hE(this._delegate,function(e,t,n){return lb(bt(e),Mw.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return hE(this._delegate,function(e,t,n){return Rb.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return pE(this._delegate,function(e,t,n){return $x.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=Pt(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return gE($I(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",hE(this._delegate,f_(this._delegate,t,sE)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=Pt(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return gE($I(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,rE(this._delegate);case 3:return e.abrupt("return",E_(this._delegate,t,sE));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Sb.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function wE(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&yE.getOrCreate(e))},error:t,complete:n}}kE.Persistence=ZI;var bE=function(){function e(){De(this,e),this.providerId="phone",this._delegate=new n_(uE(En.auth()))}return je(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return n_.credential(e,t)}}]),e}();bE.PHONE_SIGN_IN_METHOD=n_.PHONE_SIGN_IN_METHOD,bE.PROVIDER_ID=n_.PROVIDER_ID;var xE=Ug,_E=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:En.app();De(this,e),xE(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new Wx(t,n,i.auth()),this.type=this._delegate.type}return je(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();!function(e){e.INTERNAL.registerComponent(new St("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new kE(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:xg,PASSWORD_RESET:_g,RECOVER_EMAIL:Ig,REVERT_SECOND_FACTOR_ADDITION:Eg,VERIFY_AND_CHANGE_EMAIL:Tg,VERIFY_EMAIL:Sg}},EmailAuthProvider:Mw,FacebookAuthProvider:qw,GithubAuthProvider:Bw,GoogleAuthProvider:zw,OAuthProvider:Vw,PhoneAuthProvider:bE,PhoneMultiFactorGenerator:mI,RecaptchaVerifier:_E,TwitterAuthProvider:Hw,Auth:kE,AuthCredential:nw,Error:ut}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.1.4")}(En);var IE=En.initializeApp({apiKey:"AIzaSyCEm-Kh8LK75bqEPmolddxZytUbuND9aFU",authDomain:"tecno-plus-e4445.firebaseapp.com",projectId:"tecno-plus-e4445",storageBucket:"tecno-plus-e4445.appspot.com",messagingSenderId:"950963295109",appId:"1:950963295109:web:933e9afe0fecd517cfeaec"}),EE=function(){return En.firestore(IE)},TE=En,SE=En.auth(IE),NE=t.createContext([]);NE.displayName="UserContext";var CE=function(e){var n=e.children,r=Ee(t.useState(SE.currentUser),2),i=r[0],a=r[1];SE.onAuthStateChanged((function(){a(SE.currentUser)}));return(0,Ne.jsx)(NE.Provider,{value:{userLogged:i,close:function(){SE.signOut().then((function(){return a(null)})).catch((function(e){return console.error("ocurrio",e)})).finally((function(){}))}},children:n})},AE=function(){return t.useContext(NE)},RE=function(){var e=AE().userLogged,n=Ee(t.useState(""),2),r=n[0],i=n[1];return t.useEffect((function(){setTimeout((function(){e&&i(e.displayName)}),2e3)}),[e]),(0,Ne.jsxs)("button",{className:"user-logo",children:[(0,Ne.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-user",width:"36",height:"36",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"#ffffff",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Ne.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,Ne.jsx)("circle",{cx:"12",cy:"7",r:"4"}),(0,Ne.jsx)("path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"})]}),e?(0,Ne.jsx)("p",{style:{color:"white"},children:r}):(0,Ne.jsx)("p",{style:{color:"white"},children:"Mi cuenta"})]})},PE=function(){var e=AE().userLogged;return(0,Ne.jsxs)("nav",{id:"navbar",className:"navbar d-flex align-content-center navbar-expand-lg sticky-top",children:[(0,Ne.jsx)("button",{className:"navbar-toggler toggler-example",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent1","aria-controls":"navbarSupportedContent1","aria-expanded":"false","aria-label":"Toggle navigation",children:(0,Ne.jsx)("span",{className:"dark-blue-text",children:(0,Ne.jsx)("i",{className:"fas fa-bars fa-1x"})})}),(0,Ne.jsx)(ge,{id:"mainLogo",to:"/home",children:(0,Ne.jsxs)("h1",{children:["TECNO ",(0,Ne.jsx)("span",{children:"PLUS"})]})}),(0,Ne.jsx)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent1",children:(0,Ne.jsxs)("ul",{className:"d-flex main-nav-items mb-0",children:[(0,Ne.jsx)(ge,{to:"/category/apple",children:(0,Ne.jsx)("li",{className:"nav-item",children:"APPLE"})}),(0,Ne.jsx)(ge,{to:"/category/hp",children:(0,Ne.jsx)("li",{className:"nav-item",children:"HP"})}),(0,Ne.jsx)(ge,{to:"/category/dell",children:(0,Ne.jsx)("li",{className:"nav-item",children:"DELL"})})]})}),(0,Ne.jsxs)("div",{className:"d-flex nav-buttons",children:[(0,Ne.jsx)(ge,{to:"/cart",className:"d-flex",children:(0,Ne.jsx)(Pe,{})}),(0,Ne.jsx)(ge,{to:e?"/myAccount":"/myAccount/signIn",className:"d-flex justify-content-center user",children:(0,Ne.jsx)(RE,{})})]})]})},OE=function(){return(0,Ne.jsxs)("footer",{id:"footer",className:"text-center",children:[(0,Ne.jsx)("div",{className:"container pt-3",children:(0,Ne.jsxs)("section",{className:"mb-3",children:[(0,Ne.jsx)("a",{href:"https://ar.linkedin.com/in/coderman/",className:"btn btn-link btn-floating btn-lg text-dark m-1",target:"_blank",rel:"noreferrer",children:(0,Ne.jsx)("i",{className:"fab fa-linkedin"})}),(0,Ne.jsx)("a",{href:"https://github.com/Javier-Olivieri/",className:"btn btn-link btn-floating btn-lg text-dark m-1",target:"_blank",rel:"noreferrer",children:(0,Ne.jsx)("i",{className:"fab fa-github"})})]})}),(0,Ne.jsx)("div",{className:"text-center p-3",children:"Design by Javier Olivieri - 2022"})]})};function DE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function LE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DE(Object(n),!0).forEach((function(t){Oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DE(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var jE=function(e){var t=e.id,n=e.item,r=e.name,i=void 0===r?"nombre del producto":r,a=e.price,o=void 0===a?0:a,s=e.src,u=void 0===s?"https://tienda.ganon.com/sca-dev-kilimanjaro/img/no_image_available.jpeg?resizeid=3%5Cu0026resizeh=250%5Cu0026resizew=300":s;return(0,Ne.jsxs)("div",{className:"productContainer",children:[(0,Ne.jsx)(ge,{className:"productImage",to:"/product/".concat(t),children:(0,Ne.jsx)("div",{className:"productImage",children:(0,Ne.jsx)("img",{src:u,alt:"Imagen del producto"})})}),(0,Ne.jsxs)("div",{className:"productContent",children:[(0,Ne.jsxs)("div",{className:"productInfo",children:[(0,Ne.jsx)("h3",{className:"productName",children:(0,Ne.jsx)(ge,{to:"/product/".concat(t),children:i})}),(0,Ne.jsxs)("span",{className:"productPrice",children:["U$S",o.toFixed(2)]})]}),(0,Ne.jsxs)("div",{className:"productButtons",children:[(0,Ne.jsx)(ge,{to:"/product/".concat(t),children:(0,Ne.jsx)("button",{className:"addToCart",children:"Ver detalles"})}),0!==n.stock?(0,Ne.jsx)(ge,{to:"/product/".concat(t),children:(0,Ne.jsx)("button",{className:"btn btn-danger",children:"ADD TO CART"})}):(0,Ne.jsx)("button",{className:"btn btn-danger disabled",children:"SIN STOCK"})]})]})]})},ME=function(e){var t=e.prods;return(0,Ne.jsx)("div",{id:"itemsList",children:null===t||void 0===t?void 0:t.map((function(e){return(0,Ne.jsx)(jE,{item:e,id:e.id,name:e.name,price:e.price,src:e.src},e.id)}))})},FE=function(){return(0,Ne.jsxs)("div",{className:"myContainer d-flex flex-column loading",children:[(0,Ne.jsx)("p",{children:"Loading..."})," ",(0,Ne.jsxs)("div",{className:"lds-roller",children:[(0,Ne.jsx)("div",{}),(0,Ne.jsx)("div",{}),(0,Ne.jsx)("div",{}),(0,Ne.jsx)("div",{}),(0,Ne.jsx)("div",{}),(0,Ne.jsx)("div",{}),(0,Ne.jsx)("div",{}),(0,Ne.jsx)("div",{})]})]})},UE=function(e){var n=e.filtro,r=Ee(t.useState(!0),2),i=r[0],a=r[1],o=Ee(t.useState([]),2),s=o[0],u=o[1];return t.useEffect((function(){a(!0);var e=EE();(void 0!==n?e.collection("products").where("category","==",n):e.collection("products")).get().then((function(e){e.empty?console.error("No hay productos"):u(e.docs.map((function(e){return LE({id:e.id},e.data())})))})).catch().finally((function(){return a(!1)}))}),[n]),i?(0,Ne.jsx)(FE,{}):(0,Ne.jsx)("section",{id:"itemsContainer",className:"myContainer",children:0===s.length&&void 0!==n?(0,Ne.jsx)("h3",{className:"m-4 text-center",children:"En este momento no tenemos productos de esta categor\xeda"}):!i&&(0,Ne.jsx)(ME,{prods:s})})},VE=function(){return(0,Ne.jsx)(Ne.Fragment,{children:(0,Ne.jsx)(UE,{})})},qE=function(){return(0,Ne.jsxs)("div",{className:"myContainer text-center",children:[(0,Ne.jsx)("h2",{children:"ERROR 404"}),(0,Ne.jsx)("h2",{children:"La p\xe1gina solicitada no existe"}),(0,Ne.jsx)(ge,{to:"/",children:(0,Ne.jsx)("button",{className:"btn btn-danger mt-3",children:"Volv\xe9 a la Home"})})]})},zE=function(e){var n=e.item,r=e.confirm,i=Re().addItem,a=Ee(t.useState(n.initial),2),o=a[0],s=a[1];return(0,Ne.jsxs)("div",{className:"buttons-details",children:[(0,Ne.jsxs)("div",{id:"itemCounter",className:"d-flex",children:[(0,Ne.jsx)("button",{type:"button",className:"operations",onClick:function(){return o>n.initial&&s((function(e){return e-1}))},children:"-"}),(0,Ne.jsx)("button",{type:"button",className:"number",children:o}),(0,Ne.jsx)("button",{type:"button",className:"operations",onClick:function(){return o<n.stock&&s((function(e){return e+1}))},children:"+"})]}),(0,Ne.jsx)("button",{className:"btn btn-danger",onClick:function(){r(o),function(e,t){i(e,t)}(n,o)},children:"Agregar al carrito"})]})},BE=function(e){var n=e.item,r=Ee(t.useState(0),2),i=r[0],a=r[1];return(0,Ne.jsxs)("div",{className:"myContainer item-detail",children:[(0,Ne.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,Ne.jsx)("h3",{children:n.name}),(0,Ne.jsxs)("h3",{className:"c-red",children:["U$S",Number(n.price).toFixed(2)]})]}),(0,Ne.jsxs)("div",{className:"d-flex mt-3",children:[(0,Ne.jsx)("img",{src:n.src,alt:"Imagen del producto en detalle"}),(0,Ne.jsxs)("div",{className:"myContainer",children:[(0,Ne.jsx)("p",{className:"item-description",children:n.description}),0===n.stock?(0,Ne.jsx)("div",{className:"d-flex justify-content-center",children:(0,Ne.jsx)("button",{className:"btn btn-danger end-shopping",disabled:!0,children:" SIN STOCK"})}):0!==i?(0,Ne.jsxs)("div",{className:"d-flex justify-content-center",children:[(0,Ne.jsx)(ge,{to:"/cart",className:"me-5",children:(0,Ne.jsx)("button",{className:"btn btn-danger end-shopping",children:"Terminar mi compra"})}),(0,Ne.jsx)(ge,{to:"/home",children:(0,Ne.jsx)("button",{className:"btn btn-dark end-shopping",children:"Seguir comprando"})})]}):(0,Ne.jsx)(zE,{item:n,confirm:function(e){a(e)}}),(0,Ne.jsx)("hr",{}),(0,Ne.jsxs)("p",{className:"item-stock",children:["Quedan ",n.stock," items disponibles"]})]})]})]})},KE=function(){var e=Ee(t.useState(!0),2),n=e[0],r=e[1],i=Ee(t.useState({}),2),a=i[0],o=i[1],s=fe().id;return t.useEffect((function(){r(!0),EE().collection("products").doc(s).get().then((function(e){e.exists?o(LE({id:e.id},e.data())):(console.error("No se pudo encontrar el producto"),o(void 0))})).catch().finally((function(){return r(!1)}))}),[s]),n?(0,Ne.jsx)(FE,{}):void 0!==a?(0,Ne.jsx)(BE,{item:a},a.id):(0,Ne.jsx)(qE,{})},HE=function(){var e=fe().keyName,n=Ee(t.useState(""),2),r=n[0],i=n[1],a=Ee(t.useState({}),2),o=a[0],s=a[1];return t.useEffect((function(){EE().collection("categories").doc(e).get().then((function(e){e.exists?(s(LE({id:e.id},e.data())),i(o.name)):i("404")})).catch()}),[o.name,e]),(0,Ne.jsxs)(Ne.Fragment,{children:[(0,Ne.jsxs)("h2",{className:"mt-4 ms-7",children:[r," Bienvenidos"]}),"404"===r?(0,Ne.jsx)(qE,{}):(0,Ne.jsx)(UE,{filtro:e})]})},WE=function(){var e=Re(),t=e.cart,n=e.removeItem,r=e.getTotal,i=r();return 0===t.length?(0,Ne.jsxs)("div",{className:"d-flex flex-column",children:[(0,Ne.jsx)("h3",{children:"No hay productos en el carrito"}),(0,Ne.jsx)(ge,{to:"/",children:(0,Ne.jsx)("button",{className:"btn btn-danger mt-3",children:"Volv\xe9 a la tienda"})})]}):(0,Ne.jsxs)("table",{id:"cartList",className:"table",children:[(0,Ne.jsx)("thead",{children:(0,Ne.jsxs)("tr",{children:[(0,Ne.jsx)("th",{scope:"col",children:"PRODUCTO"}),(0,Ne.jsx)("th",{scope:"col",className:"text-center",children:"PRECIO"}),(0,Ne.jsx)("th",{scope:"col",className:"text-center",children:"CANTIDAD"}),(0,Ne.jsx)("th",{scope:"col",className:"text-center",children:"SUBTOTAL"}),(0,Ne.jsx)("th",{scope:"col"})]})}),(0,Ne.jsx)("tbody",{children:t.map((function(e){return(0,Ne.jsxs)("tr",{children:[(0,Ne.jsx)("th",{scope:"row",children:e.item.name}),(0,Ne.jsxs)("td",{className:"text-center",children:["U$S ",e.item.price.toFixed(2)]}),(0,Ne.jsx)("td",{className:"text-center",children:e.quantity}),(0,Ne.jsxs)("td",{className:"text-center",children:["U$S"," ",(Number(e.item.price)*Number(e.quantity)).toFixed(2)]}),(0,Ne.jsx)("td",{className:"text-center remove-item",children:(0,Ne.jsx)("span",{onClick:function(){return function(e){n(e)}(e.itemId)},children:"x"})})]},e.itemId)}))}),(0,Ne.jsx)("tfoot",{children:(0,Ne.jsxs)("tr",{children:[(0,Ne.jsx)("td",{}),(0,Ne.jsx)("td",{}),(0,Ne.jsx)("td",{}),(0,Ne.jsx)("td",{}),(0,Ne.jsxs)("td",{className:"text-center",children:["TOTAL: U$S ",i.toFixed(2)]})]})})]})},GE=function(){var e=Ee(t.useState(!0),2),n=e[0],r=e[1];return t.useEffect((function(){setTimeout((function(){r(!1)}),1e3)}),[]),n},QE=function(){var e=Re(),t=e.clear,n=e.cart;return GE()?(0,Ne.jsx)(FE,{}):(0,Ne.jsxs)("div",{className:"myContainer d-flex flex-column",children:[(0,Ne.jsxs)("div",{className:"d-flex align-items-center justify-content-between mb-1",children:[(0,Ne.jsx)("h2",{children:"CARRITO DE COMPRAS"}),0!==n.length&&(0,Ne.jsx)("button",{className:"btn btn-clear",onClick:function(){t()},children:"Vaciar carrito"})]}),(0,Ne.jsx)("hr",{}),(0,Ne.jsx)(WE,{}),0!==n.length&&(0,Ne.jsx)("div",{className:"d-flex justify-content-end",style:{padding:"0rem 1rem"},children:(0,Ne.jsx)(ge,{to:"/checkout",children:(0,Ne.jsx)("button",{className:"btn btn-danger m-2 my-btn",children:"Finalizar compra"})})})]})},$E=function(e){var n=e.estado,r=e.orderId,i=Ee(t.useState(n),2),a=i[0],o=i[1];return t.useEffect((function(){o(n)}),[n]),(0,Ne.jsx)("div",{id:"confirmation-modal",className:a?"modal fade d-block show":"modal fade",tabIndex:"-1",children:(0,Ne.jsx)("div",{className:"modal-dialog",children:(0,Ne.jsxs)("div",{className:"modal-content",children:[(0,Ne.jsxs)("div",{className:"modal-header",children:[(0,Ne.jsx)("h5",{className:"modal-title",children:"FELICITACIONES \xa1TU COMPRA FUE EXITOSA!"}),(0,Ne.jsx)(ge,{to:"/home",children:(0,Ne.jsx)("button",{type:"button",className:"btn-close"})})]}),(0,Ne.jsxs)("div",{className:"modal-body",children:[(0,Ne.jsx)("p",{children:"El pedido llegar\xe1 durante los pr\xf3ximos 5 d\xedas h\xe1biles."}),(0,Ne.jsxs)("p",{children:["Id de la compra: ",r]})]}),(0,Ne.jsx)("div",{className:"modal-footer d-flex justify-items-end",children:(0,Ne.jsx)(ge,{to:"/home",children:(0,Ne.jsx)("button",{className:"btn btn-danger",children:"Cerrar"})})})]})})})},YE=function(){var e=Ee(t.useState(!1),2),n=e[0],r=e[1],i=Ee(t.useState(""),2),a=i[0],o=i[1],s=Re(),u=s.cart,c=s.clear,l=s.getTotal,f=AE().userLogged,h=Ee(t.useState({fullName:f?f.displayName:"",email:f?f.email:"",phone:f?f.photoURL:""}),2),d=h[0],p=h[1],v=Ee(t.useState({fullName:"",state:"Buenos Aires",street:"",homeNumber:0,postalCode:0}),2),m=v[0],y=v[1],g=function(e){p((function(t){return LE(LE({},t),{},Oe({},e.target.name,e.target.value))}))},k=function(e){y((function(t){return LE(LE({},t),{},Oe({},e.target.name,e.target.value))}))};return(0,Ne.jsxs)(Ne.Fragment,{children:[(0,Ne.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),0!==u.length){var t=Number(l().toFixed(2));!function(e){var t=EE();t.collection("orders").add(e).then((function(e){return o(e.id)})).catch((function(e){return console.error(e)})),u.forEach((function(e){t.collection("products").doc(e.itemId).update({stock:e.item.stock-e.quantity})}))}({buyer:d,items:u,shippingInfo:m,priceTotal:t,date:TE.firestore.Timestamp.now().toDate()}),Array.from(document.querySelectorAll("input")).forEach((function(e){return e.value=""})),c(),r(!0)}else console.error("El carrito esta vac\xedo. Agrega productos para continuar la compra.")},className:"d-flex flex-column align-items-center",children:[(0,Ne.jsxs)("fieldset",{children:[(0,Ne.jsx)("legend",{className:"mb-3",children:"Datos personales"}),(0,Ne.jsx)("hr",{}),(0,Ne.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Ne.jsx)("label",{htmlFor:"fullName",children:"Nombres y Apellido:"}),(0,Ne.jsx)("input",{type:"text",id:"fullName",name:"fullName",onChange:g,value:f?f.displayName:null,disabled:f&&!0})]}),(0,Ne.jsxs)("div",{className:"d-flex align-items-center mt-3",children:[(0,Ne.jsx)("label",{htmlFor:"email",children:"Email:"}),(0,Ne.jsx)("input",{type:"email",id:"email",name:"email",onChange:g,value:f?f.email:null,disabled:f&&!0,required:!0})]}),(0,Ne.jsxs)("div",{className:"d-flex align-items-center mt-3",children:[(0,Ne.jsx)("label",{htmlFor:"phone",children:"Celular:"}),(0,Ne.jsx)("input",{type:"tel",id:"phone",name:"phone",onChange:g,value:f?f.photoURL:null,disabled:f&&!0,required:!0})]})]}),(0,Ne.jsxs)("fieldset",{children:[(0,Ne.jsx)("legend",{className:"mb-3",children:"Datos de env\xedo"}),(0,Ne.jsx)("hr",{}),(0,Ne.jsxs)("div",{className:"d-flex align-items-center mt-3",children:[(0,Ne.jsx)("label",{children:"Nombres y Apellido:"}),(0,Ne.jsx)("input",{type:"text",name:"fullName",onChange:k,required:!0,style:{width:"320px"}})]}),(0,Ne.jsxs)("div",{className:"d-flex justify-content-around",children:[(0,Ne.jsxs)("div",{className:"d-flex align-items-center mt-3",children:[(0,Ne.jsx)("label",{children:"Provincia:"}),(0,Ne.jsxs)("select",{name:"state",onChange:k,children:[(0,Ne.jsx)("option",{defaultValue:!0,value:"Buenos Aires",children:"Buenos Aires"}),(0,Ne.jsx)("option",{value:"Santa Fe",children:"Santa Fe"}),(0,Ne.jsx)("option",{value:"La Pampa",children:"La Pampa"})]})]}),(0,Ne.jsxs)("div",{className:"d-flex align-items-center mt-3",style:{marginLeft:"2.3rem"},children:[(0,Ne.jsx)("label",{children:"CP:"}),(0,Ne.jsx)("input",{type:"number",name:"postalCode",onChange:k,required:!0,style:{width:"80px"}})]})]}),(0,Ne.jsxs)("div",{className:"d-flex justify-content-around",children:[(0,Ne.jsxs)("div",{className:"d-flex align-items-center mt-3",children:[(0,Ne.jsx)("label",{children:"Direcci\xf3n:"}),(0,Ne.jsx)("input",{type:"text",name:"street",onChange:k,required:!0,style:{width:"190px"}})]}),(0,Ne.jsxs)("div",{className:"d-flex align-items-center mt-3",children:[(0,Ne.jsx)("label",{children:"N\xfamero:"}),(0,Ne.jsx)("input",{type:"number",name:"homeNumber",onChange:k,required:!0,style:{width:"80px"}})]})]})]}),(0,Ne.jsx)("button",{type:"submit",className:"btn btn-danger my-btn mt-3",children:"FINALIZAR COMPRA"})]}),(0,Ne.jsx)($E,{estado:n,orderId:a})]})},JE=function(e){var n=e.estado,r=Ee(t.useState(!0),2),i=r[0],a=r[1];return t.useEffect((function(){a(i===n?function(e){return!e}:n)}),[n]),(0,Ne.jsx)("div",{id:"cart-list-modal",className:i?"modal fade d-block show":"modal fade",tabIndex:"-1",children:(0,Ne.jsx)("div",{className:"modal-dialog",children:(0,Ne.jsxs)("div",{className:"modal-content",children:[(0,Ne.jsxs)("div",{className:"modal-header",children:[(0,Ne.jsx)("h5",{className:"modal-title",children:"CARRITO DE COMPRAS"}),(0,Ne.jsx)("button",{type:"button",className:"btn-close",onClick:function(){return a((function(e){return!e}))}})]}),(0,Ne.jsx)("div",{className:"modal-body",children:(0,Ne.jsx)(WE,{})})]})})})},XE=function(){var e=Re().cart,n=Ee(t.useState(!1),2),r=n[0],i=n[1];return(0,Ne.jsxs)("div",{className:"myContainer",children:[(0,Ne.jsxs)("div",{className:"d-flex align-items-center justify-content-between mb-1",children:[(0,Ne.jsx)("h2",{children:"CHECKOUT"}),0!==e.length&&(0,Ne.jsx)("button",{className:"btn btn-clear btn-show",onClick:function(){return i((function(e){return!e}))},children:"Ver carrito"})]}),(0,Ne.jsx)(JE,{estado:r}),(0,Ne.jsx)("hr",{}),(0,Ne.jsx)(YE,{})]})},ZE=function(){var e=Ee(t.useState("something"),2),n=e[0],r=e[1],i=Ee(t.useState([]),2),a=i[0],o=i[1],s=Ee(t.useState(0),2),u=s[0],c=s[1],l=Ee(t.useState(!1),2),f=l[0],h=l[1];return(0,Ne.jsxs)(Ne.Fragment,{children:[(0,Ne.jsx)("h3",{children:"Mis pedidos"}),(0,Ne.jsx)("hr",{}),(0,Ne.jsx)("p",{className:"search",children:"Busca tu orden ingresando el id de tu orden."}),(0,Ne.jsxs)("div",{className:"d-flex row",children:[(0,Ne.jsx)("input",{className:"search",type:"text",placeholder:"Ingresa el ID de tu orden",onChange:function(e){return r(e.target.value)}}),(0,Ne.jsx)("button",{type:"button",className:"btn btn-danger btn-search mt-3",onClick:function(){return o([]),void EE().collection("orders").doc(n).get().then((function(e){e.exists?(o(e.data().items),c(e.data().priceTotal)):(o([]),console.error("Couldn't find the order"))})).then((function(){h(!0)})).catch((function(e){console.error(e)})).finally((function(){}))},children:"BUSCAR"})]}),a.length>0?(0,Ne.jsxs)("div",{className:"mt-5",children:[(0,Ne.jsx)("h3",{className:"mt-5",children:"Esta es tu compra:"}),(0,Ne.jsxs)("table",{id:"cartList",className:"table",children:[(0,Ne.jsx)("thead",{children:(0,Ne.jsxs)("tr",{children:[(0,Ne.jsx)("th",{scope:"col",children:"PRODUCTO"}),(0,Ne.jsx)("th",{scope:"col",className:"text-center",children:"PRECIO"}),(0,Ne.jsx)("th",{scope:"col",className:"text-center",children:"CANTIDAD"}),(0,Ne.jsx)("th",{scope:"col",className:"text-center",children:"SUBTOTAL"})]})}),(0,Ne.jsx)("tbody",{children:a.map((function(e){return(0,Ne.jsxs)("tr",{children:[(0,Ne.jsx)("th",{scope:"row",children:e.item.name}),(0,Ne.jsxs)("td",{className:"text-center",children:["U$S ",e.item.price.toFixed(2)]}),(0,Ne.jsx)("td",{className:"text-center",children:e.quantity}),(0,Ne.jsxs)("td",{className:"text-center",children:["U$S"," ",(Number(e.item.price)*Number(e.quantity)).toFixed(2)]})]},e.itemId)}))}),(0,Ne.jsx)("tfoot",{children:(0,Ne.jsxs)("tr",{children:[(0,Ne.jsx)("td",{}),(0,Ne.jsx)("td",{}),(0,Ne.jsx)("td",{}),(0,Ne.jsxs)("td",{className:"text-center",children:["TOTAL: U$S ",u.toFixed(2)]})]})})]})]}):f&&(0,Ne.jsxs)("div",{className:"d-flex align-items-center mt-5",children:[(0,Ne.jsx)("i",{className:"fas fa-exclamation-triangle fa-2x me-3",style:{color:"#dc3545"}}),(0,Ne.jsx)("h4",{children:"El ID ingresado es incorrecto"})]})]})},eT=function(){var e=AE().userLogged;return(0,Ne.jsxs)(Ne.Fragment,{children:[(0,Ne.jsx)("h3",{children:"Mis datos"}),(0,Ne.jsx)("hr",{}),(0,Ne.jsx)("table",{id:"accountInfo",className:"table",children:(0,Ne.jsxs)("tbody",{children:[(0,Ne.jsxs)("tr",{children:[(0,Ne.jsx)("td",{className:"w-25",children:"Apellido y nombres:"}),(0,Ne.jsx)("td",{children:e.displayName?e.displayName:"No tenemos esta informacion disponible"})]}),(0,Ne.jsxs)("tr",{children:[(0,Ne.jsx)("td",{className:"w-25",children:"Email:"}),(0,Ne.jsx)("td",{children:e.email?e.email:"No tenemos esta informacion disponible"})]}),(0,Ne.jsxs)("tr",{children:[(0,Ne.jsx)("td",{className:"w-25",children:"Celular:"}),(0,Ne.jsx)("td",{children:e.photoURL?e.photoURL:"No tenemos esta informacion disponible"})]})]})})]})},tT=function(){var e=AE(),n=e.userLogged,r=e.close,i=Ee(t.useState(!1),2),a=i[0],o=i[1],s=GE();return n?(0,Ne.jsx)(Ne.Fragment,{children:s?(0,Ne.jsx)(FE,{}):(0,Ne.jsxs)("div",{className:"myContainer d-flex flex-column",children:[(0,Ne.jsxs)("div",{className:"d-flex align-items-center justify-content-between mb-1",children:[(0,Ne.jsx)("h2",{children:"MI CUENTA"}),(0,Ne.jsx)("button",{className:"btn btn-clear",onClick:function(){r()},children:"Cerrar sesion"})]}),(0,Ne.jsx)("hr",{}),(0,Ne.jsxs)("div",{className:"d-flex column",children:[(0,Ne.jsxs)("ul",{className:"account",children:[(0,Ne.jsx)("li",{className:a?void 0:"red",onClick:function(){return o(!1)},children:"Datos personales"}),(0,Ne.jsx)("li",{className:a?"red":void 0,onClick:function(){return o(!0)},children:"Mis pedidos"})]}),(0,Ne.jsx)("div",{style:{width:"75%"},children:a?(0,Ne.jsx)(ZE,{}):(0,Ne.jsx)(eT,{})})]})]})}):(0,Ne.jsx)(Z,{to:"/myAccount/signIn"})},nT=function(){var e=Ee(t.useState(""),2),n=e[0],r=e[1],i=Ee(t.useState(""),2),a=i[0],o=i[1],s=Ee(t.useState(!1),2),u=s[0],c=s[1];return AE().userLogged?(0,Ne.jsx)(Z,{to:"/myAccount"}):(0,Ne.jsx)("section",{children:(0,Ne.jsxs)("div",{className:"wrap d-flex justify-content-center w-100",children:[(0,Ne.jsx)("div",{className:"text-wrap p-4 p-lg-5 text-center d-flex align-items-center order-md-last",children:(0,Ne.jsxs)("div",{className:"text w-100",children:[(0,Ne.jsx)("h2",{className:"logIn",children:"\xa1Bienvenido a Tecno-Plus!"}),(0,Ne.jsx)("p",{className:"logIn",children:"\xbfTodav\xeda no tenes una cuenta?"}),(0,Ne.jsx)(ge,{to:"/myAccount/signUp",className:"btn btn-danger my-btn",children:"Registrate"})]})}),(0,Ne.jsxs)("div",{className:"login-wrap p-4 p-lg-5",style:{width:"350px"},children:[(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("div",{className:"w-100",children:(0,Ne.jsx)("h2",{className:"logIn mb-3",children:"Ingresar"})}),(0,Ne.jsx)("hr",{})]}),(0,Ne.jsxs)("form",{onSubmit:function(e){e.preventDefault(),SE.signInWithEmailAndPassword(n,a).then((function(){c(!1)})).catch((function(){c(!0)})).finally((function(){}))},className:"signin-form",children:[(0,Ne.jsxs)("div",{className:"form-group mb-3",children:[(0,Ne.jsx)("label",{className:"label",children:"Email"}),(0,Ne.jsx)("input",{type:"email",className:"form-control",placeholder:"Ingrese su email",onChange:function(e){return r(e.target.value)},required:!0})]}),(0,Ne.jsxs)("div",{className:"form-group mb-3",children:[(0,Ne.jsx)("label",{className:"label",children:"Contrase\xf1a"}),(0,Ne.jsx)("input",{type:"password",className:"form-control",placeholder:"Ingrese su contrase\xf1a",onChange:function(e){return o(e.target.value)},required:!0})]}),u&&(0,Ne.jsx)("div",{className:"form-group mb-3",children:(0,Ne.jsx)("div",{className:"btn-danger",children:"Usuario o contrase\xf1a incorrectos."})}),(0,Ne.jsx)("div",{className:"form-group",children:(0,Ne.jsx)("button",{type:"submit",className:"form-control btn btn-danger my-btn submit px-3 w-50",children:"Iniciar sesi\xf3n"})})]})]})]})})},rT=function(){return GE()?(0,Ne.jsx)(FE,{}):(0,Ne.jsx)(Ne.Fragment,{children:(0,Ne.jsx)(nT,{})})},iT=function(){var e=Ee(t.useState(""),2),n=e[0],r=e[1],i=Ee(t.useState(!1),2),a=i[0],o=i[1],s=Ee(t.useState(0),2),u=s[0],c=s[1],l=Ee(t.useState(""),2),f=l[0],h=l[1],d=Ee(t.useState(""),2),p=d[0],v=d[1];return a?(0,Ne.jsx)(Z,{to:"/"}):(0,Ne.jsxs)("div",{className:"myContainer",children:[(0,Ne.jsxs)("form",{onSubmit:function(e){e.preventDefault(),SE.createUserWithEmailAndPassword(n,f).then((function(){SE.currentUser.updateProfile({displayName:p,photoURL:u})})).catch((function(){console.error("failed")})).finally((function(){o(!0)}))},className:"d-flex flex-column align-items-center",children:[(0,Ne.jsxs)("fieldset",{children:[(0,Ne.jsx)("legend",{className:"mb-3",children:"Datos personales"}),(0,Ne.jsx)("hr",{}),(0,Ne.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Ne.jsx)("label",{htmlFor:"fullName",children:"Nombres y Apellido:"}),(0,Ne.jsx)("input",{type:"text",id:"fullName",name:"fullName",onChange:function(e){return v(e.target.value)},required:!0})]}),(0,Ne.jsxs)("div",{className:"d-flex align-items-center mt-3",children:[(0,Ne.jsx)("label",{htmlFor:"phone",children:"Celular:"}),(0,Ne.jsx)("input",{type:"tel",id:"phone",name:"phone",onChange:function(e){return c(e.target.value)},required:!0})]}),(0,Ne.jsxs)("div",{className:"d-flex align-items-center mt-3",children:[(0,Ne.jsx)("label",{htmlFor:"email",children:"Email:"}),(0,Ne.jsx)("input",{type:"email",id:"email",name:"email",onChange:function(e){return r(e.target.value)},required:!0})]}),(0,Ne.jsxs)("div",{className:"d-flex mt-3",children:[(0,Ne.jsx)("label",{htmlFor:"phone",children:"Contrase\xf1a:"}),(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("input",{type:"password",id:"password",name:"password",className:"w-100",onChange:function(e){return h(e.target.value)},required:!0}),(0,Ne.jsx)("div",{className:"form-text",children:"La contrase\xf1a debe tener 6 caracteres como minimo."})]})]})]}),(0,Ne.jsx)("button",{type:"submit",className:"btn btn-danger mt-3 registratration-btn",children:"REGISTRARSE"})]}),(0,Ne.jsx)(ge,{to:"/MyAccount/signIn",className:"d-flex justify-content-center mt-3",children:"Ya tengo cuenta"})]})},aT=function(){return GE()?(0,Ne.jsx)(FE,{}):(0,Ne.jsx)(Ne.Fragment,{children:(0,Ne.jsx)(iT,{})})},oT=function(){return(0,Ne.jsx)(Ne.Fragment,{children:(0,Ne.jsx)(he,{children:(0,Ne.jsx)(CE,{children:(0,Ne.jsxs)(Ae,{children:[(0,Ne.jsx)(PE,{}),(0,Ne.jsxs)(ce,{children:[(0,Ne.jsx)(re,{exact:!0,path:"/",component:VE}),(0,Ne.jsx)(re,{exact:!0,path:"/home",component:VE}),(0,Ne.jsx)(re,{exact:!0,path:"/Tecno-Plus",component:VE}),(0,Ne.jsx)(re,{exact:!0,path:"/cart",component:QE}),(0,Ne.jsx)(re,{exact:!0,path:"/checkout",component:XE}),(0,Ne.jsx)(re,{exact:!0,path:"/myAccount",component:tT}),(0,Ne.jsx)(re,{exact:!0,path:"/myAccount/signIn",component:rT}),(0,Ne.jsx)(re,{exact:!0,path:"/myAccount/signUp",component:aT}),(0,Ne.jsx)(re,{exact:!0,path:"/product/:id",component:KE}),(0,Ne.jsx)(re,{exact:!0,path:"/category/:keyName",component:HE}),(0,Ne.jsx)(re,{path:"*",component:qE})]}),(0,Ne.jsx)(OE,{})]})})})})};r.render((0,Ne.jsx)(t.StrictMode,{children:(0,Ne.jsx)(oT,{})}),document.getElementById("root"))}()}();
//# sourceMappingURL=main.61b5109c.js.map